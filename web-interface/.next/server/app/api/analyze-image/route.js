"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/analyze-image/route";
exports.ids = ["app/api/analyze-image/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "fs/promises":
/*!******************************!*\
  !*** external "fs/promises" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("fs/promises");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fanalyze-image%2Froute&page=%2Fapi%2Fanalyze-image%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fanalyze-image%2Froute.ts&appDir=C%3A%5CUsers%5Cmaxsi%5Cqwewqeqr%5Cweb-interface%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cmaxsi%5Cqwewqeqr%5Cweb-interface&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fanalyze-image%2Froute&page=%2Fapi%2Fanalyze-image%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fanalyze-image%2Froute.ts&appDir=C%3A%5CUsers%5Cmaxsi%5Cqwewqeqr%5Cweb-interface%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cmaxsi%5Cqwewqeqr%5Cweb-interface&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_maxsi_qwewqeqr_web_interface_src_app_api_analyze_image_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/analyze-image/route.ts */ \"(rsc)/./src/app/api/analyze-image/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/analyze-image/route\",\n        pathname: \"/api/analyze-image\",\n        filename: \"route\",\n        bundlePath: \"app/api/analyze-image/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\maxsi\\\\qwewqeqr\\\\web-interface\\\\src\\\\app\\\\api\\\\analyze-image\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_maxsi_qwewqeqr_web_interface_src_app_api_analyze_image_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/analyze-image/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZhbmFseXplLWltYWdlJTJGcm91dGUmcGFnZT0lMkZhcGklMkZhbmFseXplLWltYWdlJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGYW5hbHl6ZS1pbWFnZSUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNtYXhzaSU1Q3F3ZXdxZXFyJTVDd2ViLWludGVyZmFjZSU1Q3NyYyU1Q2FwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9QyUzQSU1Q1VzZXJzJTVDbWF4c2klNUNxd2V3cWVxciU1Q3dlYi1pbnRlcmZhY2UmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ2lDO0FBQzlHO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYmFuay1zdGF0ZW1lbnQtYW5hbHl6ZXIvP2EzNDgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiQzpcXFxcVXNlcnNcXFxcbWF4c2lcXFxccXdld3FlcXJcXFxcd2ViLWludGVyZmFjZVxcXFxzcmNcXFxcYXBwXFxcXGFwaVxcXFxhbmFseXplLWltYWdlXFxcXHJvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9hbmFseXplLWltYWdlL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvYW5hbHl6ZS1pbWFnZVwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvYW5hbHl6ZS1pbWFnZS9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkM6XFxcXFVzZXJzXFxcXG1heHNpXFxcXHF3ZXdxZXFyXFxcXHdlYi1pbnRlcmZhY2VcXFxcc3JjXFxcXGFwcFxcXFxhcGlcXFxcYW5hbHl6ZS1pbWFnZVxcXFxyb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvYW5hbHl6ZS1pbWFnZS9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fanalyze-image%2Froute&page=%2Fapi%2Fanalyze-image%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fanalyze-image%2Froute.ts&appDir=C%3A%5CUsers%5Cmaxsi%5Cqwewqeqr%5Cweb-interface%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cmaxsi%5Cqwewqeqr%5Cweb-interface&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/analyze-image/route.ts":
/*!********************************************!*\
  !*** ./src/app/api/analyze-image/route.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var fs_promises__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! fs/promises */ \"fs/promises\");\n/* harmony import */ var fs_promises__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(fs_promises__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\n\n// Путь к Python API\nconst PYTHON_API_URL = process.env.PYTHON_API_URL || \"http://localhost:8000\";\n// Проверка доступности Python API\nasync function checkApiAvailability() {\n    try {\n        const response = await fetch(`${PYTHON_API_URL}/health`, {\n            method: \"GET\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            signal: AbortSignal.timeout(3000) // Таймаут 3 секунды\n        });\n        return response.ok;\n    } catch (error) {\n        console.error(\"Ошибка при проверке доступности API:\", error);\n        return false;\n    }\n}\nasync function POST(request) {\n    try {\n        // Проверяем доступность Python API\n        const isApiAvailable = await checkApiAvailability();\n        console.log(`Python API доступен: ${isApiAvailable}`);\n        // Получаем FormData из запроса\n        const formData = await request.formData();\n        const image = formData.get(\"image\");\n        const gender = formData.get(\"gender\") || \"унисекс\";\n        if (!image) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Изображение не найдено\"\n            }, {\n                status: 400\n            });\n        }\n        console.log(`Параметр gender: ${gender}`);\n        // Создаем временный путь для сохранения изображения\n        const bytes = await image.arrayBuffer();\n        const buffer = Buffer.from(bytes);\n        const tempDir = path__WEBPACK_IMPORTED_MODULE_2___default().join(process.cwd(), \"public\", \"temp\");\n        // Создаем директорию temp, если она не существует\n        try {\n            await (0,fs_promises__WEBPACK_IMPORTED_MODULE_1__.access)(tempDir);\n        } catch  {\n            await (0,fs_promises__WEBPACK_IMPORTED_MODULE_1__.mkdir)(tempDir, {\n                recursive: true\n            });\n            console.log(`Создана директория: ${tempDir}`);\n        }\n        const fileName = `${Date.now()}_${image.name}`;\n        const filePath = path__WEBPACK_IMPORTED_MODULE_2___default().join(tempDir, fileName);\n        const fileUrl = `/temp/${fileName}`;\n        // Сохраняем изображение\n        await (0,fs_promises__WEBPACK_IMPORTED_MODULE_1__.writeFile)(filePath, buffer);\n        console.log(`Изображение сохранено: ${filePath}`);\n        // Если Python API доступен, отправляем запрос туда\n        if (isApiAvailable) {\n            try {\n                console.log(\"Отправляем запрос на Python API\");\n                // Создаем новый FormData для отправки в Python API\n                const pythonApiFormData = new FormData();\n                // В Python API ожидается файл с именем 'file'\n                pythonApiFormData.append(\"file\", new Blob([\n                    buffer\n                ], {\n                    type: image.type\n                }), fileName);\n                // Добавляем параметр gender\n                pythonApiFormData.append(\"gender\", gender);\n                // Отправляем запрос на Python API\n                const pythonApiResponse = await fetch(`${PYTHON_API_URL}/analyze-image`, {\n                    method: \"POST\",\n                    body: pythonApiFormData\n                });\n                if (!pythonApiResponse.ok) {\n                    const errorText = await pythonApiResponse.text();\n                    console.error(`Ошибка Python API: ${pythonApiResponse.status}`, errorText);\n                    throw new Error(`Ошибка Python API: ${pythonApiResponse.status}`);\n                }\n                const analysisData = await pythonApiResponse.json();\n                console.log(\"Получен ответ от Python API:\", analysisData);\n                // Обрабатываем ответ от Python API и преобразуем в формат для фронтенда\n                let results = [];\n                if (analysisData.results && Array.isArray(analysisData.results)) {\n                    results = analysisData.results;\n                } else if (analysisData.items && Array.isArray(analysisData.items)) {\n                    // Преобразуем формат данных из Python API в формат для фронтенда\n                    results = analysisData.items.map((item, index)=>({\n                            id: `${index + 1}`,\n                            name: item.name || item.type || \"Предмет одежды\",\n                            description: item.description || `${item.color || \"\"} ${item.material || \"\"}`.trim(),\n                            price: Math.floor(Math.random() * 5000) + 500,\n                            imageUrl: item.imageUrl || `https://basket-0${index % 9 + 1}.wbbasket.ru/vol${index + 1}00/part${index + 1}00${index + 1}/100${index + 1}${index + 1}${index + 1}/images/c516x688/1.webp`,\n                            category: item.category || \"Одежда\",\n                            gender: item.gender || \"унисекс\"\n                        }));\n                } else if (analysisData.elements && Array.isArray(analysisData.elements)) {\n                    // Обрабатываем формат с полем elements\n                    let allProducts = [];\n                    // Проходим по каждому элементу одежды\n                    for (const element of analysisData.elements){\n                        if (element.wb_products && Array.isArray(element.wb_products)) {\n                            // Преобразуем продукты из Wildberries в наш формат\n                            const products = element.wb_products.map((product, idx)=>({\n                                    id: product.id || `${element.type}-${idx}`,\n                                    name: product.name || `${element.color} ${element.type}`,\n                                    description: product.description || element.description || `${element.color} ${element.type}`,\n                                    price: product.price || 0,\n                                    oldPrice: product.priceU ? product.priceU / 100 : undefined,\n                                    sale_price: product.sale_price || product.salePriceU ? product.salePriceU / 100 : undefined,\n                                    imageUrl: product.imageUrl || product.img || product.pics && product.pics[0],\n                                    category: element.type || \"Одежда\",\n                                    gender: element.gender || gender || \"унисекс\",\n                                    url: product.url || product.link,\n                                    brand: product.brand\n                                }));\n                            allProducts = [\n                                ...allProducts,\n                                ...products\n                            ];\n                        } else {\n                            // Если нет wb_products, создаем демо-продукт на основе описания элемента\n                            allProducts.push({\n                                id: `${element.type}-demo`,\n                                name: `${element.color} ${element.type}`,\n                                description: element.description || `${element.color} ${element.type}`,\n                                price: Math.floor(Math.random() * 5000) + 500,\n                                imageUrl: `https://basket-0${allProducts.length % 9 + 1}.wbbasket.ru/vol${allProducts.length + 1}00/part${allProducts.length + 1}00${allProducts.length + 1}/100${allProducts.length + 1}${allProducts.length + 1}${allProducts.length + 1}/images/c516x688/1.webp`,\n                                category: element.type || \"Одежда\",\n                                gender: element.gender || gender || \"унисекс\"\n                            });\n                        }\n                    }\n                    results = allProducts;\n                } else {\n                    // Если ничего не найдено, используем моковые данные\n                    console.log(\"Неизвестный формат данных от Python API, используем моковые данные\");\n                    results = getMockResults(gender).results;\n                }\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    results,\n                    imageUrl: fileUrl,\n                    api_source: \"python\",\n                    analysis: analysisData.analysis || \"\"\n                });\n            } catch (error) {\n                console.error(\"Ошибка при обращении к Python API:\", error);\n                // В случае ошибки возвращаем моковые данные\n                const mockData = getMockResults(gender);\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    results: mockData.results,\n                    imageUrl: fileUrl,\n                    error: `Ошибка при обращении к Python API: ${error instanceof Error ? error.message : \"Неизвестная ошибка\"}`,\n                    api_source: \"mock\",\n                    analysis: \"Не удалось проанализировать изображение из-за ошибки API.\"\n                });\n            }\n        } else {\n            // Если Python API недоступен, используем моковые данные\n            console.log(\"Python API недоступен, используем моковые данные\");\n            const mockData = getMockResults(gender);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                results: mockData.results,\n                imageUrl: fileUrl,\n                api_source: \"mock\",\n                analysis: \"Анализ недоступен - сервер анализа изображений не отвечает.\"\n            });\n        }\n    } catch (error) {\n        console.error(\"Ошибка при обработке изображения:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Произошла ошибка при обработке изображения\"\n        }, {\n            status: 500\n        });\n    }\n}\n// Функция для получения моковых данных\nfunction getMockResults(gender = \"унисекс\") {\n    const userGender = gender.toLowerCase();\n    return {\n        results: [\n            {\n                id: \"1\",\n                name: \"Белая хлопковая футболка\",\n                description: \"Базовая футболка из органического хлопка с круглым вырезом\",\n                price: 999,\n                imageUrl: \"https://basket-01.wbbasket.ru/vol1001/part100135/100135766/images/c516x688/1.webp\",\n                category: \"Верх\",\n                gender: userGender\n            },\n            {\n                id: \"2\",\n                name: \"Белая футболка оверсайз\",\n                description: \"Свободная футболка свободного кроя из мягкого хлопка\",\n                price: 1299,\n                imageUrl: \"https://basket-03.wbbasket.ru/vol283/part28364/28364770/images/c516x688/1.webp\",\n                category: \"Верх\",\n                gender: userGender\n            },\n            {\n                id: \"3\",\n                name: \"Футболка с принтом\",\n                description: \"Стильная хлопковая футболка с графическим принтом\",\n                price: 1599,\n                imageUrl: \"https://basket-05.wbbasket.ru/vol758/part75846/75846387/images/c516x688/1.webp\",\n                category: \"Верх\",\n                gender: userGender === \"мужской\" ? \"мужской\" : \"женский\"\n            },\n            {\n                id: \"4\",\n                name: \"Базовая белая блузка\",\n                description: \"Элегантная блузка из смесового хлопка со свободным силуэтом\",\n                price: 2499,\n                imageUrl: \"https://basket-11.wbbasket.ru/vol1457/part145766/145766287/images/c516x688/1.webp\",\n                category: \"Верх\",\n                gender: \"женский\"\n            },\n            {\n                id: \"5\",\n                name: \"Черная хлопковая футболка\",\n                description: \"Классическая черная футболка из премиального хлопка\",\n                price: 1099,\n                imageUrl: \"https://basket-10.wbbasket.ru/vol1418/part141812/141812883/images/c516x688/1.webp\",\n                category: \"Верх\",\n                gender: \"мужской\"\n            },\n            {\n                id: \"6\",\n                name: \"Белая рубашка\",\n                description: \"Классическая рубашка из хлопка с длинным рукавом\",\n                price: 2999,\n                imageUrl: \"https://basket-12.wbbasket.ru/vol1688/part168842/168842122/images/c516x688/1.webp\",\n                category: \"Верх\",\n                gender: userGender === \"женский\" ? \"женский\" : \"мужской\"\n            }\n        ]\n    };\n}\n// Функция для разбора ответа от Python API и преобразования в формат ClothingRecognitionData\nfunction parseClothingItemsFromAnalysis(analysisData) {\n    // Если API вернул уже правильно отформатированные данные\n    if (analysisData.elements && Array.isArray(analysisData.elements)) {\n        return analysisData.elements.map((item)=>({\n                type: item.type || item.name || \"Предмет одежды\",\n                color: item.color || \"неизвестный\",\n                description: item.description || \"\",\n                material: item.material,\n                pattern: item.pattern,\n                gender: item.gender\n            }));\n    }\n    // Если API вернул данные в поле 'analysis'\n    if (analysisData.analysis) {\n        console.log(\"Получен анализ текста:\", analysisData.analysis);\n    }\n    // Если API вернул данные в нестандартной структуре, проверяем все возможные поля\n    const possibleDataFields = [\n        \"data\",\n        \"result\",\n        \"results\",\n        \"items\",\n        \"clothing_items\"\n    ];\n    for (const field of possibleDataFields){\n        if (analysisData[field] && (Array.isArray(analysisData[field]) || typeof analysisData[field] === \"object\")) {\n            console.log(`Найдены данные в поле ${field}:`, analysisData[field]);\n            if (Array.isArray(analysisData[field])) {\n                return analysisData[field].map((item)=>({\n                        type: item.type || item.name || \"Предмет одежды\",\n                        color: item.color || \"неизвестный\",\n                        description: item.description || \"\",\n                        material: item.material,\n                        pattern: item.pattern,\n                        gender: item.gender\n                    }));\n            }\n        }\n    }\n    // Если API вернул анализ в текстовом формате, пытаемся извлечь информацию о предметах одежды\n    const analysisText = analysisData.analysis || analysisData.description || \"\";\n    if (!analysisText) {\n        console.log(\"Нет текстового анализа, возвращаем моковые данные\");\n        return getMockAnalysisResponse().items;\n    }\n    // Пытаемся извлечь элементы одежды из текста\n    const clothingItems = [];\n    // Ищем упоминания предметов одежды в тексте\n    const commonClothingItems = [\n        \"футболка\",\n        \"рубашка\",\n        \"блузка\",\n        \"платье\",\n        \"юбка\",\n        \"брюки\",\n        \"джинсы\",\n        \"шорты\",\n        \"куртка\",\n        \"пальто\",\n        \"свитер\",\n        \"кардиган\",\n        \"худи\",\n        \"джемпер\",\n        \"кроссовки\",\n        \"туфли\",\n        \"ботинки\",\n        \"сапоги\",\n        \"кеды\",\n        \"шапка\",\n        \"шляпа\",\n        \"берет\",\n        \"кепка\",\n        \"шарф\",\n        \"перчатки\",\n        \"носки\",\n        \"колготки\",\n        \"белье\",\n        \"костюм\",\n        \"пиджак\",\n        \"жакет\",\n        \"блейзер\"\n    ];\n    // Ищем цвета\n    const commonColors = [\n        \"белый\",\n        \"черный\",\n        \"красный\",\n        \"синий\",\n        \"зеленый\",\n        \"желтый\",\n        \"оранжевый\",\n        \"фиолетовый\",\n        \"розовый\",\n        \"коричневый\",\n        \"серый\",\n        \"бежевый\",\n        \"голубой\"\n    ];\n    // Ищем материалы\n    const commonMaterials = [\n        \"хлопок\",\n        \"лен\",\n        \"шерсть\",\n        \"кожа\",\n        \"замша\",\n        \"шелк\",\n        \"деним\",\n        \"полиэстер\",\n        \"нейлон\",\n        \"трикотаж\",\n        \"вискоза\",\n        \"акрил\",\n        \"вельвет\",\n        \"твид\",\n        \"кашемир\"\n    ];\n    console.log(\"Анализируем текст:\", analysisText);\n    // Для каждого предмета одежды проверяем, упоминается ли он в тексте\n    for (const item of commonClothingItems){\n        const regex = new RegExp(`\\\\b${item}\\\\b`, \"i\");\n        if (regex.test(analysisText.toLowerCase())) {\n            console.log(`Найден предмет: ${item}`);\n            // Если предмет найден, пытаемся найти его цвет\n            let color = \"неизвестный\";\n            for (const c of commonColors){\n                const colorRegex = new RegExp(`\\\\b${c}\\\\w*\\\\s+${item}\\\\b|\\\\b${item}\\\\s+${c}\\\\w*\\\\b`, \"i\");\n                if (colorRegex.test(analysisText.toLowerCase())) {\n                    color = c;\n                    console.log(`  Найден цвет: ${color}`);\n                    break;\n                }\n            }\n            // Пытаемся найти материал\n            let material;\n            for (const m of commonMaterials){\n                const materialRegex = new RegExp(`\\\\b${m}\\\\w*\\\\s+${item}\\\\b|\\\\b${item}\\\\s+из\\\\s+${m}\\\\w*\\\\b|\\\\b${m}\\\\w*\\\\s+${item}\\\\b`, \"i\");\n                if (materialRegex.test(analysisText.toLowerCase())) {\n                    material = m;\n                    console.log(`  Найден материал: ${material}`);\n                    break;\n                }\n            }\n            clothingItems.push({\n                type: item.charAt(0).toUpperCase() + item.slice(1),\n                color,\n                description: \"\",\n                ...material && {\n                    material\n                },\n                gender: determineGender(analysisText, item)\n            });\n        }\n    }\n    if (clothingItems.length > 0) {\n        console.log(\"Найдены предметы одежды:\", clothingItems);\n        return clothingItems;\n    } else {\n        console.log(\"Не удалось распознать предметы одежды в тексте, возвращаем моковые данные\");\n        return getMockAnalysisResponse().items;\n    }\n}\n// Заглушка для тестирования, используется когда нет доступа к Python API\nfunction getMockAnalysisResponse(imageUrl) {\n    return {\n        items: [\n            {\n                type: \"Футболка\",\n                color: \"белая\",\n                description: \"хлопковая с круглым вырезом\",\n                material: \"хлопок\",\n                gender: \"женский\"\n            },\n            {\n                type: \"Джинсы\",\n                color: \"синие\",\n                description: \"классические прямого кроя\",\n                material: \"деним\",\n                gender: \"женский\"\n            }\n        ],\n        fullDescription: \"На изображении представлен повседневный комплект, состоящий из белой хлопковой футболки с круглым вырезом и классических прямых синих джинсов.\"\n    };\n}\n// Функция для определения пола из текста анализа\nfunction determineGender(text, itemName) {\n    // Ищем явное указание пола для всего образа\n    const generalGenderMatch = text.match(/ПОЛ:\\s*(мужской|женский|унисекс)/i);\n    let generalGender = generalGenderMatch ? generalGenderMatch[1].toLowerCase() : undefined;\n    // Ищем указание пола для конкретного предмета\n    const itemGenderRegex = new RegExp(`(${itemName}).*?пол:\\\\s*(мужской|женский|унисекс)`, \"i\");\n    const itemGenderMatch = text.match(itemGenderRegex);\n    // Возвращаем пол для конкретного предмета, если найден, иначе общий пол\n    return itemGenderMatch ? itemGenderMatch[2].toLowerCase() : generalGender;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9hbmFseXplLWltYWdlL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUF3RDtBQUVoQjtBQUVJO0FBQ3BCO0FBZXhCLG9CQUFvQjtBQUNwQixNQUFNSyxpQkFBaUJDLFFBQVFDLEdBQUcsQ0FBQ0YsY0FBYyxJQUFJO0FBRXJELGtDQUFrQztBQUNsQyxlQUFlRztJQUNiLElBQUk7UUFDRixNQUFNQyxXQUFXLE1BQU1DLE1BQU0sQ0FBQyxFQUFFTCxlQUFlLE9BQU8sQ0FBQyxFQUFFO1lBQ3ZETSxRQUFRO1lBQ1JDLFNBQVM7Z0JBQUUsZ0JBQWdCO1lBQW1CO1lBQzlDQyxRQUFRQyxZQUFZQyxPQUFPLENBQUMsTUFBTSxvQkFBb0I7UUFDeEQ7UUFDQSxPQUFPTixTQUFTTyxFQUFFO0lBQ3BCLEVBQUUsT0FBT0MsT0FBTztRQUNkQyxRQUFRRCxLQUFLLENBQUMsd0NBQXdDQTtRQUN0RCxPQUFPO0lBQ1Q7QUFDRjtBQUVPLGVBQWVFLEtBQUtDLE9BQW9CO0lBQzdDLElBQUk7UUFDRixtQ0FBbUM7UUFDbkMsTUFBTUMsaUJBQWlCLE1BQU1iO1FBQzdCVSxRQUFRSSxHQUFHLENBQUMsQ0FBQyxxQkFBcUIsRUFBRUQsZUFBZSxDQUFDO1FBRXBELCtCQUErQjtRQUMvQixNQUFNRSxXQUFXLE1BQU1ILFFBQVFHLFFBQVE7UUFDdkMsTUFBTUMsUUFBUUQsU0FBU0UsR0FBRyxDQUFDO1FBQzNCLE1BQU1DLFNBQVNILFNBQVNFLEdBQUcsQ0FBQyxhQUF1QjtRQUVuRCxJQUFJLENBQUNELE9BQU87WUFDVixPQUFPeEIscURBQVlBLENBQUMyQixJQUFJLENBQ3RCO2dCQUFFVixPQUFPO1lBQXlCLEdBQ2xDO2dCQUFFVyxRQUFRO1lBQUk7UUFFbEI7UUFFQVYsUUFBUUksR0FBRyxDQUFDLENBQUMsaUJBQWlCLEVBQUVJLE9BQU8sQ0FBQztRQUV4QyxvREFBb0Q7UUFDcEQsTUFBTUcsUUFBUSxNQUFNTCxNQUFNTSxXQUFXO1FBQ3JDLE1BQU1DLFNBQVNDLE9BQU9DLElBQUksQ0FBQ0o7UUFDM0IsTUFBTUssVUFBVTlCLGdEQUFTLENBQUNFLFFBQVE4QixHQUFHLElBQUksVUFBVTtRQUVuRCxrREFBa0Q7UUFDbEQsSUFBSTtZQUNGLE1BQU1qQyxtREFBTUEsQ0FBQytCO1FBQ2YsRUFBRSxPQUFNO1lBQ04sTUFBTWhDLGtEQUFLQSxDQUFDZ0MsU0FBUztnQkFBRUcsV0FBVztZQUFLO1lBQ3ZDbkIsUUFBUUksR0FBRyxDQUFDLENBQUMsb0JBQW9CLEVBQUVZLFFBQVEsQ0FBQztRQUM5QztRQUVBLE1BQU1JLFdBQVcsQ0FBQyxFQUFFQyxLQUFLQyxHQUFHLEdBQUcsQ0FBQyxFQUFFaEIsTUFBTWlCLElBQUksQ0FBQyxDQUFDO1FBQzlDLE1BQU1DLFdBQVd0QyxnREFBUyxDQUFDOEIsU0FBU0k7UUFDcEMsTUFBTUssVUFBVSxDQUFDLE1BQU0sRUFBRUwsU0FBUyxDQUFDO1FBRW5DLHdCQUF3QjtRQUN4QixNQUFNckMsc0RBQVNBLENBQUN5QyxVQUFVWDtRQUMxQmIsUUFBUUksR0FBRyxDQUFDLENBQUMsdUJBQXVCLEVBQUVvQixTQUFTLENBQUM7UUFFaEQsbURBQW1EO1FBQ25ELElBQUlyQixnQkFBZ0I7WUFDbEIsSUFBSTtnQkFDRkgsUUFBUUksR0FBRyxDQUFDO2dCQUVaLG1EQUFtRDtnQkFDbkQsTUFBTXNCLG9CQUFvQixJQUFJQztnQkFFOUIsOENBQThDO2dCQUM5Q0Qsa0JBQWtCRSxNQUFNLENBQUMsUUFBUSxJQUFJQyxLQUFLO29CQUFDaEI7aUJBQU8sRUFBRTtvQkFBRWlCLE1BQU14QixNQUFNd0IsSUFBSTtnQkFBQyxJQUFJVjtnQkFDM0UsNEJBQTRCO2dCQUM1Qk0sa0JBQWtCRSxNQUFNLENBQUMsVUFBVXBCO2dCQUVuQyxrQ0FBa0M7Z0JBQ2xDLE1BQU11QixvQkFBb0IsTUFBTXZDLE1BQU0sQ0FBQyxFQUFFTCxlQUFlLGNBQWMsQ0FBQyxFQUFFO29CQUN2RU0sUUFBUTtvQkFDUnVDLE1BQU1OO2dCQUNSO2dCQUVBLElBQUksQ0FBQ0ssa0JBQWtCakMsRUFBRSxFQUFFO29CQUN6QixNQUFNbUMsWUFBWSxNQUFNRixrQkFBa0JHLElBQUk7b0JBQzlDbEMsUUFBUUQsS0FBSyxDQUFDLENBQUMsbUJBQW1CLEVBQUVnQyxrQkFBa0JyQixNQUFNLENBQUMsQ0FBQyxFQUFFdUI7b0JBQ2hFLE1BQU0sSUFBSUUsTUFBTSxDQUFDLG1CQUFtQixFQUFFSixrQkFBa0JyQixNQUFNLENBQUMsQ0FBQztnQkFDbEU7Z0JBRUEsTUFBTTBCLGVBQWUsTUFBTUwsa0JBQWtCdEIsSUFBSTtnQkFDakRULFFBQVFJLEdBQUcsQ0FBQyxnQ0FBZ0NnQztnQkFFNUMsd0VBQXdFO2dCQUN4RSxJQUFJQyxVQUFVLEVBQUU7Z0JBRWhCLElBQUlELGFBQWFDLE9BQU8sSUFBSUMsTUFBTUMsT0FBTyxDQUFDSCxhQUFhQyxPQUFPLEdBQUc7b0JBQy9EQSxVQUFVRCxhQUFhQyxPQUFPO2dCQUNoQyxPQUFPLElBQUlELGFBQWFJLEtBQUssSUFBSUYsTUFBTUMsT0FBTyxDQUFDSCxhQUFhSSxLQUFLLEdBQUc7b0JBQ2xFLGlFQUFpRTtvQkFDakVILFVBQVVELGFBQWFJLEtBQUssQ0FBQ0MsR0FBRyxDQUFDLENBQUNDLE1BQVdDLFFBQW1COzRCQUM5REMsSUFBSSxDQUFDLEVBQUVELFFBQVEsRUFBRSxDQUFDOzRCQUNsQnBCLE1BQU1tQixLQUFLbkIsSUFBSSxJQUFJbUIsS0FBS1osSUFBSSxJQUFJOzRCQUNoQ2UsYUFBYUgsS0FBS0csV0FBVyxJQUFJLENBQUMsRUFBRUgsS0FBS0ksS0FBSyxJQUFJLEdBQUcsQ0FBQyxFQUFFSixLQUFLSyxRQUFRLElBQUksR0FBRyxDQUFDLENBQUNDLElBQUk7NEJBQ2xGQyxPQUFPQyxLQUFLQyxLQUFLLENBQUNELEtBQUtFLE1BQU0sS0FBSyxRQUFROzRCQUMxQ0MsVUFBVVgsS0FBS1csUUFBUSxJQUFJLENBQUMsZ0JBQWdCLEVBQUUsUUFBUyxJQUFLLEVBQUUsZ0JBQWdCLEVBQUVWLFFBQVEsRUFBRSxPQUFPLEVBQUVBLFFBQVEsRUFBRSxFQUFFLEVBQUVBLFFBQVEsRUFBRSxJQUFJLEVBQUVBLFFBQVEsRUFBRSxFQUFFQSxRQUFRLEVBQUUsRUFBRUEsUUFBUSxFQUFFLHVCQUF1QixDQUFDOzRCQUMzTFcsVUFBVVosS0FBS1ksUUFBUSxJQUFJOzRCQUMzQjlDLFFBQVFrQyxLQUFLbEMsTUFBTSxJQUFJO3dCQUN6QjtnQkFDRixPQUFPLElBQUk0QixhQUFhbUIsUUFBUSxJQUFJakIsTUFBTUMsT0FBTyxDQUFDSCxhQUFhbUIsUUFBUSxHQUFHO29CQUN4RSx1Q0FBdUM7b0JBQ3ZDLElBQUlDLGNBQXFCLEVBQUU7b0JBRTNCLHNDQUFzQztvQkFDdEMsS0FBSyxNQUFNQyxXQUFXckIsYUFBYW1CLFFBQVEsQ0FBRTt3QkFDM0MsSUFBSUUsUUFBUUMsV0FBVyxJQUFJcEIsTUFBTUMsT0FBTyxDQUFDa0IsUUFBUUMsV0FBVyxHQUFHOzRCQUM3RCxtREFBbUQ7NEJBQ25ELE1BQU1DLFdBQVdGLFFBQVFDLFdBQVcsQ0FBQ2pCLEdBQUcsQ0FBQyxDQUFDbUIsU0FBY0MsTUFBaUI7b0NBQ3ZFakIsSUFBSWdCLFFBQVFoQixFQUFFLElBQUksQ0FBQyxFQUFFYSxRQUFRM0IsSUFBSSxDQUFDLENBQUMsRUFBRStCLElBQUksQ0FBQztvQ0FDMUN0QyxNQUFNcUMsUUFBUXJDLElBQUksSUFBSSxDQUFDLEVBQUVrQyxRQUFRWCxLQUFLLENBQUMsQ0FBQyxFQUFFVyxRQUFRM0IsSUFBSSxDQUFDLENBQUM7b0NBQ3hEZSxhQUFhZSxRQUFRZixXQUFXLElBQUlZLFFBQVFaLFdBQVcsSUFBSSxDQUFDLEVBQUVZLFFBQVFYLEtBQUssQ0FBQyxDQUFDLEVBQUVXLFFBQVEzQixJQUFJLENBQUMsQ0FBQztvQ0FDN0ZtQixPQUFPVyxRQUFRWCxLQUFLLElBQUk7b0NBQ3hCYSxVQUFVRixRQUFRRyxNQUFNLEdBQUdILFFBQVFHLE1BQU0sR0FBRyxNQUFNQztvQ0FDbERDLFlBQVlMLFFBQVFLLFVBQVUsSUFBSUwsUUFBUU0sVUFBVSxHQUFHTixRQUFRTSxVQUFVLEdBQUcsTUFBTUY7b0NBQ2xGWCxVQUFVTyxRQUFRUCxRQUFRLElBQUlPLFFBQVFPLEdBQUcsSUFBSVAsUUFBUVEsSUFBSSxJQUFJUixRQUFRUSxJQUFJLENBQUMsRUFBRTtvQ0FDNUVkLFVBQVVHLFFBQVEzQixJQUFJLElBQUk7b0NBQzFCdEIsUUFBUWlELFFBQVFqRCxNQUFNLElBQUlBLFVBQVU7b0NBQ3BDNkQsS0FBS1QsUUFBUVMsR0FBRyxJQUFJVCxRQUFRVSxJQUFJO29DQUNoQ0MsT0FBT1gsUUFBUVcsS0FBSztnQ0FDdEI7NEJBRUFmLGNBQWM7bUNBQUlBO21DQUFnQkc7NkJBQVM7d0JBQzdDLE9BQU87NEJBQ0wseUVBQXlFOzRCQUN6RUgsWUFBWWdCLElBQUksQ0FBQztnQ0FDZjVCLElBQUksQ0FBQyxFQUFFYSxRQUFRM0IsSUFBSSxDQUFDLEtBQUssQ0FBQztnQ0FDMUJQLE1BQU0sQ0FBQyxFQUFFa0MsUUFBUVgsS0FBSyxDQUFDLENBQUMsRUFBRVcsUUFBUTNCLElBQUksQ0FBQyxDQUFDO2dDQUN4Q2UsYUFBYVksUUFBUVosV0FBVyxJQUFJLENBQUMsRUFBRVksUUFBUVgsS0FBSyxDQUFDLENBQUMsRUFBRVcsUUFBUTNCLElBQUksQ0FBQyxDQUFDO2dDQUN0RW1CLE9BQU9DLEtBQUtDLEtBQUssQ0FBQ0QsS0FBS0UsTUFBTSxLQUFLLFFBQVE7Z0NBQzFDQyxVQUFVLENBQUMsZ0JBQWdCLEVBQUUsWUFBYW9CLE1BQU0sR0FBRyxJQUFLLEVBQUUsZ0JBQWdCLEVBQUVqQixZQUFZaUIsTUFBTSxHQUFHLEVBQUUsT0FBTyxFQUFFakIsWUFBWWlCLE1BQU0sR0FBRyxFQUFFLEVBQUUsRUFBRWpCLFlBQVlpQixNQUFNLEdBQUcsRUFBRSxJQUFJLEVBQUVqQixZQUFZaUIsTUFBTSxHQUFHLEVBQUUsRUFBRWpCLFlBQVlpQixNQUFNLEdBQUcsRUFBRSxFQUFFakIsWUFBWWlCLE1BQU0sR0FBRyxFQUFFLHVCQUF1QixDQUFDO2dDQUNyUW5CLFVBQVVHLFFBQVEzQixJQUFJLElBQUk7Z0NBQzFCdEIsUUFBUWlELFFBQVFqRCxNQUFNLElBQUlBLFVBQVU7NEJBQ3RDO3dCQUNGO29CQUNGO29CQUVBNkIsVUFBVW1CO2dCQUNaLE9BQU87b0JBQ0wsb0RBQW9EO29CQUNwRHhELFFBQVFJLEdBQUcsQ0FBQztvQkFDWmlDLFVBQVVxQyxlQUFlbEUsUUFBUTZCLE9BQU87Z0JBQzFDO2dCQUVBLE9BQU92RCxxREFBWUEsQ0FBQzJCLElBQUksQ0FBQztvQkFDdkI0QjtvQkFDQWdCLFVBQVU1QjtvQkFDVmtELFlBQVk7b0JBQ1pDLFVBQVV4QyxhQUFhd0MsUUFBUSxJQUFJO2dCQUNyQztZQUVGLEVBQUUsT0FBTzdFLE9BQU87Z0JBQ2RDLFFBQVFELEtBQUssQ0FBQyxzQ0FBc0NBO2dCQUVwRCw0Q0FBNEM7Z0JBQzVDLE1BQU04RSxXQUFXSCxlQUFlbEU7Z0JBQ2hDLE9BQU8xQixxREFBWUEsQ0FBQzJCLElBQUksQ0FBQztvQkFDdkI0QixTQUFTd0MsU0FBU3hDLE9BQU87b0JBQ3pCZ0IsVUFBVTVCO29CQUNWMUIsT0FBTyxDQUFDLG1DQUFtQyxFQUFFQSxpQkFBaUJvQyxRQUFRcEMsTUFBTStFLE9BQU8sR0FBRyxxQkFBcUIsQ0FBQztvQkFDNUdILFlBQVk7b0JBQ1pDLFVBQVU7Z0JBQ1o7WUFDRjtRQUNGLE9BQU87WUFDTCx3REFBd0Q7WUFDeEQ1RSxRQUFRSSxHQUFHLENBQUM7WUFDWixNQUFNeUUsV0FBV0gsZUFBZWxFO1lBQ2hDLE9BQU8xQixxREFBWUEsQ0FBQzJCLElBQUksQ0FBQztnQkFDdkI0QixTQUFTd0MsU0FBU3hDLE9BQU87Z0JBQ3pCZ0IsVUFBVTVCO2dCQUNWa0QsWUFBWTtnQkFDWkMsVUFBVTtZQUNaO1FBQ0Y7SUFDRixFQUFFLE9BQU83RSxPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQyxxQ0FBcUNBO1FBQ25ELE9BQU9qQixxREFBWUEsQ0FBQzJCLElBQUksQ0FDdEI7WUFBRVYsT0FBTztRQUE2QyxHQUN0RDtZQUFFVyxRQUFRO1FBQUk7SUFFbEI7QUFDRjtBQUVBLHVDQUF1QztBQUN2QyxTQUFTZ0UsZUFBZWxFLFNBQWlCLFNBQVM7SUFDaEQsTUFBTXVFLGFBQWF2RSxPQUFPd0UsV0FBVztJQUVyQyxPQUFPO1FBQ0wzQyxTQUFTO1lBQ1A7Z0JBQ0VPLElBQUk7Z0JBQ0pyQixNQUFNO2dCQUNOc0IsYUFBYTtnQkFDYkksT0FBTztnQkFDUEksVUFBVTtnQkFDVkMsVUFBVTtnQkFDVjlDLFFBQVF1RTtZQUNWO1lBQ0E7Z0JBQ0VuQyxJQUFJO2dCQUNKckIsTUFBTTtnQkFDTnNCLGFBQWE7Z0JBQ2JJLE9BQU87Z0JBQ1BJLFVBQVU7Z0JBQ1ZDLFVBQVU7Z0JBQ1Y5QyxRQUFRdUU7WUFDVjtZQUNBO2dCQUNFbkMsSUFBSTtnQkFDSnJCLE1BQU07Z0JBQ05zQixhQUFhO2dCQUNiSSxPQUFPO2dCQUNQSSxVQUFVO2dCQUNWQyxVQUFVO2dCQUNWOUMsUUFBUXVFLGVBQWUsWUFBWSxZQUFZO1lBQ2pEO1lBQ0E7Z0JBQ0VuQyxJQUFJO2dCQUNKckIsTUFBTTtnQkFDTnNCLGFBQWE7Z0JBQ2JJLE9BQU87Z0JBQ1BJLFVBQVU7Z0JBQ1ZDLFVBQVU7Z0JBQ1Y5QyxRQUFRO1lBQ1Y7WUFDQTtnQkFDRW9DLElBQUk7Z0JBQ0pyQixNQUFNO2dCQUNOc0IsYUFBYTtnQkFDYkksT0FBTztnQkFDUEksVUFBVTtnQkFDVkMsVUFBVTtnQkFDVjlDLFFBQVE7WUFDVjtZQUNBO2dCQUNFb0MsSUFBSTtnQkFDSnJCLE1BQU07Z0JBQ05zQixhQUFhO2dCQUNiSSxPQUFPO2dCQUNQSSxVQUFVO2dCQUNWQyxVQUFVO2dCQUNWOUMsUUFBUXVFLGVBQWUsWUFBWSxZQUFZO1lBQ2pEO1NBQ0Q7SUFDSDtBQUNGO0FBRUEsNkZBQTZGO0FBQzdGLFNBQVNFLCtCQUErQjdDLFlBQWlCO0lBQ3ZELHlEQUF5RDtJQUN6RCxJQUFJQSxhQUFhbUIsUUFBUSxJQUFJakIsTUFBTUMsT0FBTyxDQUFDSCxhQUFhbUIsUUFBUSxHQUFHO1FBQ2pFLE9BQU9uQixhQUFhbUIsUUFBUSxDQUFDZCxHQUFHLENBQUMsQ0FBQ0MsT0FBZTtnQkFDL0NaLE1BQU1ZLEtBQUtaLElBQUksSUFBSVksS0FBS25CLElBQUksSUFBSTtnQkFDaEN1QixPQUFPSixLQUFLSSxLQUFLLElBQUk7Z0JBQ3JCRCxhQUFhSCxLQUFLRyxXQUFXLElBQUk7Z0JBQ2pDRSxVQUFVTCxLQUFLSyxRQUFRO2dCQUN2Qm1DLFNBQVN4QyxLQUFLd0MsT0FBTztnQkFDckIxRSxRQUFRa0MsS0FBS2xDLE1BQU07WUFDckI7SUFDRjtJQUVBLDJDQUEyQztJQUMzQyxJQUFJNEIsYUFBYXdDLFFBQVEsRUFBRTtRQUN6QjVFLFFBQVFJLEdBQUcsQ0FBQywwQkFBMEJnQyxhQUFhd0MsUUFBUTtJQUM3RDtJQUVBLGlGQUFpRjtJQUNqRixNQUFNTyxxQkFBcUI7UUFBQztRQUFRO1FBQVU7UUFBVztRQUFTO0tBQWlCO0lBQ25GLEtBQUssTUFBTUMsU0FBU0QsbUJBQW9CO1FBQ3RDLElBQUkvQyxZQUFZLENBQUNnRCxNQUFNLElBQUs5QyxDQUFBQSxNQUFNQyxPQUFPLENBQUNILFlBQVksQ0FBQ2dELE1BQU0sS0FBSyxPQUFPaEQsWUFBWSxDQUFDZ0QsTUFBTSxLQUFLLFFBQU8sR0FBSTtZQUMxR3BGLFFBQVFJLEdBQUcsQ0FBQyxDQUFDLHNCQUFzQixFQUFFZ0YsTUFBTSxDQUFDLENBQUMsRUFBRWhELFlBQVksQ0FBQ2dELE1BQU07WUFDbEUsSUFBSTlDLE1BQU1DLE9BQU8sQ0FBQ0gsWUFBWSxDQUFDZ0QsTUFBTSxHQUFHO2dCQUN0QyxPQUFPaEQsWUFBWSxDQUFDZ0QsTUFBTSxDQUFDM0MsR0FBRyxDQUFDLENBQUNDLE9BQWU7d0JBQzdDWixNQUFNWSxLQUFLWixJQUFJLElBQUlZLEtBQUtuQixJQUFJLElBQUk7d0JBQ2hDdUIsT0FBT0osS0FBS0ksS0FBSyxJQUFJO3dCQUNyQkQsYUFBYUgsS0FBS0csV0FBVyxJQUFJO3dCQUNqQ0UsVUFBVUwsS0FBS0ssUUFBUTt3QkFDdkJtQyxTQUFTeEMsS0FBS3dDLE9BQU87d0JBQ3JCMUUsUUFBUWtDLEtBQUtsQyxNQUFNO29CQUNyQjtZQUNGO1FBQ0Y7SUFDRjtJQUVBLDZGQUE2RjtJQUM3RixNQUFNNkUsZUFBZWpELGFBQWF3QyxRQUFRLElBQUl4QyxhQUFhUyxXQUFXLElBQUk7SUFFMUUsSUFBSSxDQUFDd0MsY0FBYztRQUNqQnJGLFFBQVFJLEdBQUcsQ0FBQztRQUNaLE9BQU9rRiwwQkFBMEI5QyxLQUFLO0lBQ3hDO0lBRUEsNkNBQTZDO0lBQzdDLE1BQU0rQyxnQkFBZ0IsRUFBRTtJQUV4Qiw0Q0FBNEM7SUFDNUMsTUFBTUMsc0JBQXNCO1FBQzFCO1FBQVk7UUFBVztRQUFVO1FBQVU7UUFBUTtRQUFTO1FBQzVEO1FBQVM7UUFBVTtRQUFVO1FBQVU7UUFBWTtRQUFRO1FBQzNEO1FBQWE7UUFBUztRQUFXO1FBQVU7UUFBUTtRQUFTO1FBQzVEO1FBQVM7UUFBUztRQUFRO1FBQVk7UUFBUztRQUFZO1FBQzNEO1FBQVU7UUFBVTtRQUFTO0tBQzlCO0lBRUQsYUFBYTtJQUNiLE1BQU1DLGVBQWU7UUFDbkI7UUFBUztRQUFVO1FBQVc7UUFBUztRQUFXO1FBQVU7UUFDNUQ7UUFBYztRQUFXO1FBQWM7UUFBUztRQUFXO0tBQzVEO0lBRUQsaUJBQWlCO0lBQ2pCLE1BQU1DLGtCQUFrQjtRQUN0QjtRQUFVO1FBQU87UUFBVTtRQUFRO1FBQVM7UUFBUTtRQUFTO1FBQzdEO1FBQVU7UUFBWTtRQUFXO1FBQVM7UUFBVztRQUFRO0tBQzlEO0lBRUQxRixRQUFRSSxHQUFHLENBQUMsc0JBQXNCaUY7SUFFbEMsb0VBQW9FO0lBQ3BFLEtBQUssTUFBTTNDLFFBQVE4QyxvQkFBcUI7UUFDdEMsTUFBTUcsUUFBUSxJQUFJQyxPQUFPLENBQUMsR0FBRyxFQUFFbEQsS0FBSyxHQUFHLENBQUMsRUFBRTtRQUMxQyxJQUFJaUQsTUFBTUUsSUFBSSxDQUFDUixhQUFhTCxXQUFXLEtBQUs7WUFDMUNoRixRQUFRSSxHQUFHLENBQUMsQ0FBQyxnQkFBZ0IsRUFBRXNDLEtBQUssQ0FBQztZQUVyQywrQ0FBK0M7WUFDL0MsSUFBSUksUUFBUTtZQUNaLEtBQUssTUFBTWdELEtBQUtMLGFBQWM7Z0JBQzVCLE1BQU1NLGFBQWEsSUFBSUgsT0FBTyxDQUFDLEdBQUcsRUFBRUUsRUFBRSxRQUFRLEVBQUVwRCxLQUFLLE9BQU8sRUFBRUEsS0FBSyxJQUFJLEVBQUVvRCxFQUFFLE9BQU8sQ0FBQyxFQUFFO2dCQUNyRixJQUFJQyxXQUFXRixJQUFJLENBQUNSLGFBQWFMLFdBQVcsS0FBSztvQkFDL0NsQyxRQUFRZ0Q7b0JBQ1I5RixRQUFRSSxHQUFHLENBQUMsQ0FBQyxlQUFlLEVBQUUwQyxNQUFNLENBQUM7b0JBQ3JDO2dCQUNGO1lBQ0Y7WUFFQSwwQkFBMEI7WUFDMUIsSUFBSUM7WUFDSixLQUFLLE1BQU1pRCxLQUFLTixnQkFBaUI7Z0JBQy9CLE1BQU1PLGdCQUFnQixJQUFJTCxPQUFPLENBQUMsR0FBRyxFQUFFSSxFQUFFLFFBQVEsRUFBRXRELEtBQUssT0FBTyxFQUFFQSxLQUFLLFVBQVUsRUFBRXNELEVBQUUsV0FBVyxFQUFFQSxFQUFFLFFBQVEsRUFBRXRELEtBQUssR0FBRyxDQUFDLEVBQUU7Z0JBQ3hILElBQUl1RCxjQUFjSixJQUFJLENBQUNSLGFBQWFMLFdBQVcsS0FBSztvQkFDbERqQyxXQUFXaUQ7b0JBQ1hoRyxRQUFRSSxHQUFHLENBQUMsQ0FBQyxtQkFBbUIsRUFBRTJDLFNBQVMsQ0FBQztvQkFDNUM7Z0JBQ0Y7WUFDRjtZQUVBd0MsY0FBY2YsSUFBSSxDQUFDO2dCQUNqQjFDLE1BQU1ZLEtBQUt3RCxNQUFNLENBQUMsR0FBR0MsV0FBVyxLQUFLekQsS0FBSzBELEtBQUssQ0FBQztnQkFDaER0RDtnQkFDQUQsYUFBYTtnQkFDYixHQUFJRSxZQUFZO29CQUFFQTtnQkFBUyxDQUFDO2dCQUM1QnZDLFFBQVE2RixnQkFBZ0JoQixjQUFjM0M7WUFDeEM7UUFDRjtJQUNGO0lBRUEsSUFBSTZDLGNBQWNkLE1BQU0sR0FBRyxHQUFHO1FBQzVCekUsUUFBUUksR0FBRyxDQUFDLDRCQUE0Qm1GO1FBQ3hDLE9BQU9BO0lBQ1QsT0FBTztRQUNMdkYsUUFBUUksR0FBRyxDQUFDO1FBQ1osT0FBT2tGLDBCQUEwQjlDLEtBQUs7SUFDeEM7QUFDRjtBQUVBLHlFQUF5RTtBQUN6RSxTQUFTOEMsd0JBQXdCakMsUUFBaUI7SUFDaEQsT0FBTztRQUNMYixPQUFPO1lBQ0w7Z0JBQ0VWLE1BQU07Z0JBQ05nQixPQUFPO2dCQUNQRCxhQUFhO2dCQUNiRSxVQUFVO2dCQUNWdkMsUUFBUTtZQUNWO1lBQ0E7Z0JBQ0VzQixNQUFNO2dCQUNOZ0IsT0FBTztnQkFDUEQsYUFBYTtnQkFDYkUsVUFBVTtnQkFDVnZDLFFBQVE7WUFDVjtTQUNEO1FBQ0Q4RixpQkFBaUI7SUFDbkI7QUFDRjtBQUVBLGlEQUFpRDtBQUNqRCxTQUFTRCxnQkFBZ0JuRSxJQUFZLEVBQUVxRSxRQUFnQjtJQUNyRCw0Q0FBNEM7SUFDNUMsTUFBTUMscUJBQXFCdEUsS0FBS3VFLEtBQUssQ0FBQztJQUN0QyxJQUFJQyxnQkFBZ0JGLHFCQUFxQkEsa0JBQWtCLENBQUMsRUFBRSxDQUFDeEIsV0FBVyxLQUFLaEI7SUFFL0UsOENBQThDO0lBQzlDLE1BQU0yQyxrQkFBa0IsSUFBSWYsT0FBTyxDQUFDLENBQUMsRUFBRVcsU0FBUyxxQ0FBcUMsQ0FBQyxFQUFFO0lBQ3hGLE1BQU1LLGtCQUFrQjFFLEtBQUt1RSxLQUFLLENBQUNFO0lBRW5DLHdFQUF3RTtJQUN4RSxPQUFPQyxrQkFBa0JBLGVBQWUsQ0FBQyxFQUFFLENBQUM1QixXQUFXLEtBQUswQjtBQUM5RCIsInNvdXJjZXMiOlsid2VicGFjazovL2Jhbmstc3RhdGVtZW50LWFuYWx5emVyLy4vc3JjL2FwcC9hcGkvYW5hbHl6ZS1pbWFnZS9yb3V0ZS50cz9jMmE1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XHJcbmltcG9ydCB7IGpvaW4gfSBmcm9tICdwYXRoJztcclxuaW1wb3J0IHsgd3JpdGVGaWxlIH0gZnJvbSAnZnMvcHJvbWlzZXMnO1xyXG5pbXBvcnQgeyB2NCBhcyB1dWlkdjQgfSBmcm9tICd1dWlkJztcclxuaW1wb3J0IHsgbWtkaXIsIGFjY2VzcyB9IGZyb20gJ2ZzL3Byb21pc2VzJztcclxuaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XHJcblxyXG4vLyDQotC40L8g0L7RgtCy0LXRgtCwINC+0YIgQUkg0L3QsCDQsNC90LDQu9C40Lcg0LjQt9C+0LHRgNCw0LbQtdC90LjRj1xyXG5pbnRlcmZhY2UgQ2xvdGhpbmdSZWNvZ25pdGlvbkRhdGEge1xyXG4gIGl0ZW1zOiBBcnJheTx7XHJcbiAgICB0eXBlOiBzdHJpbmc7XHJcbiAgICBkZXNjcmlwdGlvbjogc3RyaW5nO1xyXG4gICAgY29sb3I6IHN0cmluZztcclxuICAgIHBhdHRlcm4/OiBzdHJpbmc7XHJcbiAgICBtYXRlcmlhbD86IHN0cmluZztcclxuICAgIGdlbmRlcj86IHN0cmluZztcclxuICB9PjtcclxuICBmdWxsRGVzY3JpcHRpb246IHN0cmluZztcclxufVxyXG5cclxuLy8g0J/Rg9GC0Ywg0LogUHl0aG9uIEFQSVxyXG5jb25zdCBQWVRIT05fQVBJX1VSTCA9IHByb2Nlc3MuZW52LlBZVEhPTl9BUElfVVJMIHx8ICdodHRwOi8vbG9jYWxob3N0OjgwMDAnO1xyXG5cclxuLy8g0J/RgNC+0LLQtdGA0LrQsCDQtNC+0YHRgtGD0L/QvdC+0YHRgtC4IFB5dGhvbiBBUElcclxuYXN5bmMgZnVuY3Rpb24gY2hlY2tBcGlBdmFpbGFiaWxpdHkoKSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7UFlUSE9OX0FQSV9VUkx9L2hlYWx0aGAsIHsgXHJcbiAgICAgIG1ldGhvZDogJ0dFVCcsXHJcbiAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxyXG4gICAgICBzaWduYWw6IEFib3J0U2lnbmFsLnRpbWVvdXQoMzAwMCkgLy8g0KLQsNC50LzQsNGD0YIgMyDRgdC10LrRg9C90LTRi1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gcmVzcG9uc2Uub2s7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ9Ce0YjQuNCx0LrQsCDQv9GA0Lgg0L/RgNC+0LLQtdGA0LrQtSDQtNC+0YHRgtGD0L/QvdC+0YHRgtC4IEFQSTonLCBlcnJvcik7XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xyXG4gIHRyeSB7XHJcbiAgICAvLyDQn9GA0L7QstC10YDRj9C10Lwg0LTQvtGB0YLRg9C/0L3QvtGB0YLRjCBQeXRob24gQVBJXHJcbiAgICBjb25zdCBpc0FwaUF2YWlsYWJsZSA9IGF3YWl0IGNoZWNrQXBpQXZhaWxhYmlsaXR5KCk7XHJcbiAgICBjb25zb2xlLmxvZyhgUHl0aG9uIEFQSSDQtNC+0YHRgtGD0L/QtdC9OiAke2lzQXBpQXZhaWxhYmxlfWApO1xyXG4gICAgXHJcbiAgICAvLyDQn9C+0LvRg9GH0LDQtdC8IEZvcm1EYXRhINC40Lcg0LfQsNC/0YDQvtGB0LBcclxuICAgIGNvbnN0IGZvcm1EYXRhID0gYXdhaXQgcmVxdWVzdC5mb3JtRGF0YSgpO1xyXG4gICAgY29uc3QgaW1hZ2UgPSBmb3JtRGF0YS5nZXQoJ2ltYWdlJykgYXMgRmlsZSB8IG51bGw7XHJcbiAgICBjb25zdCBnZW5kZXIgPSBmb3JtRGF0YS5nZXQoJ2dlbmRlcicpIGFzIHN0cmluZyB8fCAn0YPQvdC40YHQtdC60YEnO1xyXG5cclxuICAgIGlmICghaW1hZ2UpIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgZXJyb3I6ICfQmNC30L7QsdGA0LDQttC10L3QuNC1INC90LUg0L3QsNC50LTQtdC90L4nIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc29sZS5sb2coYNCf0LDRgNCw0LzQtdGC0YAgZ2VuZGVyOiAke2dlbmRlcn1gKTtcclxuXHJcbiAgICAvLyDQodC+0LfQtNCw0LXQvCDQstGA0LXQvNC10L3QvdGL0Lkg0L/Rg9GC0Ywg0LTQu9GPINGB0L7RhdGA0LDQvdC10L3QuNGPINC40LfQvtCx0YDQsNC20LXQvdC40Y9cclxuICAgIGNvbnN0IGJ5dGVzID0gYXdhaXQgaW1hZ2UuYXJyYXlCdWZmZXIoKTtcclxuICAgIGNvbnN0IGJ1ZmZlciA9IEJ1ZmZlci5mcm9tKGJ5dGVzKTtcclxuICAgIGNvbnN0IHRlbXBEaXIgPSBwYXRoLmpvaW4ocHJvY2Vzcy5jd2QoKSwgJ3B1YmxpYycsICd0ZW1wJyk7XHJcbiAgICBcclxuICAgIC8vINCh0L7Qt9C00LDQtdC8INC00LjRgNC10LrRgtC+0YDQuNGOIHRlbXAsINC10YHQu9C4INC+0L3QsCDQvdC1INGB0YPRidC10YHRgtCy0YPQtdGCXHJcbiAgICB0cnkge1xyXG4gICAgICBhd2FpdCBhY2Nlc3ModGVtcERpcik7XHJcbiAgICB9IGNhdGNoIHtcclxuICAgICAgYXdhaXQgbWtkaXIodGVtcERpciwgeyByZWN1cnNpdmU6IHRydWUgfSk7XHJcbiAgICAgIGNvbnNvbGUubG9nKGDQodC+0LfQtNCw0L3QsCDQtNC40YDQtdC60YLQvtGA0LjRjzogJHt0ZW1wRGlyfWApO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBjb25zdCBmaWxlTmFtZSA9IGAke0RhdGUubm93KCl9XyR7aW1hZ2UubmFtZX1gO1xyXG4gICAgY29uc3QgZmlsZVBhdGggPSBwYXRoLmpvaW4odGVtcERpciwgZmlsZU5hbWUpO1xyXG4gICAgY29uc3QgZmlsZVVybCA9IGAvdGVtcC8ke2ZpbGVOYW1lfWA7XHJcblxyXG4gICAgLy8g0KHQvtGF0YDQsNC90Y/QtdC8INC40LfQvtCx0YDQsNC20LXQvdC40LVcclxuICAgIGF3YWl0IHdyaXRlRmlsZShmaWxlUGF0aCwgYnVmZmVyKTtcclxuICAgIGNvbnNvbGUubG9nKGDQmNC30L7QsdGA0LDQttC10L3QuNC1INGB0L7RhdGA0LDQvdC10L3QvjogJHtmaWxlUGF0aH1gKTtcclxuXHJcbiAgICAvLyDQldGB0LvQuCBQeXRob24gQVBJINC00L7RgdGC0YPQv9C10L0sINC+0YLQv9GA0LDQstC70Y/QtdC8INC30LDQv9GA0L7RgSDRgtGD0LTQsFxyXG4gICAgaWYgKGlzQXBpQXZhaWxhYmxlKSB7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ9Ce0YLQv9GA0LDQstC70Y/QtdC8INC30LDQv9GA0L7RgSDQvdCwIFB5dGhvbiBBUEknKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyDQodC+0LfQtNCw0LXQvCDQvdC+0LLRi9C5IEZvcm1EYXRhINC00LvRjyDQvtGC0L/RgNCw0LLQutC4INCyIFB5dGhvbiBBUElcclxuICAgICAgICBjb25zdCBweXRob25BcGlGb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vINCSIFB5dGhvbiBBUEkg0L7QttC40LTQsNC10YLRgdGPINGE0LDQudC7INGBINC40LzQtdC90LXQvCAnZmlsZSdcclxuICAgICAgICBweXRob25BcGlGb3JtRGF0YS5hcHBlbmQoJ2ZpbGUnLCBuZXcgQmxvYihbYnVmZmVyXSwgeyB0eXBlOiBpbWFnZS50eXBlIH0pLCBmaWxlTmFtZSk7XHJcbiAgICAgICAgLy8g0JTQvtCx0LDQstC70Y/QtdC8INC/0LDRgNCw0LzQtdGC0YAgZ2VuZGVyXHJcbiAgICAgICAgcHl0aG9uQXBpRm9ybURhdGEuYXBwZW5kKCdnZW5kZXInLCBnZW5kZXIpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vINCe0YLQv9GA0LDQstC70Y/QtdC8INC30LDQv9GA0L7RgSDQvdCwIFB5dGhvbiBBUElcclxuICAgICAgICBjb25zdCBweXRob25BcGlSZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke1BZVEhPTl9BUElfVVJMfS9hbmFseXplLWltYWdlYCwge1xyXG4gICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgICBib2R5OiBweXRob25BcGlGb3JtRGF0YSxcclxuICAgICAgICB9KTtcclxuICAgICAgICBcclxuICAgICAgICBpZiAoIXB5dGhvbkFwaVJlc3BvbnNlLm9rKSB7XHJcbiAgICAgICAgICBjb25zdCBlcnJvclRleHQgPSBhd2FpdCBweXRob25BcGlSZXNwb25zZS50ZXh0KCk7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGDQntGI0LjQsdC60LAgUHl0aG9uIEFQSTogJHtweXRob25BcGlSZXNwb25zZS5zdGF0dXN9YCwgZXJyb3JUZXh0KTtcclxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihg0J7RiNC40LHQutCwIFB5dGhvbiBBUEk6ICR7cHl0aG9uQXBpUmVzcG9uc2Uuc3RhdHVzfWApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBhbmFseXNpc0RhdGEgPSBhd2FpdCBweXRob25BcGlSZXNwb25zZS5qc29uKCk7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ9Cf0L7Qu9GD0YfQtdC9INC+0YLQstC10YIg0L7RgiBQeXRob24gQVBJOicsIGFuYWx5c2lzRGF0YSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8g0J7QsdGA0LDQsdCw0YLRi9Cy0LDQtdC8INC+0YLQstC10YIg0L7RgiBQeXRob24gQVBJINC4INC/0YDQtdC+0LHRgNCw0LfRg9C10Lwg0LIg0YTQvtGA0LzQsNGCINC00LvRjyDRhNGA0L7QvdGC0LXQvdC00LBcclxuICAgICAgICBsZXQgcmVzdWx0cyA9IFtdO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChhbmFseXNpc0RhdGEucmVzdWx0cyAmJiBBcnJheS5pc0FycmF5KGFuYWx5c2lzRGF0YS5yZXN1bHRzKSkge1xyXG4gICAgICAgICAgcmVzdWx0cyA9IGFuYWx5c2lzRGF0YS5yZXN1bHRzO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoYW5hbHlzaXNEYXRhLml0ZW1zICYmIEFycmF5LmlzQXJyYXkoYW5hbHlzaXNEYXRhLml0ZW1zKSkge1xyXG4gICAgICAgICAgLy8g0J/RgNC10L7QsdGA0LDQt9GD0LXQvCDRhNC+0YDQvNCw0YIg0LTQsNC90L3Ri9GFINC40LcgUHl0aG9uIEFQSSDQsiDRhNC+0YDQvNCw0YIg0LTQu9GPINGE0YDQvtC90YLQtdC90LTQsFxyXG4gICAgICAgICAgcmVzdWx0cyA9IGFuYWx5c2lzRGF0YS5pdGVtcy5tYXAoKGl0ZW06IGFueSwgaW5kZXg6IG51bWJlcikgPT4gKHtcclxuICAgICAgICAgICAgaWQ6IGAke2luZGV4ICsgMX1gLFxyXG4gICAgICAgICAgICBuYW1lOiBpdGVtLm5hbWUgfHwgaXRlbS50eXBlIHx8ICfQn9GA0LXQtNC80LXRgiDQvtC00LXQttC00YsnLFxyXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogaXRlbS5kZXNjcmlwdGlvbiB8fCBgJHtpdGVtLmNvbG9yIHx8ICcnfSAke2l0ZW0ubWF0ZXJpYWwgfHwgJyd9YC50cmltKCksXHJcbiAgICAgICAgICAgIHByaWNlOiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA1MDAwKSArIDUwMCwgLy8g0JTQtdC80L4t0YbQtdC90LBcclxuICAgICAgICAgICAgaW1hZ2VVcmw6IGl0ZW0uaW1hZ2VVcmwgfHwgYGh0dHBzOi8vYmFza2V0LTAkeyhpbmRleCAlIDkpICsgMX0ud2JiYXNrZXQucnUvdm9sJHtpbmRleCArIDF9MDAvcGFydCR7aW5kZXggKyAxfTAwJHtpbmRleCArIDF9LzEwMCR7aW5kZXggKyAxfSR7aW5kZXggKyAxfSR7aW5kZXggKyAxfS9pbWFnZXMvYzUxNng2ODgvMS53ZWJwYCxcclxuICAgICAgICAgICAgY2F0ZWdvcnk6IGl0ZW0uY2F0ZWdvcnkgfHwgJ9Ce0LTQtdC20LTQsCcsXHJcbiAgICAgICAgICAgIGdlbmRlcjogaXRlbS5nZW5kZXIgfHwgJ9GD0L3QuNGB0LXQutGBJ1xyXG4gICAgICAgICAgfSkpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoYW5hbHlzaXNEYXRhLmVsZW1lbnRzICYmIEFycmF5LmlzQXJyYXkoYW5hbHlzaXNEYXRhLmVsZW1lbnRzKSkge1xyXG4gICAgICAgICAgLy8g0J7QsdGA0LDQsdCw0YLRi9Cy0LDQtdC8INGE0L7RgNC80LDRgiDRgSDQv9C+0LvQtdC8IGVsZW1lbnRzXHJcbiAgICAgICAgICBsZXQgYWxsUHJvZHVjdHM6IGFueVtdID0gW107XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIC8vINCf0YDQvtGF0L7QtNC40Lwg0L/QviDQutCw0LbQtNC+0LzRgyDRjdC70LXQvNC10L3RgtGDINC+0LTQtdC20LTRi1xyXG4gICAgICAgICAgZm9yIChjb25zdCBlbGVtZW50IG9mIGFuYWx5c2lzRGF0YS5lbGVtZW50cykge1xyXG4gICAgICAgICAgICBpZiAoZWxlbWVudC53Yl9wcm9kdWN0cyAmJiBBcnJheS5pc0FycmF5KGVsZW1lbnQud2JfcHJvZHVjdHMpKSB7XHJcbiAgICAgICAgICAgICAgLy8g0J/RgNC10L7QsdGA0LDQt9GD0LXQvCDQv9GA0L7QtNGD0LrRgtGLINC40LcgV2lsZGJlcnJpZXMg0LIg0L3QsNGIINGE0L7RgNC80LDRglxyXG4gICAgICAgICAgICAgIGNvbnN0IHByb2R1Y3RzID0gZWxlbWVudC53Yl9wcm9kdWN0cy5tYXAoKHByb2R1Y3Q6IGFueSwgaWR4OiBudW1iZXIpID0+ICh7XHJcbiAgICAgICAgICAgICAgICBpZDogcHJvZHVjdC5pZCB8fCBgJHtlbGVtZW50LnR5cGV9LSR7aWR4fWAsXHJcbiAgICAgICAgICAgICAgICBuYW1lOiBwcm9kdWN0Lm5hbWUgfHwgYCR7ZWxlbWVudC5jb2xvcn0gJHtlbGVtZW50LnR5cGV9YCxcclxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBwcm9kdWN0LmRlc2NyaXB0aW9uIHx8IGVsZW1lbnQuZGVzY3JpcHRpb24gfHwgYCR7ZWxlbWVudC5jb2xvcn0gJHtlbGVtZW50LnR5cGV9YCxcclxuICAgICAgICAgICAgICAgIHByaWNlOiBwcm9kdWN0LnByaWNlIHx8IDAsXHJcbiAgICAgICAgICAgICAgICBvbGRQcmljZTogcHJvZHVjdC5wcmljZVUgPyBwcm9kdWN0LnByaWNlVSAvIDEwMCA6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgICAgIHNhbGVfcHJpY2U6IHByb2R1Y3Quc2FsZV9wcmljZSB8fCBwcm9kdWN0LnNhbGVQcmljZVUgPyBwcm9kdWN0LnNhbGVQcmljZVUgLyAxMDAgOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgICAgICBpbWFnZVVybDogcHJvZHVjdC5pbWFnZVVybCB8fCBwcm9kdWN0LmltZyB8fCBwcm9kdWN0LnBpY3MgJiYgcHJvZHVjdC5waWNzWzBdLFxyXG4gICAgICAgICAgICAgICAgY2F0ZWdvcnk6IGVsZW1lbnQudHlwZSB8fCAn0J7QtNC10LbQtNCwJyxcclxuICAgICAgICAgICAgICAgIGdlbmRlcjogZWxlbWVudC5nZW5kZXIgfHwgZ2VuZGVyIHx8ICfRg9C90LjRgdC10LrRgScsXHJcbiAgICAgICAgICAgICAgICB1cmw6IHByb2R1Y3QudXJsIHx8IHByb2R1Y3QubGluayxcclxuICAgICAgICAgICAgICAgIGJyYW5kOiBwcm9kdWN0LmJyYW5kXHJcbiAgICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgIGFsbFByb2R1Y3RzID0gWy4uLmFsbFByb2R1Y3RzLCAuLi5wcm9kdWN0c107XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgLy8g0JXRgdC70Lgg0L3QtdGCIHdiX3Byb2R1Y3RzLCDRgdC+0LfQtNCw0LXQvCDQtNC10LzQvi3Qv9GA0L7QtNGD0LrRgiDQvdCwINC+0YHQvdC+0LLQtSDQvtC/0LjRgdCw0L3QuNGPINGN0LvQtdC80LXQvdGC0LBcclxuICAgICAgICAgICAgICBhbGxQcm9kdWN0cy5wdXNoKHtcclxuICAgICAgICAgICAgICAgIGlkOiBgJHtlbGVtZW50LnR5cGV9LWRlbW9gLFxyXG4gICAgICAgICAgICAgICAgbmFtZTogYCR7ZWxlbWVudC5jb2xvcn0gJHtlbGVtZW50LnR5cGV9YCxcclxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBlbGVtZW50LmRlc2NyaXB0aW9uIHx8IGAke2VsZW1lbnQuY29sb3J9ICR7ZWxlbWVudC50eXBlfWAsXHJcbiAgICAgICAgICAgICAgICBwcmljZTogTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogNTAwMCkgKyA1MDAsXHJcbiAgICAgICAgICAgICAgICBpbWFnZVVybDogYGh0dHBzOi8vYmFza2V0LTAkeyhhbGxQcm9kdWN0cy5sZW5ndGggJSA5KSArIDF9LndiYmFza2V0LnJ1L3ZvbCR7YWxsUHJvZHVjdHMubGVuZ3RoICsgMX0wMC9wYXJ0JHthbGxQcm9kdWN0cy5sZW5ndGggKyAxfTAwJHthbGxQcm9kdWN0cy5sZW5ndGggKyAxfS8xMDAke2FsbFByb2R1Y3RzLmxlbmd0aCArIDF9JHthbGxQcm9kdWN0cy5sZW5ndGggKyAxfSR7YWxsUHJvZHVjdHMubGVuZ3RoICsgMX0vaW1hZ2VzL2M1MTZ4Njg4LzEud2VicGAsXHJcbiAgICAgICAgICAgICAgICBjYXRlZ29yeTogZWxlbWVudC50eXBlIHx8ICfQntC00LXQttC00LAnLFxyXG4gICAgICAgICAgICAgICAgZ2VuZGVyOiBlbGVtZW50LmdlbmRlciB8fCBnZW5kZXIgfHwgJ9GD0L3QuNGB0LXQutGBJ1xyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIHJlc3VsdHMgPSBhbGxQcm9kdWN0cztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgLy8g0JXRgdC70Lgg0L3QuNGH0LXQs9C+INC90LUg0L3QsNC50LTQtdC90L4sINC40YHQv9C+0LvRjNC30YPQtdC8INC80L7QutC+0LLRi9C1INC00LDQvdC90YvQtVxyXG4gICAgICAgICAgY29uc29sZS5sb2coJ9Cd0LXQuNC30LLQtdGB0YLQvdGL0Lkg0YTQvtGA0LzQsNGCINC00LDQvdC90YvRhSDQvtGCIFB5dGhvbiBBUEksINC40YHQv9C+0LvRjNC30YPQtdC8INC80L7QutC+0LLRi9C1INC00LDQvdC90YvQtScpO1xyXG4gICAgICAgICAgcmVzdWx0cyA9IGdldE1vY2tSZXN1bHRzKGdlbmRlcikucmVzdWx0cztcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgXHJcbiAgICAgICAgICByZXN1bHRzLFxyXG4gICAgICAgICAgaW1hZ2VVcmw6IGZpbGVVcmwsXHJcbiAgICAgICAgICBhcGlfc291cmNlOiAncHl0aG9uJyxcclxuICAgICAgICAgIGFuYWx5c2lzOiBhbmFseXNpc0RhdGEuYW5hbHlzaXMgfHwgXCJcIlxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ9Ce0YjQuNCx0LrQsCDQv9GA0Lgg0L7QsdGA0LDRidC10L3QuNC4INC6IFB5dGhvbiBBUEk6JywgZXJyb3IpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vINCSINGB0LvRg9GH0LDQtSDQvtGI0LjQsdC60Lgg0LLQvtC30LLRgNCw0YnQsNC10Lwg0LzQvtC60L7QstGL0LUg0LTQsNC90L3Ri9C1XHJcbiAgICAgICAgY29uc3QgbW9ja0RhdGEgPSBnZXRNb2NrUmVzdWx0cyhnZW5kZXIpO1xyXG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IFxyXG4gICAgICAgICAgcmVzdWx0czogbW9ja0RhdGEucmVzdWx0cyxcclxuICAgICAgICAgIGltYWdlVXJsOiBmaWxlVXJsLFxyXG4gICAgICAgICAgZXJyb3I6IGDQntGI0LjQsdC60LAg0L/RgNC4INC+0LHRgNCw0YnQtdC90LjQuCDQuiBQeXRob24gQVBJOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ9Cd0LXQuNC30LLQtdGB0YLQvdCw0Y8g0L7RiNC40LHQutCwJ31gLFxyXG4gICAgICAgICAgYXBpX3NvdXJjZTogJ21vY2snLFxyXG4gICAgICAgICAgYW5hbHlzaXM6IFwi0J3QtSDRg9C00LDQu9C+0YHRjCDQv9GA0L7QsNC90LDQu9C40LfQuNGA0L7QstCw0YLRjCDQuNC30L7QsdGA0LDQttC10L3QuNC1INC40Lct0LfQsCDQvtGI0LjQsdC60LggQVBJLlwiXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIC8vINCV0YHQu9C4IFB5dGhvbiBBUEkg0L3QtdC00L7RgdGC0YPQv9C10L0sINC40YHQv9C+0LvRjNC30YPQtdC8INC80L7QutC+0LLRi9C1INC00LDQvdC90YvQtVxyXG4gICAgICBjb25zb2xlLmxvZygnUHl0aG9uIEFQSSDQvdC10LTQvtGB0YLRg9C/0LXQvSwg0LjRgdC/0L7Qu9GM0LfRg9C10Lwg0LzQvtC60L7QstGL0LUg0LTQsNC90L3Ri9C1Jyk7XHJcbiAgICAgIGNvbnN0IG1vY2tEYXRhID0gZ2V0TW9ja1Jlc3VsdHMoZ2VuZGVyKTtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgXHJcbiAgICAgICAgcmVzdWx0czogbW9ja0RhdGEucmVzdWx0cyxcclxuICAgICAgICBpbWFnZVVybDogZmlsZVVybCxcclxuICAgICAgICBhcGlfc291cmNlOiAnbW9jaycsXHJcbiAgICAgICAgYW5hbHlzaXM6IFwi0JDQvdCw0LvQuNC3INC90LXQtNC+0YHRgtGD0L/QtdC9IC0g0YHQtdGA0LLQtdGAINCw0L3QsNC70LjQt9CwINC40LfQvtCx0YDQsNC20LXQvdC40Lkg0L3QtSDQvtGC0LLQtdGH0LDQtdGCLlwiXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCfQntGI0LjQsdC60LAg0L/RgNC4INC+0LHRgNCw0LHQvtGC0LrQtSDQuNC30L7QsdGA0LDQttC10L3QuNGPOicsIGVycm9yKTtcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgeyBlcnJvcjogJ9Cf0YDQvtC40LfQvtGI0LvQsCDQvtGI0LjQsdC60LAg0L/RgNC4INC+0LHRgNCw0LHQvtGC0LrQtSDQuNC30L7QsdGA0LDQttC10L3QuNGPJyB9LFxyXG4gICAgICB7IHN0YXR1czogNTAwIH1cclxuICAgICk7XHJcbiAgfVxyXG59XHJcblxyXG4vLyDQpNGD0L3QutGG0LjRjyDQtNC70Y8g0L/QvtC70YPRh9C10L3QuNGPINC80L7QutC+0LLRi9GFINC00LDQvdC90YvRhVxyXG5mdW5jdGlvbiBnZXRNb2NrUmVzdWx0cyhnZW5kZXI6IHN0cmluZyA9ICfRg9C90LjRgdC10LrRgScpIHtcclxuICBjb25zdCB1c2VyR2VuZGVyID0gZ2VuZGVyLnRvTG93ZXJDYXNlKCk7XHJcbiAgXHJcbiAgcmV0dXJuIHtcclxuICAgIHJlc3VsdHM6IFtcclxuICAgICAge1xyXG4gICAgICAgIGlkOiAnMScsXHJcbiAgICAgICAgbmFtZTogJ9CR0LXQu9Cw0Y8g0YXQu9C+0L/QutC+0LLQsNGPINGE0YPRgtCx0L7Qu9C60LAnLFxyXG4gICAgICAgIGRlc2NyaXB0aW9uOiAn0JHQsNC30L7QstCw0Y8g0YTRg9GC0LHQvtC70LrQsCDQuNC3INC+0YDQs9Cw0L3QuNGH0LXRgdC60L7Qs9C+INGF0LvQvtC/0LrQsCDRgSDQutGA0YPQs9C70YvQvCDQstGL0YDQtdC30L7QvCcsXHJcbiAgICAgICAgcHJpY2U6IDk5OSxcclxuICAgICAgICBpbWFnZVVybDogJ2h0dHBzOi8vYmFza2V0LTAxLndiYmFza2V0LnJ1L3ZvbDEwMDEvcGFydDEwMDEzNS8xMDAxMzU3NjYvaW1hZ2VzL2M1MTZ4Njg4LzEud2VicCcsXHJcbiAgICAgICAgY2F0ZWdvcnk6ICfQktC10YDRhScsXHJcbiAgICAgICAgZ2VuZGVyOiB1c2VyR2VuZGVyXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBpZDogJzInLFxyXG4gICAgICAgIG5hbWU6ICfQkdC10LvQsNGPINGE0YPRgtCx0L7Qu9C60LAg0L7QstC10YDRgdCw0LnQtycsXHJcbiAgICAgICAgZGVzY3JpcHRpb246ICfQodCy0L7QsdC+0LTQvdCw0Y8g0YTRg9GC0LHQvtC70LrQsCDRgdCy0L7QsdC+0LTQvdC+0LPQviDQutGA0L7RjyDQuNC3INC80Y/Qs9C60L7Qs9C+INGF0LvQvtC/0LrQsCcsXHJcbiAgICAgICAgcHJpY2U6IDEyOTksXHJcbiAgICAgICAgaW1hZ2VVcmw6ICdodHRwczovL2Jhc2tldC0wMy53YmJhc2tldC5ydS92b2wyODMvcGFydDI4MzY0LzI4MzY0NzcwL2ltYWdlcy9jNTE2eDY4OC8xLndlYnAnLFxyXG4gICAgICAgIGNhdGVnb3J5OiAn0JLQtdGA0YUnLFxyXG4gICAgICAgIGdlbmRlcjogdXNlckdlbmRlclxyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgaWQ6ICczJyxcclxuICAgICAgICBuYW1lOiAn0KTRg9GC0LHQvtC70LrQsCDRgSDQv9GA0LjQvdGC0L7QvCcsXHJcbiAgICAgICAgZGVzY3JpcHRpb246ICfQodGC0LjQu9GM0L3QsNGPINGF0LvQvtC/0LrQvtCy0LDRjyDRhNGD0YLQsdC+0LvQutCwINGBINCz0YDQsNGE0LjRh9C10YHQutC40Lwg0L/RgNC40L3RgtC+0LwnLFxyXG4gICAgICAgIHByaWNlOiAxNTk5LFxyXG4gICAgICAgIGltYWdlVXJsOiAnaHR0cHM6Ly9iYXNrZXQtMDUud2JiYXNrZXQucnUvdm9sNzU4L3BhcnQ3NTg0Ni83NTg0NjM4Ny9pbWFnZXMvYzUxNng2ODgvMS53ZWJwJyxcclxuICAgICAgICBjYXRlZ29yeTogJ9CS0LXRgNGFJyxcclxuICAgICAgICBnZW5kZXI6IHVzZXJHZW5kZXIgPT09ICfQvNGD0LbRgdC60L7QuScgPyAn0LzRg9C20YHQutC+0LknIDogJ9C20LXQvdGB0LrQuNC5J1xyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgaWQ6ICc0JyxcclxuICAgICAgICBuYW1lOiAn0JHQsNC30L7QstCw0Y8g0LHQtdC70LDRjyDQsdC70YPQt9C60LAnLFxyXG4gICAgICAgIGRlc2NyaXB0aW9uOiAn0K3Qu9C10LPQsNC90YLQvdCw0Y8g0LHQu9GD0LfQutCwINC40Lcg0YHQvNC10YHQvtCy0L7Qs9C+INGF0LvQvtC/0LrQsCDRgdC+INGB0LLQvtCx0L7QtNC90YvQvCDRgdC40LvRg9GN0YLQvtC8JyxcclxuICAgICAgICBwcmljZTogMjQ5OSxcclxuICAgICAgICBpbWFnZVVybDogJ2h0dHBzOi8vYmFza2V0LTExLndiYmFza2V0LnJ1L3ZvbDE0NTcvcGFydDE0NTc2Ni8xNDU3NjYyODcvaW1hZ2VzL2M1MTZ4Njg4LzEud2VicCcsXHJcbiAgICAgICAgY2F0ZWdvcnk6ICfQktC10YDRhScsXHJcbiAgICAgICAgZ2VuZGVyOiAn0LbQtdC90YHQutC40LknXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBpZDogJzUnLFxyXG4gICAgICAgIG5hbWU6ICfQp9C10YDQvdCw0Y8g0YXQu9C+0L/QutC+0LLQsNGPINGE0YPRgtCx0L7Qu9C60LAnLFxyXG4gICAgICAgIGRlc2NyaXB0aW9uOiAn0JrQu9Cw0YHRgdC40YfQtdGB0LrQsNGPINGH0LXRgNC90LDRjyDRhNGD0YLQsdC+0LvQutCwINC40Lcg0L/RgNC10LzQuNCw0LvRjNC90L7Qs9C+INGF0LvQvtC/0LrQsCcsXHJcbiAgICAgICAgcHJpY2U6IDEwOTksXHJcbiAgICAgICAgaW1hZ2VVcmw6ICdodHRwczovL2Jhc2tldC0xMC53YmJhc2tldC5ydS92b2wxNDE4L3BhcnQxNDE4MTIvMTQxODEyODgzL2ltYWdlcy9jNTE2eDY4OC8xLndlYnAnLFxyXG4gICAgICAgIGNhdGVnb3J5OiAn0JLQtdGA0YUnLFxyXG4gICAgICAgIGdlbmRlcjogJ9C80YPQttGB0LrQvtC5J1xyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgaWQ6ICc2JyxcclxuICAgICAgICBuYW1lOiAn0JHQtdC70LDRjyDRgNGD0LHQsNGI0LrQsCcsXHJcbiAgICAgICAgZGVzY3JpcHRpb246ICfQmtC70LDRgdGB0LjRh9C10YHQutCw0Y8g0YDRg9Cx0LDRiNC60LAg0LjQtyDRhdC70L7Qv9C60LAg0YEg0LTQu9C40L3QvdGL0Lwg0YDRg9C60LDQstC+0LwnLFxyXG4gICAgICAgIHByaWNlOiAyOTk5LFxyXG4gICAgICAgIGltYWdlVXJsOiAnaHR0cHM6Ly9iYXNrZXQtMTIud2JiYXNrZXQucnUvdm9sMTY4OC9wYXJ0MTY4ODQyLzE2ODg0MjEyMi9pbWFnZXMvYzUxNng2ODgvMS53ZWJwJyxcclxuICAgICAgICBjYXRlZ29yeTogJ9CS0LXRgNGFJyxcclxuICAgICAgICBnZW5kZXI6IHVzZXJHZW5kZXIgPT09ICfQttC10L3RgdC60LjQuScgPyAn0LbQtdC90YHQutC40LknIDogJ9C80YPQttGB0LrQvtC5J1xyXG4gICAgICB9XHJcbiAgICBdXHJcbiAgfTtcclxufVxyXG5cclxuLy8g0KTRg9C90LrRhtC40Y8g0LTQu9GPINGA0LDQt9Cx0L7RgNCwINC+0YLQstC10YLQsCDQvtGCIFB5dGhvbiBBUEkg0Lgg0L/RgNC10L7QsdGA0LDQt9C+0LLQsNC90LjRjyDQsiDRhNC+0YDQvNCw0YIgQ2xvdGhpbmdSZWNvZ25pdGlvbkRhdGFcclxuZnVuY3Rpb24gcGFyc2VDbG90aGluZ0l0ZW1zRnJvbUFuYWx5c2lzKGFuYWx5c2lzRGF0YTogYW55KTogQ2xvdGhpbmdSZWNvZ25pdGlvbkRhdGFbJ2l0ZW1zJ10ge1xyXG4gIC8vINCV0YHQu9C4IEFQSSDQstC10YDQvdGD0Lsg0YPQttC1INC/0YDQsNCy0LjQu9GM0L3QviDQvtGC0YTQvtGA0LzQsNGC0LjRgNC+0LLQsNC90L3Ri9C1INC00LDQvdC90YvQtVxyXG4gIGlmIChhbmFseXNpc0RhdGEuZWxlbWVudHMgJiYgQXJyYXkuaXNBcnJheShhbmFseXNpc0RhdGEuZWxlbWVudHMpKSB7XHJcbiAgICByZXR1cm4gYW5hbHlzaXNEYXRhLmVsZW1lbnRzLm1hcCgoaXRlbTogYW55KSA9PiAoe1xyXG4gICAgICB0eXBlOiBpdGVtLnR5cGUgfHwgaXRlbS5uYW1lIHx8ICfQn9GA0LXQtNC80LXRgiDQvtC00LXQttC00YsnLFxyXG4gICAgICBjb2xvcjogaXRlbS5jb2xvciB8fCAn0L3QtdC40LfQstC10YHRgtC90YvQuScsXHJcbiAgICAgIGRlc2NyaXB0aW9uOiBpdGVtLmRlc2NyaXB0aW9uIHx8ICcnLFxyXG4gICAgICBtYXRlcmlhbDogaXRlbS5tYXRlcmlhbCxcclxuICAgICAgcGF0dGVybjogaXRlbS5wYXR0ZXJuLFxyXG4gICAgICBnZW5kZXI6IGl0ZW0uZ2VuZGVyXHJcbiAgICB9KSk7XHJcbiAgfVxyXG5cclxuICAvLyDQldGB0LvQuCBBUEkg0LLQtdGA0L3Rg9C7INC00LDQvdC90YvQtSDQsiDQv9C+0LvQtSAnYW5hbHlzaXMnXHJcbiAgaWYgKGFuYWx5c2lzRGF0YS5hbmFseXNpcykge1xyXG4gICAgY29uc29sZS5sb2coJ9Cf0L7Qu9GD0YfQtdC9INCw0L3QsNC70LjQtyDRgtC10LrRgdGC0LA6JywgYW5hbHlzaXNEYXRhLmFuYWx5c2lzKTtcclxuICB9XHJcbiAgXHJcbiAgLy8g0JXRgdC70LggQVBJINCy0LXRgNC90YPQuyDQtNCw0L3QvdGL0LUg0LIg0L3QtdGB0YLQsNC90LTQsNGA0YLQvdC+0Lkg0YHRgtGA0YPQutGC0YPRgNC1LCDQv9GA0L7QstC10YDRj9C10Lwg0LLRgdC1INCy0L7Qt9C80L7QttC90YvQtSDQv9C+0LvRj1xyXG4gIGNvbnN0IHBvc3NpYmxlRGF0YUZpZWxkcyA9IFsnZGF0YScsICdyZXN1bHQnLCAncmVzdWx0cycsICdpdGVtcycsICdjbG90aGluZ19pdGVtcyddO1xyXG4gIGZvciAoY29uc3QgZmllbGQgb2YgcG9zc2libGVEYXRhRmllbGRzKSB7XHJcbiAgICBpZiAoYW5hbHlzaXNEYXRhW2ZpZWxkXSAmJiAoQXJyYXkuaXNBcnJheShhbmFseXNpc0RhdGFbZmllbGRdKSB8fCB0eXBlb2YgYW5hbHlzaXNEYXRhW2ZpZWxkXSA9PT0gJ29iamVjdCcpKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGDQndCw0LnQtNC10L3RiyDQtNCw0L3QvdGL0LUg0LIg0L/QvtC70LUgJHtmaWVsZH06YCwgYW5hbHlzaXNEYXRhW2ZpZWxkXSk7XHJcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KGFuYWx5c2lzRGF0YVtmaWVsZF0pKSB7XHJcbiAgICAgICAgcmV0dXJuIGFuYWx5c2lzRGF0YVtmaWVsZF0ubWFwKChpdGVtOiBhbnkpID0+ICh7XHJcbiAgICAgICAgICB0eXBlOiBpdGVtLnR5cGUgfHwgaXRlbS5uYW1lIHx8ICfQn9GA0LXQtNC80LXRgiDQvtC00LXQttC00YsnLFxyXG4gICAgICAgICAgY29sb3I6IGl0ZW0uY29sb3IgfHwgJ9C90LXQuNC30LLQtdGB0YLQvdGL0LknLFxyXG4gICAgICAgICAgZGVzY3JpcHRpb246IGl0ZW0uZGVzY3JpcHRpb24gfHwgJycsXHJcbiAgICAgICAgICBtYXRlcmlhbDogaXRlbS5tYXRlcmlhbCxcclxuICAgICAgICAgIHBhdHRlcm46IGl0ZW0ucGF0dGVybixcclxuICAgICAgICAgIGdlbmRlcjogaXRlbS5nZW5kZXJcclxuICAgICAgICB9KSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vINCV0YHQu9C4IEFQSSDQstC10YDQvdGD0Lsg0LDQvdCw0LvQuNC3INCyINGC0LXQutGB0YLQvtCy0L7QvCDRhNC+0YDQvNCw0YLQtSwg0L/Ri9GC0LDQtdC80YHRjyDQuNC30LLQu9C10YfRjCDQuNC90YTQvtGA0LzQsNGG0LjRjiDQviDQv9GA0LXQtNC80LXRgtCw0YUg0L7QtNC10LbQtNGLXHJcbiAgY29uc3QgYW5hbHlzaXNUZXh0ID0gYW5hbHlzaXNEYXRhLmFuYWx5c2lzIHx8IGFuYWx5c2lzRGF0YS5kZXNjcmlwdGlvbiB8fCAnJztcclxuICBcclxuICBpZiAoIWFuYWx5c2lzVGV4dCkge1xyXG4gICAgY29uc29sZS5sb2coJ9Cd0LXRgiDRgtC10LrRgdGC0L7QstC+0LPQviDQsNC90LDQu9C40LfQsCwg0LLQvtC30LLRgNCw0YnQsNC10Lwg0LzQvtC60L7QstGL0LUg0LTQsNC90L3Ri9C1Jyk7XHJcbiAgICByZXR1cm4gZ2V0TW9ja0FuYWx5c2lzUmVzcG9uc2UoKS5pdGVtcztcclxuICB9XHJcblxyXG4gIC8vINCf0YvRgtCw0LXQvNGB0Y8g0LjQt9Cy0LvQtdGH0Ywg0Y3Qu9C10LzQtdC90YLRiyDQvtC00LXQttC00Ysg0LjQtyDRgtC10LrRgdGC0LBcclxuICBjb25zdCBjbG90aGluZ0l0ZW1zID0gW107XHJcbiAgXHJcbiAgLy8g0JjRidC10Lwg0YPQv9C+0LzQuNC90LDQvdC40Y8g0L/RgNC10LTQvNC10YLQvtCyINC+0LTQtdC20LTRiyDQsiDRgtC10LrRgdGC0LVcclxuICBjb25zdCBjb21tb25DbG90aGluZ0l0ZW1zID0gW1xyXG4gICAgJ9GE0YPRgtCx0L7Qu9C60LAnLCAn0YDRg9Cx0LDRiNC60LAnLCAn0LHQu9GD0LfQutCwJywgJ9C/0LvQsNGC0YzQtScsICfRjtCx0LrQsCcsICfQsdGA0Y7QutC4JywgJ9C00LbQuNC90YHRiycsXHJcbiAgICAn0YjQvtGA0YLRiycsICfQutGD0YDRgtC60LAnLCAn0L/QsNC70YzRgtC+JywgJ9GB0LLQuNGC0LXRgCcsICfQutCw0YDQtNC40LPQsNC9JywgJ9GF0YPQtNC4JywgJ9C00LbQtdC80L/QtdGAJyxcclxuICAgICfQutGA0L7RgdGB0L7QstC60LgnLCAn0YLRg9GE0LvQuCcsICfQsdC+0YLQuNC90LrQuCcsICfRgdCw0L/QvtCz0LgnLCAn0LrQtdC00YsnLCAn0YjQsNC/0LrQsCcsICfRiNC70Y/Qv9CwJyxcclxuICAgICfQsdC10YDQtdGCJywgJ9C60LXQv9C60LAnLCAn0YjQsNGA0YQnLCAn0L/QtdGA0YfQsNGC0LrQuCcsICfQvdC+0YHQutC4JywgJ9C60L7Qu9Cz0L7RgtC60LgnLCAn0LHQtdC70YzQtScsXHJcbiAgICAn0LrQvtGB0YLRjtC8JywgJ9C/0LjQtNC20LDQuicsICfQttCw0LrQtdGCJywgJ9Cx0LvQtdC50LfQtdGAJ1xyXG4gIF07XHJcbiAgXHJcbiAgLy8g0JjRidC10Lwg0YbQstC10YLQsFxyXG4gIGNvbnN0IGNvbW1vbkNvbG9ycyA9IFtcclxuICAgICfQsdC10LvRi9C5JywgJ9GH0LXRgNC90YvQuScsICfQutGA0LDRgdC90YvQuScsICfRgdC40L3QuNC5JywgJ9C30LXQu9C10L3Ri9C5JywgJ9C20LXQu9GC0YvQuScsICfQvtGA0LDQvdC20LXQstGL0LknLFxyXG4gICAgJ9GE0LjQvtC70LXRgtC+0LLRi9C5JywgJ9GA0L7Qt9C+0LLRi9C5JywgJ9C60L7RgNC40YfQvdC10LLRi9C5JywgJ9GB0LXRgNGL0LknLCAn0LHQtdC20LXQstGL0LknLCAn0LPQvtC70YPQsdC+0LknXHJcbiAgXTtcclxuXHJcbiAgLy8g0JjRidC10Lwg0LzQsNGC0LXRgNC40LDQu9GLXHJcbiAgY29uc3QgY29tbW9uTWF0ZXJpYWxzID0gW1xyXG4gICAgJ9GF0LvQvtC/0L7QuicsICfQu9C10L0nLCAn0YjQtdGA0YHRgtGMJywgJ9C60L7QttCwJywgJ9C30LDQvNGI0LAnLCAn0YjQtdC70LonLCAn0LTQtdC90LjQvCcsICfQv9C+0LvQuNGN0YHRgtC10YAnLFxyXG4gICAgJ9C90LXQudC70L7QvScsICfRgtGA0LjQutC+0YLQsNC2JywgJ9Cy0LjRgdC60L7Qt9CwJywgJ9Cw0LrRgNC40LsnLCAn0LLQtdC70YzQstC10YInLCAn0YLQstC40LQnLCAn0LrQsNGI0LXQvNC40YAnXHJcbiAgXTtcclxuXHJcbiAgY29uc29sZS5sb2coJ9CQ0L3QsNC70LjQt9C40YDRg9C10Lwg0YLQtdC60YHRgjonLCBhbmFseXNpc1RleHQpO1xyXG5cclxuICAvLyDQlNC70Y8g0LrQsNC20LTQvtCz0L4g0L/RgNC10LTQvNC10YLQsCDQvtC00LXQttC00Ysg0L/RgNC+0LLQtdGA0Y/QtdC8LCDRg9C/0L7QvNC40L3QsNC10YLRgdGPINC70Lgg0L7QvSDQsiDRgtC10LrRgdGC0LVcclxuICBmb3IgKGNvbnN0IGl0ZW0gb2YgY29tbW9uQ2xvdGhpbmdJdGVtcykge1xyXG4gICAgY29uc3QgcmVnZXggPSBuZXcgUmVnRXhwKGBcXFxcYiR7aXRlbX1cXFxcYmAsICdpJyk7XHJcbiAgICBpZiAocmVnZXgudGVzdChhbmFseXNpc1RleHQudG9Mb3dlckNhc2UoKSkpIHtcclxuICAgICAgY29uc29sZS5sb2coYNCd0LDQudC00LXQvSDQv9GA0LXQtNC80LXRgjogJHtpdGVtfWApO1xyXG4gICAgICBcclxuICAgICAgLy8g0JXRgdC70Lgg0L/RgNC10LTQvNC10YIg0L3QsNC50LTQtdC9LCDQv9GL0YLQsNC10LzRgdGPINC90LDQudGC0Lgg0LXQs9C+INGG0LLQtdGCXHJcbiAgICAgIGxldCBjb2xvciA9ICfQvdC10LjQt9Cy0LXRgdGC0L3Ri9C5JztcclxuICAgICAgZm9yIChjb25zdCBjIG9mIGNvbW1vbkNvbG9ycykge1xyXG4gICAgICAgIGNvbnN0IGNvbG9yUmVnZXggPSBuZXcgUmVnRXhwKGBcXFxcYiR7Y31cXFxcdypcXFxccyske2l0ZW19XFxcXGJ8XFxcXGIke2l0ZW19XFxcXHMrJHtjfVxcXFx3KlxcXFxiYCwgJ2knKTtcclxuICAgICAgICBpZiAoY29sb3JSZWdleC50ZXN0KGFuYWx5c2lzVGV4dC50b0xvd2VyQ2FzZSgpKSkge1xyXG4gICAgICAgICAgY29sb3IgPSBjO1xyXG4gICAgICAgICAgY29uc29sZS5sb2coYCAg0J3QsNC50LTQtdC9INGG0LLQtdGCOiAke2NvbG9yfWApO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICAvLyDQn9GL0YLQsNC10LzRgdGPINC90LDQudGC0Lgg0LzQsNGC0LXRgNC40LDQu1xyXG4gICAgICBsZXQgbWF0ZXJpYWw7XHJcbiAgICAgIGZvciAoY29uc3QgbSBvZiBjb21tb25NYXRlcmlhbHMpIHtcclxuICAgICAgICBjb25zdCBtYXRlcmlhbFJlZ2V4ID0gbmV3IFJlZ0V4cChgXFxcXGIke219XFxcXHcqXFxcXHMrJHtpdGVtfVxcXFxifFxcXFxiJHtpdGVtfVxcXFxzK9C40LdcXFxccyske219XFxcXHcqXFxcXGJ8XFxcXGIke219XFxcXHcqXFxcXHMrJHtpdGVtfVxcXFxiYCwgJ2knKTtcclxuICAgICAgICBpZiAobWF0ZXJpYWxSZWdleC50ZXN0KGFuYWx5c2lzVGV4dC50b0xvd2VyQ2FzZSgpKSkge1xyXG4gICAgICAgICAgbWF0ZXJpYWwgPSBtO1xyXG4gICAgICAgICAgY29uc29sZS5sb2coYCAg0J3QsNC50LTQtdC9INC80LDRgtC10YDQuNCw0Ls6ICR7bWF0ZXJpYWx9YCk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGNsb3RoaW5nSXRlbXMucHVzaCh7XHJcbiAgICAgICAgdHlwZTogaXRlbS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGl0ZW0uc2xpY2UoMSksXHJcbiAgICAgICAgY29sb3IsXHJcbiAgICAgICAgZGVzY3JpcHRpb246ICcnLFxyXG4gICAgICAgIC4uLihtYXRlcmlhbCAmJiB7IG1hdGVyaWFsIH0pLFxyXG4gICAgICAgIGdlbmRlcjogZGV0ZXJtaW5lR2VuZGVyKGFuYWx5c2lzVGV4dCwgaXRlbSlcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIFxyXG4gIGlmIChjbG90aGluZ0l0ZW1zLmxlbmd0aCA+IDApIHtcclxuICAgIGNvbnNvbGUubG9nKCfQndCw0LnQtNC10L3RiyDQv9GA0LXQtNC80LXRgtGLINC+0LTQtdC20LTRizonLCBjbG90aGluZ0l0ZW1zKTtcclxuICAgIHJldHVybiBjbG90aGluZ0l0ZW1zO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBjb25zb2xlLmxvZygn0J3QtSDRg9C00LDQu9C+0YHRjCDRgNCw0YHQv9C+0LfQvdCw0YLRjCDQv9GA0LXQtNC80LXRgtGLINC+0LTQtdC20LTRiyDQsiDRgtC10LrRgdGC0LUsINCy0L7Qt9Cy0YDQsNGJ0LDQtdC8INC80L7QutC+0LLRi9C1INC00LDQvdC90YvQtScpO1xyXG4gICAgcmV0dXJuIGdldE1vY2tBbmFseXNpc1Jlc3BvbnNlKCkuaXRlbXM7XHJcbiAgfVxyXG59XHJcblxyXG4vLyDQl9Cw0LPQu9GD0YjQutCwINC00LvRjyDRgtC10YHRgtC40YDQvtCy0LDQvdC40Y8sINC40YHQv9C+0LvRjNC30YPQtdGC0YHRjyDQutC+0LPQtNCwINC90LXRgiDQtNC+0YHRgtGD0L/QsCDQuiBQeXRob24gQVBJXHJcbmZ1bmN0aW9uIGdldE1vY2tBbmFseXNpc1Jlc3BvbnNlKGltYWdlVXJsPzogc3RyaW5nKTogQ2xvdGhpbmdSZWNvZ25pdGlvbkRhdGEge1xyXG4gIHJldHVybiB7XHJcbiAgICBpdGVtczogW1xyXG4gICAgICB7XHJcbiAgICAgICAgdHlwZTogJ9Ck0YPRgtCx0L7Qu9C60LAnLFxyXG4gICAgICAgIGNvbG9yOiAn0LHQtdC70LDRjycsXHJcbiAgICAgICAgZGVzY3JpcHRpb246ICfRhdC70L7Qv9C60L7QstCw0Y8g0YEg0LrRgNGD0LPQu9GL0Lwg0LLRi9GA0LXQt9C+0LwnLFxyXG4gICAgICAgIG1hdGVyaWFsOiAn0YXQu9C+0L/QvtC6JyxcclxuICAgICAgICBnZW5kZXI6ICfQttC10L3RgdC60LjQuSdcclxuICAgICAgfSxcclxuICAgICAge1xyXG4gICAgICAgIHR5cGU6ICfQlNC20LjQvdGB0YsnLFxyXG4gICAgICAgIGNvbG9yOiAn0YHQuNC90LjQtScsXHJcbiAgICAgICAgZGVzY3JpcHRpb246ICfQutC70LDRgdGB0LjRh9C10YHQutC40LUg0L/RgNGP0LzQvtCz0L4g0LrRgNC+0Y8nLFxyXG4gICAgICAgIG1hdGVyaWFsOiAn0LTQtdC90LjQvCcsXHJcbiAgICAgICAgZ2VuZGVyOiAn0LbQtdC90YHQutC40LknXHJcbiAgICAgIH1cclxuICAgIF0sXHJcbiAgICBmdWxsRGVzY3JpcHRpb246ICfQndCwINC40LfQvtCx0YDQsNC20LXQvdC40Lgg0L/RgNC10LTRgdGC0LDQstC70LXQvSDQv9C+0LLRgdC10LTQvdC10LLQvdGL0Lkg0LrQvtC80L/Qu9C10LrRgiwg0YHQvtGB0YLQvtGP0YnQuNC5INC40Lcg0LHQtdC70L7QuSDRhdC70L7Qv9C60L7QstC+0Lkg0YTRg9GC0LHQvtC70LrQuCDRgSDQutGA0YPQs9C70YvQvCDQstGL0YDQtdC30L7QvCDQuCDQutC70LDRgdGB0LjRh9C10YHQutC40YUg0L/RgNGP0LzRi9GFINGB0LjQvdC40YUg0LTQttC40L3RgdC+0LIuJ1xyXG4gIH07XHJcbn1cclxuXHJcbi8vINCk0YPQvdC60YbQuNGPINC00LvRjyDQvtC/0YDQtdC00LXQu9C10L3QuNGPINC/0L7Qu9CwINC40Lcg0YLQtdC60YHRgtCwINCw0L3QsNC70LjQt9CwXHJcbmZ1bmN0aW9uIGRldGVybWluZUdlbmRlcih0ZXh0OiBzdHJpbmcsIGl0ZW1OYW1lOiBzdHJpbmcpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xyXG4gIC8vINCY0YnQtdC8INGP0LLQvdC+0LUg0YPQutCw0LfQsNC90LjQtSDQv9C+0LvQsCDQtNC70Y8g0LLRgdC10LPQviDQvtCx0YDQsNC30LBcclxuICBjb25zdCBnZW5lcmFsR2VuZGVyTWF0Y2ggPSB0ZXh0Lm1hdGNoKC/Qn9Ce0Js6XFxzKijQvNGD0LbRgdC60L7QuXzQttC10L3RgdC60LjQuXzRg9C90LjRgdC10LrRgSkvaSk7XHJcbiAgbGV0IGdlbmVyYWxHZW5kZXIgPSBnZW5lcmFsR2VuZGVyTWF0Y2ggPyBnZW5lcmFsR2VuZGVyTWF0Y2hbMV0udG9Mb3dlckNhc2UoKSA6IHVuZGVmaW5lZDtcclxuICBcclxuICAvLyDQmNGJ0LXQvCDRg9C60LDQt9Cw0L3QuNC1INC/0L7Qu9CwINC00LvRjyDQutC+0L3QutGA0LXRgtC90L7Qs9C+INC/0YDQtdC00LzQtdGC0LBcclxuICBjb25zdCBpdGVtR2VuZGVyUmVnZXggPSBuZXcgUmVnRXhwKGAoJHtpdGVtTmFtZX0pLio/0L/QvtC7OlxcXFxzKijQvNGD0LbRgdC60L7QuXzQttC10L3RgdC60LjQuXzRg9C90LjRgdC10LrRgSlgLCAnaScpO1xyXG4gIGNvbnN0IGl0ZW1HZW5kZXJNYXRjaCA9IHRleHQubWF0Y2goaXRlbUdlbmRlclJlZ2V4KTtcclxuICBcclxuICAvLyDQktC+0LfQstGA0LDRidCw0LXQvCDQv9C+0Lsg0LTQu9GPINC60L7QvdC60YDQtdGC0L3QvtCz0L4g0L/RgNC10LTQvNC10YLQsCwg0LXRgdC70Lgg0L3QsNC50LTQtdC9LCDQuNC90LDRh9C1INC+0LHRidC40Lkg0L/QvtC7XHJcbiAgcmV0dXJuIGl0ZW1HZW5kZXJNYXRjaCA/IGl0ZW1HZW5kZXJNYXRjaFsyXS50b0xvd2VyQ2FzZSgpIDogZ2VuZXJhbEdlbmRlcjtcclxufSAiXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwid3JpdGVGaWxlIiwibWtkaXIiLCJhY2Nlc3MiLCJwYXRoIiwiUFlUSE9OX0FQSV9VUkwiLCJwcm9jZXNzIiwiZW52IiwiY2hlY2tBcGlBdmFpbGFiaWxpdHkiLCJyZXNwb25zZSIsImZldGNoIiwibWV0aG9kIiwiaGVhZGVycyIsInNpZ25hbCIsIkFib3J0U2lnbmFsIiwidGltZW91dCIsIm9rIiwiZXJyb3IiLCJjb25zb2xlIiwiUE9TVCIsInJlcXVlc3QiLCJpc0FwaUF2YWlsYWJsZSIsImxvZyIsImZvcm1EYXRhIiwiaW1hZ2UiLCJnZXQiLCJnZW5kZXIiLCJqc29uIiwic3RhdHVzIiwiYnl0ZXMiLCJhcnJheUJ1ZmZlciIsImJ1ZmZlciIsIkJ1ZmZlciIsImZyb20iLCJ0ZW1wRGlyIiwiam9pbiIsImN3ZCIsInJlY3Vyc2l2ZSIsImZpbGVOYW1lIiwiRGF0ZSIsIm5vdyIsIm5hbWUiLCJmaWxlUGF0aCIsImZpbGVVcmwiLCJweXRob25BcGlGb3JtRGF0YSIsIkZvcm1EYXRhIiwiYXBwZW5kIiwiQmxvYiIsInR5cGUiLCJweXRob25BcGlSZXNwb25zZSIsImJvZHkiLCJlcnJvclRleHQiLCJ0ZXh0IiwiRXJyb3IiLCJhbmFseXNpc0RhdGEiLCJyZXN1bHRzIiwiQXJyYXkiLCJpc0FycmF5IiwiaXRlbXMiLCJtYXAiLCJpdGVtIiwiaW5kZXgiLCJpZCIsImRlc2NyaXB0aW9uIiwiY29sb3IiLCJtYXRlcmlhbCIsInRyaW0iLCJwcmljZSIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsImltYWdlVXJsIiwiY2F0ZWdvcnkiLCJlbGVtZW50cyIsImFsbFByb2R1Y3RzIiwiZWxlbWVudCIsIndiX3Byb2R1Y3RzIiwicHJvZHVjdHMiLCJwcm9kdWN0IiwiaWR4Iiwib2xkUHJpY2UiLCJwcmljZVUiLCJ1bmRlZmluZWQiLCJzYWxlX3ByaWNlIiwic2FsZVByaWNlVSIsImltZyIsInBpY3MiLCJ1cmwiLCJsaW5rIiwiYnJhbmQiLCJwdXNoIiwibGVuZ3RoIiwiZ2V0TW9ja1Jlc3VsdHMiLCJhcGlfc291cmNlIiwiYW5hbHlzaXMiLCJtb2NrRGF0YSIsIm1lc3NhZ2UiLCJ1c2VyR2VuZGVyIiwidG9Mb3dlckNhc2UiLCJwYXJzZUNsb3RoaW5nSXRlbXNGcm9tQW5hbHlzaXMiLCJwYXR0ZXJuIiwicG9zc2libGVEYXRhRmllbGRzIiwiZmllbGQiLCJhbmFseXNpc1RleHQiLCJnZXRNb2NrQW5hbHlzaXNSZXNwb25zZSIsImNsb3RoaW5nSXRlbXMiLCJjb21tb25DbG90aGluZ0l0ZW1zIiwiY29tbW9uQ29sb3JzIiwiY29tbW9uTWF0ZXJpYWxzIiwicmVnZXgiLCJSZWdFeHAiLCJ0ZXN0IiwiYyIsImNvbG9yUmVnZXgiLCJtIiwibWF0ZXJpYWxSZWdleCIsImNoYXJBdCIsInRvVXBwZXJDYXNlIiwic2xpY2UiLCJkZXRlcm1pbmVHZW5kZXIiLCJmdWxsRGVzY3JpcHRpb24iLCJpdGVtTmFtZSIsImdlbmVyYWxHZW5kZXJNYXRjaCIsIm1hdGNoIiwiZ2VuZXJhbEdlbmRlciIsIml0ZW1HZW5kZXJSZWdleCIsIml0ZW1HZW5kZXJNYXRjaCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/analyze-image/route.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fanalyze-image%2Froute&page=%2Fapi%2Fanalyze-image%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fanalyze-image%2Froute.ts&appDir=C%3A%5CUsers%5Cmaxsi%5Cqwewqeqr%5Cweb-interface%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cmaxsi%5Cqwewqeqr%5Cweb-interface&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();