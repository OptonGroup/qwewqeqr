"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/analyze-image/route";
exports.ids = ["app/api/analyze-image/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "fs/promises":
/*!******************************!*\
  !*** external "fs/promises" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("fs/promises");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fanalyze-image%2Froute&page=%2Fapi%2Fanalyze-image%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fanalyze-image%2Froute.ts&appDir=C%3A%5CUsers%5Cmaxsi%5Cqwewqeqr%5Cweb-interface%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cmaxsi%5Cqwewqeqr%5Cweb-interface&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fanalyze-image%2Froute&page=%2Fapi%2Fanalyze-image%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fanalyze-image%2Froute.ts&appDir=C%3A%5CUsers%5Cmaxsi%5Cqwewqeqr%5Cweb-interface%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cmaxsi%5Cqwewqeqr%5Cweb-interface&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_maxsi_qwewqeqr_web_interface_src_app_api_analyze_image_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/analyze-image/route.ts */ \"(rsc)/./src/app/api/analyze-image/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/analyze-image/route\",\n        pathname: \"/api/analyze-image\",\n        filename: \"route\",\n        bundlePath: \"app/api/analyze-image/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\maxsi\\\\qwewqeqr\\\\web-interface\\\\src\\\\app\\\\api\\\\analyze-image\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_maxsi_qwewqeqr_web_interface_src_app_api_analyze_image_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/analyze-image/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZhbmFseXplLWltYWdlJTJGcm91dGUmcGFnZT0lMkZhcGklMkZhbmFseXplLWltYWdlJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGYW5hbHl6ZS1pbWFnZSUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNtYXhzaSU1Q3F3ZXdxZXFyJTVDd2ViLWludGVyZmFjZSU1Q3NyYyU1Q2FwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9QyUzQSU1Q1VzZXJzJTVDbWF4c2klNUNxd2V3cWVxciU1Q3dlYi1pbnRlcmZhY2UmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ2lDO0FBQzlHO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYmFuay1zdGF0ZW1lbnQtYW5hbHl6ZXIvP2EzNDgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiQzpcXFxcVXNlcnNcXFxcbWF4c2lcXFxccXdld3FlcXJcXFxcd2ViLWludGVyZmFjZVxcXFxzcmNcXFxcYXBwXFxcXGFwaVxcXFxhbmFseXplLWltYWdlXFxcXHJvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9hbmFseXplLWltYWdlL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvYW5hbHl6ZS1pbWFnZVwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvYW5hbHl6ZS1pbWFnZS9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkM6XFxcXFVzZXJzXFxcXG1heHNpXFxcXHF3ZXdxZXFyXFxcXHdlYi1pbnRlcmZhY2VcXFxcc3JjXFxcXGFwcFxcXFxhcGlcXFxcYW5hbHl6ZS1pbWFnZVxcXFxyb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvYW5hbHl6ZS1pbWFnZS9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fanalyze-image%2Froute&page=%2Fapi%2Fanalyze-image%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fanalyze-image%2Froute.ts&appDir=C%3A%5CUsers%5Cmaxsi%5Cqwewqeqr%5Cweb-interface%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cmaxsi%5Cqwewqeqr%5Cweb-interface&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/analyze-image/route.ts":
/*!********************************************!*\
  !*** ./src/app/api/analyze-image/route.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var fs_promises__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! fs/promises */ \"fs/promises\");\n/* harmony import */ var fs_promises__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(fs_promises__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\n\n// Путь к Python API\nconst PYTHON_API_URL = process.env.PYTHON_API_URL || \"http://localhost:8000\";\n// Проверка доступности Python API\nasync function checkApiAvailability() {\n    try {\n        const response = await fetch(`${PYTHON_API_URL}/health`, {\n            method: \"GET\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            signal: AbortSignal.timeout(3000) // Таймаут 3 секунды\n        });\n        return response.ok;\n    } catch (error) {\n        console.error(\"Ошибка при проверке доступности API:\", error);\n        return false;\n    }\n}\nasync function POST(request) {\n    try {\n        // Проверяем доступность Python API\n        const isApiAvailable = await checkApiAvailability();\n        console.log(`Python API доступен: ${isApiAvailable}`);\n        // Получаем FormData из запроса\n        const formData = await request.formData();\n        const image = formData.get(\"image\");\n        const gender = formData.get(\"gender\") || \"унисекс\";\n        if (!image) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Изображение не найдено\"\n            }, {\n                status: 400\n            });\n        }\n        console.log(`Параметр gender: ${gender}`);\n        // Создаем временный путь для сохранения изображения\n        const bytes = await image.arrayBuffer();\n        const buffer = Buffer.from(bytes);\n        const tempDir = path__WEBPACK_IMPORTED_MODULE_2___default().join(process.cwd(), \"public\", \"temp\");\n        // Создаем директорию temp, если она не существует\n        try {\n            await (0,fs_promises__WEBPACK_IMPORTED_MODULE_1__.access)(tempDir);\n        } catch  {\n            await (0,fs_promises__WEBPACK_IMPORTED_MODULE_1__.mkdir)(tempDir, {\n                recursive: true\n            });\n            console.log(`Создана директория: ${tempDir}`);\n        }\n        const fileName = `${Date.now()}_${image.name}`;\n        const filePath = path__WEBPACK_IMPORTED_MODULE_2___default().join(tempDir, fileName);\n        const fileUrl = `/temp/${fileName}`;\n        // Сохраняем изображение\n        await (0,fs_promises__WEBPACK_IMPORTED_MODULE_1__.writeFile)(filePath, buffer);\n        console.log(`Изображение сохранено: ${filePath}`);\n        // Если Python API доступен, отправляем запрос туда\n        if (isApiAvailable) {\n            try {\n                console.log(\"Отправляем запрос на Python API\");\n                // Создаем новый FormData для отправки в Python API\n                const pythonApiFormData = new FormData();\n                // В Python API ожидается файл с именем 'file'\n                pythonApiFormData.append(\"file\", new Blob([\n                    buffer\n                ], {\n                    type: image.type\n                }), fileName);\n                // Добавляем параметр gender\n                pythonApiFormData.append(\"gender\", gender);\n                // Отправляем запрос на Python API\n                const pythonApiResponse = await fetch(`${PYTHON_API_URL}/analyze-image`, {\n                    method: \"POST\",\n                    body: pythonApiFormData\n                });\n                if (!pythonApiResponse.ok) {\n                    const errorText = await pythonApiResponse.text();\n                    console.error(`Ошибка Python API: ${pythonApiResponse.status}`, errorText);\n                    throw new Error(`Ошибка Python API: ${pythonApiResponse.status}`);\n                }\n                const analysisData = await pythonApiResponse.json();\n                console.log(\"Получен ответ от Python API:\", analysisData);\n                // Обрабатываем ответ от Python API и преобразуем в формат для фронтенда\n                let results = [];\n                if (analysisData.results && Array.isArray(analysisData.results)) {\n                    results = analysisData.results;\n                } else if (analysisData.items && Array.isArray(analysisData.items)) {\n                    // Преобразуем формат данных из Python API в формат для фронтенда\n                    results = analysisData.items.map((item, index)=>({\n                            id: `${index + 1}`,\n                            name: item.name || item.type || \"Предмет одежды\",\n                            description: item.description || `${item.color || \"\"} ${item.material || \"\"}`.trim(),\n                            price: Math.floor(Math.random() * 5000) + 500,\n                            imageUrl: item.imageUrl || `https://basket-0${index % 9 + 1}.wbbasket.ru/vol${index + 1}00/part${index + 1}00${index + 1}/100${index + 1}${index + 1}${index + 1}/images/c516x688/1.webp`,\n                            category: item.category || \"Одежда\",\n                            gender: item.gender || \"унисекс\"\n                        }));\n                } else if (analysisData.elements && Array.isArray(analysisData.elements)) {\n                    // Обрабатываем формат с полем elements\n                    let allProducts = [];\n                    // Проходим по каждому элементу одежды\n                    for (const element of analysisData.elements){\n                        if (element.wb_products && Array.isArray(element.wb_products)) {\n                            // Преобразуем продукты из Wildberries в наш формат\n                            const products = element.wb_products.map((product, idx)=>{\n                                // Обработка цен\n                                let price = 0;\n                                let oldPrice = undefined;\n                                let salePrice = undefined;\n                                // Получаем цены из разных возможных полей\n                                if (product.price !== undefined) price = Number(product.price);\n                                // Получаем старую цену\n                                if (product.priceU !== undefined) oldPrice = Number(product.priceU);\n                                else if (product.oldPrice !== undefined) oldPrice = Number(product.oldPrice);\n                                // Получаем цену со скидкой\n                                if (product.sale_price !== undefined) salePrice = Number(product.sale_price);\n                                else if (product.salePriceU !== undefined) salePrice = Number(product.salePriceU);\n                                // Если у нас есть только старая цена и нет скидочной, используем цену как скидочную\n                                if (oldPrice !== undefined && (salePrice === undefined || salePrice === 0)) {\n                                    if (price > 0 && price < oldPrice) {\n                                        salePrice = price;\n                                    } else {\n                                        salePrice = oldPrice;\n                                    }\n                                }\n                                // Если у нас есть только скидочная цена и нет старой, используем скидочную как основную\n                                if (salePrice !== undefined && oldPrice === undefined) {\n                                    if (price > salePrice) {\n                                        oldPrice = price;\n                                    } else {\n                                        oldPrice = salePrice;\n                                    }\n                                }\n                                // Если у нас нет цен вообще, используем случайную цену\n                                if (price === 0 && oldPrice === undefined && salePrice === undefined) {\n                                    price = Math.floor(Math.random() * 5000) + 500;\n                                }\n                                // Сформируем объект продукта\n                                return {\n                                    id: product.id || `${element.type}-${idx}`,\n                                    name: product.name || `${element.color} ${element.type}`,\n                                    description: product.description || element.description || `${element.color} ${element.type}`,\n                                    price: salePrice || price,\n                                    oldPrice: oldPrice,\n                                    imageUrl: product.imageUrl || product.img || product.pics && product.pics[0],\n                                    category: element.type || \"Одежда\",\n                                    gender: element.gender || gender || \"унисекс\",\n                                    url: product.url || product.link || `https://www.wildberries.ru/catalog/${product.id}/detail.aspx`,\n                                    brand: product.brand\n                                };\n                            });\n                            allProducts = [\n                                ...allProducts,\n                                ...products\n                            ];\n                        } else {\n                            // Если нет wb_products, создаем демо-продукт на основе описания элемента\n                            allProducts.push({\n                                id: `${element.type}-demo`,\n                                name: `${element.color} ${element.type}`,\n                                description: element.description || `${element.color} ${element.type}`,\n                                price: Math.floor(Math.random() * 5000) + 500,\n                                imageUrl: `https://basket-0${allProducts.length % 9 + 1}.wbbasket.ru/vol${allProducts.length + 1}00/part${allProducts.length + 1}00${allProducts.length + 1}/100${allProducts.length + 1}${allProducts.length + 1}${allProducts.length + 1}/images/c516x688/1.webp`,\n                                category: element.type || \"Одежда\",\n                                gender: element.gender || gender || \"унисекс\"\n                            });\n                        }\n                    }\n                    results = allProducts;\n                } else {\n                    // Если ничего не найдено, используем моковые данные\n                    console.log(\"Неизвестный формат данных от Python API, используем моковые данные\");\n                    results = getMockResults(gender).results;\n                }\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    results,\n                    imageUrl: fileUrl,\n                    api_source: \"python\",\n                    analysis: analysisData.analysis || \"\"\n                });\n            } catch (error) {\n                console.error(\"Ошибка при обращении к Python API:\", error);\n                // В случае ошибки возвращаем моковые данные\n                const mockData = getMockResults(gender);\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    results: mockData.results,\n                    imageUrl: fileUrl,\n                    error: `Ошибка при обращении к Python API: ${error instanceof Error ? error.message : \"Неизвестная ошибка\"}`,\n                    api_source: \"mock\",\n                    analysis: \"Не удалось проанализировать изображение из-за ошибки API.\"\n                });\n            }\n        } else {\n            // Если Python API недоступен, используем моковые данные\n            console.log(\"Python API недоступен, используем моковые данные\");\n            const mockData = getMockResults(gender);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                results: mockData.results,\n                imageUrl: fileUrl,\n                api_source: \"mock\",\n                analysis: \"Анализ недоступен - сервер анализа изображений не отвечает.\"\n            });\n        }\n    } catch (error) {\n        console.error(\"Ошибка при обработке изображения:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Произошла ошибка при обработке изображения\"\n        }, {\n            status: 500\n        });\n    }\n}\n// Функция для получения моковых данных\nfunction getMockResults(gender = \"унисекс\") {\n    const userGender = gender.toLowerCase();\n    return {\n        results: [\n            {\n                id: \"1\",\n                name: \"Белая хлопковая футболка\",\n                description: \"Базовая футболка из органического хлопка с круглым вырезом\",\n                price: 999,\n                imageUrl: \"https://basket-01.wbbasket.ru/vol1001/part100135/100135766/images/c516x688/1.webp\",\n                category: \"Верх\",\n                gender: userGender\n            },\n            {\n                id: \"2\",\n                name: \"Белая футболка оверсайз\",\n                description: \"Свободная футболка свободного кроя из мягкого хлопка\",\n                price: 1299,\n                imageUrl: \"https://basket-03.wbbasket.ru/vol283/part28364/28364770/images/c516x688/1.webp\",\n                category: \"Верх\",\n                gender: userGender\n            },\n            {\n                id: \"3\",\n                name: \"Футболка с принтом\",\n                description: \"Стильная хлопковая футболка с графическим принтом\",\n                price: 1599,\n                imageUrl: \"https://basket-05.wbbasket.ru/vol758/part75846/75846387/images/c516x688/1.webp\",\n                category: \"Верх\",\n                gender: userGender === \"мужской\" ? \"мужской\" : \"женский\"\n            },\n            {\n                id: \"4\",\n                name: \"Базовая белая блузка\",\n                description: \"Элегантная блузка из смесового хлопка со свободным силуэтом\",\n                price: 2499,\n                imageUrl: \"https://basket-11.wbbasket.ru/vol1457/part145766/145766287/images/c516x688/1.webp\",\n                category: \"Верх\",\n                gender: \"женский\"\n            },\n            {\n                id: \"5\",\n                name: \"Черная хлопковая футболка\",\n                description: \"Классическая черная футболка из премиального хлопка\",\n                price: 1099,\n                imageUrl: \"https://basket-10.wbbasket.ru/vol1418/part141812/141812883/images/c516x688/1.webp\",\n                category: \"Верх\",\n                gender: \"мужской\"\n            },\n            {\n                id: \"6\",\n                name: \"Белая рубашка\",\n                description: \"Классическая рубашка из хлопка с длинным рукавом\",\n                price: 2999,\n                imageUrl: \"https://basket-12.wbbasket.ru/vol1688/part168842/168842122/images/c516x688/1.webp\",\n                category: \"Верх\",\n                gender: userGender === \"женский\" ? \"женский\" : \"мужской\"\n            }\n        ]\n    };\n}\n// Функция для разбора ответа от Python API и преобразования в формат ClothingRecognitionData\nfunction parseClothingItemsFromAnalysis(analysisData) {\n    // Если API вернул уже правильно отформатированные данные\n    if (analysisData.elements && Array.isArray(analysisData.elements)) {\n        return analysisData.elements.map((item)=>({\n                type: item.type || item.name || \"Предмет одежды\",\n                color: item.color || \"неизвестный\",\n                description: item.description || \"\",\n                material: item.material,\n                pattern: item.pattern,\n                gender: item.gender\n            }));\n    }\n    // Если API вернул данные в поле 'analysis'\n    if (analysisData.analysis) {\n        console.log(\"Получен анализ текста:\", analysisData.analysis);\n    }\n    // Если API вернул данные в нестандартной структуре, проверяем все возможные поля\n    const possibleDataFields = [\n        \"data\",\n        \"result\",\n        \"results\",\n        \"items\",\n        \"clothing_items\"\n    ];\n    for (const field of possibleDataFields){\n        if (analysisData[field] && (Array.isArray(analysisData[field]) || typeof analysisData[field] === \"object\")) {\n            console.log(`Найдены данные в поле ${field}:`, analysisData[field]);\n            if (Array.isArray(analysisData[field])) {\n                return analysisData[field].map((item)=>({\n                        type: item.type || item.name || \"Предмет одежды\",\n                        color: item.color || \"неизвестный\",\n                        description: item.description || \"\",\n                        material: item.material,\n                        pattern: item.pattern,\n                        gender: item.gender\n                    }));\n            }\n        }\n    }\n    // Если API вернул анализ в текстовом формате, пытаемся извлечь информацию о предметах одежды\n    const analysisText = analysisData.analysis || analysisData.description || \"\";\n    if (!analysisText) {\n        console.log(\"Нет текстового анализа, возвращаем моковые данные\");\n        return getMockAnalysisResponse().items;\n    }\n    // Пытаемся извлечь элементы одежды из текста\n    const clothingItems = [];\n    // Ищем упоминания предметов одежды в тексте\n    const commonClothingItems = [\n        \"футболка\",\n        \"рубашка\",\n        \"блузка\",\n        \"платье\",\n        \"юбка\",\n        \"брюки\",\n        \"джинсы\",\n        \"шорты\",\n        \"куртка\",\n        \"пальто\",\n        \"свитер\",\n        \"кардиган\",\n        \"худи\",\n        \"джемпер\",\n        \"кроссовки\",\n        \"туфли\",\n        \"ботинки\",\n        \"сапоги\",\n        \"кеды\",\n        \"шапка\",\n        \"шляпа\",\n        \"берет\",\n        \"кепка\",\n        \"шарф\",\n        \"перчатки\",\n        \"носки\",\n        \"колготки\",\n        \"белье\",\n        \"костюм\",\n        \"пиджак\",\n        \"жакет\",\n        \"блейзер\"\n    ];\n    // Ищем цвета\n    const commonColors = [\n        \"белый\",\n        \"черный\",\n        \"красный\",\n        \"синий\",\n        \"зеленый\",\n        \"желтый\",\n        \"оранжевый\",\n        \"фиолетовый\",\n        \"розовый\",\n        \"коричневый\",\n        \"серый\",\n        \"бежевый\",\n        \"голубой\"\n    ];\n    // Ищем материалы\n    const commonMaterials = [\n        \"хлопок\",\n        \"лен\",\n        \"шерсть\",\n        \"кожа\",\n        \"замша\",\n        \"шелк\",\n        \"деним\",\n        \"полиэстер\",\n        \"нейлон\",\n        \"трикотаж\",\n        \"вискоза\",\n        \"акрил\",\n        \"вельвет\",\n        \"твид\",\n        \"кашемир\"\n    ];\n    console.log(\"Анализируем текст:\", analysisText);\n    // Для каждого предмета одежды проверяем, упоминается ли он в тексте\n    for (const item of commonClothingItems){\n        const regex = new RegExp(`\\\\b${item}\\\\b`, \"i\");\n        if (regex.test(analysisText.toLowerCase())) {\n            console.log(`Найден предмет: ${item}`);\n            // Если предмет найден, пытаемся найти его цвет\n            let color = \"неизвестный\";\n            for (const c of commonColors){\n                const colorRegex = new RegExp(`\\\\b${c}\\\\w*\\\\s+${item}\\\\b|\\\\b${item}\\\\s+${c}\\\\w*\\\\b`, \"i\");\n                if (colorRegex.test(analysisText.toLowerCase())) {\n                    color = c;\n                    console.log(`  Найден цвет: ${color}`);\n                    break;\n                }\n            }\n            // Пытаемся найти материал\n            let material;\n            for (const m of commonMaterials){\n                const materialRegex = new RegExp(`\\\\b${m}\\\\w*\\\\s+${item}\\\\b|\\\\b${item}\\\\s+из\\\\s+${m}\\\\w*\\\\b|\\\\b${m}\\\\w*\\\\s+${item}\\\\b`, \"i\");\n                if (materialRegex.test(analysisText.toLowerCase())) {\n                    material = m;\n                    console.log(`  Найден материал: ${material}`);\n                    break;\n                }\n            }\n            clothingItems.push({\n                type: item.charAt(0).toUpperCase() + item.slice(1),\n                color,\n                description: \"\",\n                ...material && {\n                    material\n                },\n                gender: determineGender(analysisText, item)\n            });\n        }\n    }\n    if (clothingItems.length > 0) {\n        console.log(\"Найдены предметы одежды:\", clothingItems);\n        return clothingItems;\n    } else {\n        console.log(\"Не удалось распознать предметы одежды в тексте, возвращаем моковые данные\");\n        return getMockAnalysisResponse().items;\n    }\n}\n// Заглушка для тестирования, используется когда нет доступа к Python API\nfunction getMockAnalysisResponse(imageUrl) {\n    return {\n        items: [\n            {\n                type: \"Футболка\",\n                color: \"белая\",\n                description: \"хлопковая с круглым вырезом\",\n                material: \"хлопок\",\n                gender: \"женский\"\n            },\n            {\n                type: \"Джинсы\",\n                color: \"синие\",\n                description: \"классические прямого кроя\",\n                material: \"деним\",\n                gender: \"женский\"\n            }\n        ],\n        fullDescription: \"На изображении представлен повседневный комплект, состоящий из белой хлопковой футболки с круглым вырезом и классических прямых синих джинсов.\"\n    };\n}\n// Функция для определения пола из текста анализа\nfunction determineGender(text, itemName) {\n    // Ищем явное указание пола для всего образа\n    const generalGenderMatch = text.match(/ПОЛ:\\s*(мужской|женский|унисекс)/i);\n    let generalGender = generalGenderMatch ? generalGenderMatch[1].toLowerCase() : undefined;\n    // Ищем указание пола для конкретного предмета\n    const itemGenderRegex = new RegExp(`(${itemName}).*?пол:\\\\s*(мужской|женский|унисекс)`, \"i\");\n    const itemGenderMatch = text.match(itemGenderRegex);\n    // Возвращаем пол для конкретного предмета, если найден, иначе общий пол\n    return itemGenderMatch ? itemGenderMatch[2].toLowerCase() : generalGender;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9hbmFseXplLWltYWdlL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUF3RDtBQUVoQjtBQUVJO0FBQ3BCO0FBZXhCLG9CQUFvQjtBQUNwQixNQUFNSyxpQkFBaUJDLFFBQVFDLEdBQUcsQ0FBQ0YsY0FBYyxJQUFJO0FBRXJELGtDQUFrQztBQUNsQyxlQUFlRztJQUNiLElBQUk7UUFDRixNQUFNQyxXQUFXLE1BQU1DLE1BQU0sQ0FBQyxFQUFFTCxlQUFlLE9BQU8sQ0FBQyxFQUFFO1lBQ3ZETSxRQUFRO1lBQ1JDLFNBQVM7Z0JBQUUsZ0JBQWdCO1lBQW1CO1lBQzlDQyxRQUFRQyxZQUFZQyxPQUFPLENBQUMsTUFBTSxvQkFBb0I7UUFDeEQ7UUFDQSxPQUFPTixTQUFTTyxFQUFFO0lBQ3BCLEVBQUUsT0FBT0MsT0FBTztRQUNkQyxRQUFRRCxLQUFLLENBQUMsd0NBQXdDQTtRQUN0RCxPQUFPO0lBQ1Q7QUFDRjtBQUVPLGVBQWVFLEtBQUtDLE9BQW9CO0lBQzdDLElBQUk7UUFDRixtQ0FBbUM7UUFDbkMsTUFBTUMsaUJBQWlCLE1BQU1iO1FBQzdCVSxRQUFRSSxHQUFHLENBQUMsQ0FBQyxxQkFBcUIsRUFBRUQsZUFBZSxDQUFDO1FBRXBELCtCQUErQjtRQUMvQixNQUFNRSxXQUFXLE1BQU1ILFFBQVFHLFFBQVE7UUFDdkMsTUFBTUMsUUFBUUQsU0FBU0UsR0FBRyxDQUFDO1FBQzNCLE1BQU1DLFNBQVNILFNBQVNFLEdBQUcsQ0FBQyxhQUF1QjtRQUVuRCxJQUFJLENBQUNELE9BQU87WUFDVixPQUFPeEIscURBQVlBLENBQUMyQixJQUFJLENBQ3RCO2dCQUFFVixPQUFPO1lBQXlCLEdBQ2xDO2dCQUFFVyxRQUFRO1lBQUk7UUFFbEI7UUFFQVYsUUFBUUksR0FBRyxDQUFDLENBQUMsaUJBQWlCLEVBQUVJLE9BQU8sQ0FBQztRQUV4QyxvREFBb0Q7UUFDcEQsTUFBTUcsUUFBUSxNQUFNTCxNQUFNTSxXQUFXO1FBQ3JDLE1B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UUFBUTtZQUNWO1lBQ0E7Z0JBQ0VzQixNQUFNO2dCQUNOZ0IsT0FBTztnQkFDUEQsYUFBYTtnQkFDYkUsVUFBVTtnQkFDVnZDLFFBQVE7WUFDVjtTQUNEO1FBQ0RnRyxpQkFBaUI7SUFDbkI7QUFDRjtBQUVBLGlEQUFpRDtBQUNqRCxTQUFTRCxnQkFBZ0JyRSxJQUFZLEVBQUV1RSxRQUFnQjtJQUNyRCw0Q0FBNEM7SUFDNUMsTUFBTUMscUJBQXFCeEUsS0FBS3lFLEtBQUssQ0FBQztJQUN0QyxJQUFJQyxnQkFBZ0JGLHFCQUFxQkEsa0JBQWtCLENBQUMsRUFBRSxDQUFDeEIsV0FBVyxLQUFLbkI7SUFFL0UsOENBQThDO0lBQzlDLE1BQU04QyxrQkFBa0IsSUFBSWYsT0FBTyxDQUFDLENBQUMsRUFBRVcsU0FBUyxxQ0FBcUMsQ0FBQyxFQUFFO0lBQ3hGLE1BQU1LLGtCQUFrQjVFLEtBQUt5RSxLQUFLLENBQUNFO0lBRW5DLHdFQUF3RTtJQUN4RSxPQUFPQyxrQkFBa0JBLGVBQWUsQ0FBQyxFQUFFLENBQUM1QixXQUFXLEtBQUswQjtBQUM5RCIsInNvdXJjZXMiOlsid2VicGFjazovL2Jhbmstc3RhdGVtZW50LWFuYWx5emVyLy4vc3JjL2FwcC9hcGkvYW5hbHl6ZS1pbWFnZS9yb3V0ZS50cz9jMmE1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XHJcbmltcG9ydCB7IGpvaW4gfSBmcm9tICdwYXRoJztcclxuaW1wb3J0IHsgd3JpdGVGaWxlIH0gZnJvbSAnZnMvcHJvbWlzZXMnO1xyXG5pbXBvcnQgeyB2NCBhcyB1dWlkdjQgfSBmcm9tICd1dWlkJztcclxuaW1wb3J0IHsgbWtkaXIsIGFjY2VzcyB9IGZyb20gJ2ZzL3Byb21pc2VzJztcclxuaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XHJcblxyXG4vLyDQotC40L8g0L7RgtCy0LXRgtCwINC+0YIgQUkg0L3QsCDQsNC90LDQu9C40Lcg0LjQt9C+0LHRgNCw0LbQtdC90LjRj1xyXG5pbnRlcmZhY2UgQ2xvdGhpbmdSZWNvZ25pdGlvbkRhdGEge1xyXG4gIGl0ZW1zOiBBcnJheTx7XHJcbiAgICB0eXBlOiBzdHJpbmc7XHJcbiAgICBkZXNjcmlwdGlvbjogc3RyaW5nO1xyXG4gICAgY29sb3I6IHN0cmluZztcclxuICAgIHBhdHRlcm4/OiBzdHJpbmc7XHJcbiAgICBtYXRlcmlhbD86IHN0cmluZztcclxuICAgIGdlbmRlcj86IHN0cmluZztcclxuICB9PjtcclxuICBmdWxsRGVzY3JpcHRpb246IHN0cmluZztcclxufVxyXG5cclxuLy8g0J/Rg9GC0Ywg0LogUHl0aG9uIEFQSVxyXG5jb25zdCBQWVRIT05fQVBJX1VSTCA9IHByb2Nlc3MuZW52LlBZVEhPTl9BUElfVVJMIHx8ICdodHRwOi8vbG9jYWxob3N0OjgwMDAnO1xyXG5cclxuLy8g0J/RgNC+0LLQtdGA0LrQsCDQtNC+0YHRgtGD0L/QvdC+0YHRgtC4IFB5dGhvbiBBUElcclxuYXN5bmMgZnVuY3Rpb24gY2hlY2tBcGlBdmFpbGFiaWxpdHkoKSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7UFlUSE9OX0FQSV9VUkx9L2hlYWx0aGAsIHsgXHJcbiAgICAgIG1ldGhvZDogJ0dFVCcsXHJcbiAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxyXG4gICAgICBzaWduYWw6IEFib3J0U2lnbmFsLnRpbWVvdXQoMzAwMCkgLy8g0KLQsNC50LzQsNGD0YIgMyDRgdC10LrRg9C90LTRi1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gcmVzcG9uc2Uub2s7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ9Ce0YjQuNCx0LrQsCDQv9GA0Lgg0L/RgNC+0LLQtdGA0LrQtSDQtNC+0YHRgtGD0L/QvdC+0YHRgtC4IEFQSTonLCBlcnJvcik7XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xyXG4gIHRyeSB7XHJcbiAgICAvLyDQn9GA0L7QstC10YDRj9C10Lwg0LTQvtGB0YLRg9C/0L3QvtGB0YLRjCBQeXRob24gQVBJXHJcbiAgICBjb25zdCBpc0FwaUF2YWlsYWJsZSA9IGF3YWl0IGNoZWNrQXBpQXZhaWxhYmlsaXR5KCk7XHJcbiAgICBjb25zb2xlLmxvZyhgUHl0aG9uIEFQSSDQtNC+0YHRgtGD0L/QtdC9OiAke2lzQXBpQXZhaWxhYmxlfWApO1xyXG4gICAgXHJcbiAgICAvLyDQn9C+0LvRg9GH0LDQtdC8IEZvcm1EYXRhINC40Lcg0LfQsNC/0YDQvtGB0LBcclxuICAgIGNvbnN0IGZvcm1EYXRhID0gYXdhaXQgcmVxdWVzdC5mb3JtRGF0YSgpO1xyXG4gICAgY29uc3QgaW1hZ2UgPSBmb3JtRGF0YS5nZXQoJ2ltYWdlJykgYXMgRmlsZSB8IG51bGw7XHJcbiAgICBjb25zdCBnZW5kZXIgPSBmb3JtRGF0YS5nZXQoJ2dlbmRlcicpIGFzIHN0cmluZyB8fCAn0YPQvdC40YHQtdC60YEnO1xyXG5cclxuICAgIGlmICghaW1hZ2UpIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgZXJyb3I6ICfQmNC30L7QsdGA0LDQttC10L3QuNC1INC90LUg0L3QsNC50LTQtdC90L4nIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc29sZS5sb2coYNCf0LDRgNCw0LzQtdGC0YAgZ2VuZGVyOiAke2dlbmRlcn1gKTtcclxuXHJcbiAgICAvLyDQodC+0LfQtNCw0LXQvCDQstGA0LXQvNC10L3QvdGL0Lkg0L/Rg9GC0Ywg0LTQu9GPINGB0L7RhdGA0LDQvdC10L3QuNGPINC40LfQvtCx0YDQsNC20LXQvdC40Y9cclxuICAgIGNvbnN0IGJ5dGVzID0gYXdhaXQgaW1hZ2UuYXJyYXlCdWZmZXIoKTtcclxuICAgIGNvbnN0IGJ1ZmZlciA9IEJ1ZmZlci5mcm9tKGJ5dGVzKTtcclxuICAgIGNvbnN0IHRlbXBEaXIgPSBwYXRoLmpvaW4ocHJvY2Vzcy5jd2QoKSwgJ3B1YmxpYycsICd0ZW1wJyk7XHJcbiAgICBcclxuICAgIC8vINCh0L7Qt9C00LDQtdC8INC00LjRgNC10LrRgtC+0YDQuNGOIHRlbXAsINC10YHQu9C4INC+0L3QsCDQvdC1INGB0YPRidC10YHRgtCy0YPQtdGCXHJcbiAgICB0cnkge1xyXG4gICAgICBhd2FpdCBhY2Nlc3ModGVtcERpcik7XHJcbiAgICB9IGNhdGNoIHtcclxuICAgICAgYXdhaXQgbWtkaXIodGVtcERpciwgeyByZWN1cnNpdmU6IHRydWUgfSk7XHJcbiAgICAgIGNvbnNvbGUubG9nKGDQodC+0LfQtNCw0L3QsCDQtNC40YDQtdC60YLQvtGA0LjRjzogJHt0ZW1wRGlyfWApO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBjb25zdCBmaWxlTmFtZSA9IGAke0RhdGUubm93KCl9XyR7aW1hZ2UubmFtZX1gO1xyXG4gICAgY29uc3QgZmlsZVBhdGggPSBwYXRoLmpvaW4odGVtcERpciwgZmlsZU5hbWUpO1xyXG4gICAgY29uc3QgZmlsZVVybCA9IGAvdGVtcC8ke2ZpbGVOYW1lfWA7XHJcblxyXG4gICAgLy8g0KHQvtGF0YDQsNC90Y/QtdC8INC40LfQvtCx0YDQsNC20LXQvdC40LVcclxuICAgIGF3YWl0IHdyaXRlRmlsZShmaWxlUGF0aCwgYnVmZmVyKTtcclxuICAgIGNvbnNvbGUubG9nKGDQmNC30L7QsdGA0LDQttC10L3QuNC1INGB0L7RhdGA0LDQvdC10L3QvjogJHtmaWxlUGF0aH1gKTtcclxuXHJcbiAgICAvLyDQldGB0LvQuCBQeXRob24gQVBJINC00L7RgdGC0YPQv9C10L0sINC+0YLQv9GA0LDQstC70Y/QtdC8INC30LDQv9GA0L7RgSDRgtGD0LTQsFxyXG4gICAgaWYgKGlzQXBpQXZhaWxhYmxlKSB7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ9Ce0YLQv9GA0LDQstC70Y/QtdC8INC30LDQv9GA0L7RgSDQvdCwIFB5dGhvbiBBUEknKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyDQodC+0LfQtNCw0LXQvCDQvdC+0LLRi9C5IEZvcm1EYXRhINC00LvRjyDQvtGC0L/RgNCw0LLQutC4INCyIFB5dGhvbiBBUElcclxuICAgICAgICBjb25zdCBweXRob25BcGlGb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vINCSIFB5dGhvbiBBUEkg0L7QttC40LTQsNC10YLRgdGPINGE0LDQudC7INGBINC40LzQtdC90LXQvCAnZmlsZSdcclxuICAgICAgICBweXRob25BcGlGb3JtRGF0YS5hcHBlbmQoJ2ZpbGUnLCBuZXcgQmxvYihbYnVmZmVyXSwgeyB0eXBlOiBpbWFnZS50eXBlIH0pLCBmaWxlTmFtZSk7XHJcbiAgICAgICAgLy8g0JTQvtCx0LDQstC70Y/QtdC8INC/0LDRgNCw0LzQtdGC0YAgZ2VuZGVyXHJcbiAgICAgICAgcHl0aG9uQXBpRm9ybURhdGEuYXBwZW5kKCdnZW5kZXInLCBnZW5kZXIpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vINCe0YLQv9GA0LDQstC70Y/QtdC8INC30LDQv9GA0L7RgSDQvdCwIFB5dGhvbiBBUElcclxuICAgICAgICBjb25zdCBweXRob25BcGlSZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke1BZVEhPTl9BUElfVVJMfS9hbmFseXplLWltYWdlYCwge1xyXG4gICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgICBib2R5OiBweXRob25BcGlGb3JtRGF0YSxcclxuICAgICAgICB9KTtcclxuICAgICAgICBcclxuICAgICAgICBpZiAoIXB5dGhvbkFwaVJlc3BvbnNlLm9rKSB7XHJcbiAgICAgICAgICBjb25zdCBlcnJvclRleHQgPSBhd2FpdCBweXRob25BcGlSZXNwb25zZS50ZXh0KCk7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGDQntGI0LjQsdC60LAgUHl0aG9uIEFQSTogJHtweXRob25BcGlSZXNwb25zZS5zdGF0dXN9YCwgZXJyb3JUZXh0KTtcclxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihg0J7RiNC40LHQutCwIFB5dGhvbiBBUEk6ICR7cHl0aG9uQXBpUmVzcG9uc2Uuc3RhdHVzfWApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBhbmFseXNpc0RhdGEgPSBhd2FpdCBweXRob25BcGlSZXNwb25zZS5qc29uKCk7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ9Cf0L7Qu9GD0YfQtdC9INC+0YLQstC10YIg0L7RgiBQeXRob24gQVBJOicsIGFuYWx5c2lzRGF0YSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8g0J7QsdGA0LDQsdCw0YLRi9Cy0LDQtdC8INC+0YLQstC10YIg0L7RgiBQeXRob24gQVBJINC4INC/0YDQtdC+0LHRgNCw0LfRg9C10Lwg0LIg0YTQvtGA0LzQsNGCINC00LvRjyDRhNGA0L7QvdGC0LXQvdC00LBcclxuICAgICAgICBsZXQgcmVzdWx0cyA9IFtdO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChhbmFseXNpc0RhdGEucmVzdWx0cyAmJiBBcnJheS5pc0FycmF5KGFuYWx5c2lzRGF0YS5yZXN1bHRzKSkge1xyXG4gICAgICAgICAgcmVzdWx0cyA9IGFuYWx5c2lzRGF0YS5yZXN1bHRzO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoYW5hbHlzaXNEYXRhLml0ZW1zICYmIEFycmF5LmlzQXJyYXkoYW5hbHlzaXNEYXRhLml0ZW1zKSkge1xyXG4gICAgICAgICAgLy8g0J/RgNC10L7QsdGA0LDQt9GD0LXQvCDRhNC+0YDQvNCw0YIg0LTQsNC90L3Ri9GFINC40LcgUHl0aG9uIEFQSSDQsiDRhNC+0YDQvNCw0YIg0LTQu9GPINGE0YDQvtC90YLQtdC90LTQsFxyXG4gICAgICAgICAgcmVzdWx0cyA9IGFuYWx5c2lzRGF0YS5pdGVtcy5tYXAoKGl0ZW06IGFueSwgaW5kZXg6IG51bWJlcikgPT4gKHtcclxuICAgICAgICAgICAgaWQ6IGAke2luZGV4ICsgMX1gLFxyXG4gICAgICAgICAgICBuYW1lOiBpdGVtLm5hbWUgfHwgaXRlbS50eXBlIHx8ICfQn9GA0LXQtNC80LXRgiDQvtC00LXQttC00YsnLFxyXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogaXRlbS5kZXNjcmlwdGlvbiB8fCBgJHtpdGVtLmNvbG9yIHx8ICcnfSAke2l0ZW0ubWF0ZXJpYWwgfHwgJyd9YC50cmltKCksXHJcbiAgICAgICAgICAgIHByaWNlOiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA1MDAwKSArIDUwMCwgLy8g0JTQtdC80L4t0YbQtdC90LBcclxuICAgICAgICAgICAgaW1hZ2VVcmw6IGl0ZW0uaW1hZ2VVcmwgfHwgYGh0dHBzOi8vYmFza2V0LTAkeyhpbmRleCAlIDkpICsgMX0ud2JiYXNrZXQucnUvdm9sJHtpbmRleCArIDF9MDAvcGFydCR7aW5kZXggKyAxfTAwJHtpbmRleCArIDF9LzEwMCR7aW5kZXggKyAxfSR7aW5kZXggKyAxfSR7aW5kZXggKyAxfS9pbWFnZXMvYzUxNng2ODgvMS53ZWJwYCxcclxuICAgICAgICAgICAgY2F0ZWdvcnk6IGl0ZW0uY2F0ZWdvcnkgfHwgJ9Ce0LTQtdC20LTQsCcsXHJcbiAgICAgICAgICAgIGdlbmRlcjogaXRlbS5nZW5kZXIgfHwgJ9GD0L3QuNGB0LXQutGBJ1xyXG4gICAgICAgICAgfSkpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoYW5hbHlzaXNEYXRhLmVsZW1lbnRzICYmIEFycmF5LmlzQXJyYXkoYW5hbHlzaXNEYXRhLmVsZW1lbnRzKSkge1xyXG4gICAgICAgICAgLy8g0J7QsdGA0LDQsdCw0YLRi9Cy0LDQtdC8INGE0L7RgNC80LDRgiDRgSDQv9C+0LvQtdC8IGVsZW1lbnRzXHJcbiAgICAgICAgICBsZXQgYWxsUHJvZHVjdHM6IGFueVtdID0gW107XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIC8vINCf0YDQvtGF0L7QtNC40Lwg0L/QviDQutCw0LbQtNC+0LzRgyDRjdC70LXQvNC10L3RgtGDINC+0LTQtdC20LTRi1xyXG4gICAgICAgICAgZm9yIChjb25zdCBlbGVtZW50IG9mIGFuYWx5c2lzRGF0YS5lbGVtZW50cykge1xyXG4gICAgICAgICAgICBpZiAoZWxlbWVudC53Yl9wcm9kdWN0cyAmJiBBcnJheS5pc0FycmF5KGVsZW1lbnQud2JfcHJvZHVjdHMpKSB7XHJcbiAgICAgICAgICAgICAgLy8g0J/RgNC10L7QsdGA0LDQt9GD0LXQvCDQv9GA0L7QtNGD0LrRgtGLINC40LcgV2lsZGJlcnJpZXMg0LIg0L3QsNGIINGE0L7RgNC80LDRglxyXG4gICAgICAgICAgICAgIGNvbnN0IHByb2R1Y3RzID0gZWxlbWVudC53Yl9wcm9kdWN0cy5tYXAoKHByb2R1Y3Q6IGFueSwgaWR4OiBudW1iZXIpID0+IHtcclxuICAgICAgICAgICAgICAgIC8vINCe0LHRgNCw0LHQvtGC0LrQsCDRhtC10L1cclxuICAgICAgICAgICAgICAgIGxldCBwcmljZSA9IDA7XHJcbiAgICAgICAgICAgICAgICBsZXQgb2xkUHJpY2UgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICBsZXQgc2FsZVByaWNlID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyDQn9C+0LvRg9GH0LDQtdC8INGG0LXQvdGLINC40Lcg0YDQsNC30L3Ri9GFINCy0L7Qt9C80L7QttC90YvRhSDQv9C+0LvQtdC5XHJcbiAgICAgICAgICAgICAgICBpZiAocHJvZHVjdC5wcmljZSAhPT0gdW5kZWZpbmVkKSBwcmljZSA9IE51bWJlcihwcm9kdWN0LnByaWNlKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8g0J/QvtC70YPRh9Cw0LXQvCDRgdGC0LDRgNGD0Y4g0YbQtdC90YNcclxuICAgICAgICAgICAgICAgIGlmIChwcm9kdWN0LnByaWNlVSAhPT0gdW5kZWZpbmVkKSBvbGRQcmljZSA9IE51bWJlcihwcm9kdWN0LnByaWNlVSk7XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChwcm9kdWN0Lm9sZFByaWNlICE9PSB1bmRlZmluZWQpIG9sZFByaWNlID0gTnVtYmVyKHByb2R1Y3Qub2xkUHJpY2UpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyDQn9C+0LvRg9GH0LDQtdC8INGG0LXQvdGDINGB0L4g0YHQutC40LTQutC+0LlcclxuICAgICAgICAgICAgICAgIGlmIChwcm9kdWN0LnNhbGVfcHJpY2UgIT09IHVuZGVmaW5lZCkgc2FsZVByaWNlID0gTnVtYmVyKHByb2R1Y3Quc2FsZV9wcmljZSk7XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChwcm9kdWN0LnNhbGVQcmljZVUgIT09IHVuZGVmaW5lZCkgc2FsZVByaWNlID0gTnVtYmVyKHByb2R1Y3Quc2FsZVByaWNlVSk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vINCV0YHQu9C4INGDINC90LDRgSDQtdGB0YLRjCDRgtC+0LvRjNC60L4g0YHRgtCw0YDQsNGPINGG0LXQvdCwINC4INC90LXRgiDRgdC60LjQtNC+0YfQvdC+0LksINC40YHQv9C+0LvRjNC30YPQtdC8INGG0LXQvdGDINC60LDQuiDRgdC60LjQtNC+0YfQvdGD0Y5cclxuICAgICAgICAgICAgICAgIGlmIChvbGRQcmljZSAhPT0gdW5kZWZpbmVkICYmIChzYWxlUHJpY2UgPT09IHVuZGVmaW5lZCB8fCBzYWxlUHJpY2UgPT09IDApKSB7XHJcbiAgICAgICAgICAgICAgICAgIGlmIChwcmljZSA+IDAgJiYgcHJpY2UgPCBvbGRQcmljZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNhbGVQcmljZSA9IHByaWNlO1xyXG4gICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHNhbGVQcmljZSA9IG9sZFByaWNlO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vINCV0YHQu9C4INGDINC90LDRgSDQtdGB0YLRjCDRgtC+0LvRjNC60L4g0YHQutC40LTQvtGH0L3QsNGPINGG0LXQvdCwINC4INC90LXRgiDRgdGC0LDRgNC+0LksINC40YHQv9C+0LvRjNC30YPQtdC8INGB0LrQuNC00L7Rh9C90YPRjiDQutCw0Log0L7RgdC90L7QstC90YPRjlxyXG4gICAgICAgICAgICAgICAgaWYgKHNhbGVQcmljZSAhPT0gdW5kZWZpbmVkICYmIG9sZFByaWNlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgaWYgKHByaWNlID4gc2FsZVByaWNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2xkUHJpY2UgPSBwcmljZTtcclxuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBvbGRQcmljZSA9IHNhbGVQcmljZTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyDQldGB0LvQuCDRgyDQvdCw0YEg0L3QtdGCINGG0LXQvSDQstC+0L7QsdGJ0LUsINC40YHQv9C+0LvRjNC30YPQtdC8INGB0LvRg9GH0LDQudC90YPRjiDRhtC10L3Rg1xyXG4gICAgICAgICAgICAgICAgaWYgKHByaWNlID09PSAwICYmIG9sZFByaWNlID09PSB1bmRlZmluZWQgJiYgc2FsZVByaWNlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgcHJpY2UgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA1MDAwKSArIDUwMDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8g0KHRhNC+0YDQvNC40YDRg9C10Lwg0L7QsdGK0LXQutGCINC/0YDQvtC00YPQutGC0LBcclxuICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgIGlkOiBwcm9kdWN0LmlkIHx8IGAke2VsZW1lbnQudHlwZX0tJHtpZHh9YCxcclxuICAgICAgICAgICAgICAgICAgbmFtZTogcHJvZHVjdC5uYW1lIHx8IGAke2VsZW1lbnQuY29sb3J9ICR7ZWxlbWVudC50eXBlfWAsXHJcbiAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBwcm9kdWN0LmRlc2NyaXB0aW9uIHx8IGVsZW1lbnQuZGVzY3JpcHRpb24gfHwgYCR7ZWxlbWVudC5jb2xvcn0gJHtlbGVtZW50LnR5cGV9YCxcclxuICAgICAgICAgICAgICAgICAgcHJpY2U6IHNhbGVQcmljZSB8fCBwcmljZSxcclxuICAgICAgICAgICAgICAgICAgb2xkUHJpY2U6IG9sZFByaWNlLFxyXG4gICAgICAgICAgICAgICAgICBpbWFnZVVybDogcHJvZHVjdC5pbWFnZVVybCB8fCBwcm9kdWN0LmltZyB8fCAocHJvZHVjdC5waWNzICYmIHByb2R1Y3QucGljc1swXSksXHJcbiAgICAgICAgICAgICAgICAgIGNhdGVnb3J5OiBlbGVtZW50LnR5cGUgfHwgJ9Ce0LTQtdC20LTQsCcsXHJcbiAgICAgICAgICAgICAgICAgIGdlbmRlcjogZWxlbWVudC5nZW5kZXIgfHwgZ2VuZGVyIHx8ICfRg9C90LjRgdC10LrRgScsXHJcbiAgICAgICAgICAgICAgICAgIHVybDogcHJvZHVjdC51cmwgfHwgcHJvZHVjdC5saW5rIHx8IGBodHRwczovL3d3dy53aWxkYmVycmllcy5ydS9jYXRhbG9nLyR7cHJvZHVjdC5pZH0vZGV0YWlsLmFzcHhgLFxyXG4gICAgICAgICAgICAgICAgICBicmFuZDogcHJvZHVjdC5icmFuZFxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICBhbGxQcm9kdWN0cyA9IFsuLi5hbGxQcm9kdWN0cywgLi4ucHJvZHVjdHNdO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIC8vINCV0YHQu9C4INC90LXRgiB3Yl9wcm9kdWN0cywg0YHQvtC30LTQsNC10Lwg0LTQtdC80L4t0L/RgNC+0LTRg9C60YIg0L3QsCDQvtGB0L3QvtCy0LUg0L7Qv9C40YHQsNC90LjRjyDRjdC70LXQvNC10L3RgtCwXHJcbiAgICAgICAgICAgICAgYWxsUHJvZHVjdHMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICBpZDogYCR7ZWxlbWVudC50eXBlfS1kZW1vYCxcclxuICAgICAgICAgICAgICAgIG5hbWU6IGAke2VsZW1lbnQuY29sb3J9ICR7ZWxlbWVudC50eXBlfWAsXHJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogZWxlbWVudC5kZXNjcmlwdGlvbiB8fCBgJHtlbGVtZW50LmNvbG9yfSAke2VsZW1lbnQudHlwZX1gLFxyXG4gICAgICAgICAgICAgICAgcHJpY2U6IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDUwMDApICsgNTAwLFxyXG4gICAgICAgICAgICAgICAgaW1hZ2VVcmw6IGBodHRwczovL2Jhc2tldC0wJHsoYWxsUHJvZHVjdHMubGVuZ3RoICUgOSkgKyAxfS53YmJhc2tldC5ydS92b2wke2FsbFByb2R1Y3RzLmxlbmd0aCArIDF9MDAvcGFydCR7YWxsUHJvZHVjdHMubGVuZ3RoICsgMX0wMCR7YWxsUHJvZHVjdHMubGVuZ3RoICsgMX0vMTAwJHthbGxQcm9kdWN0cy5sZW5ndGggKyAxfSR7YWxsUHJvZHVjdHMubGVuZ3RoICsgMX0ke2FsbFByb2R1Y3RzLmxlbmd0aCArIDF9L2ltYWdlcy9jNTE2eDY4OC8xLndlYnBgLFxyXG4gICAgICAgICAgICAgICAgY2F0ZWdvcnk6IGVsZW1lbnQudHlwZSB8fCAn0J7QtNC10LbQtNCwJyxcclxuICAgICAgICAgICAgICAgIGdlbmRlcjogZWxlbWVudC5nZW5kZXIgfHwgZ2VuZGVyIHx8ICfRg9C90LjRgdC10LrRgSdcclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICByZXN1bHRzID0gYWxsUHJvZHVjdHM7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIC8vINCV0YHQu9C4INC90LjRh9C10LPQviDQvdC1INC90LDQudC00LXQvdC+LCDQuNGB0L/QvtC70YzQt9GD0LXQvCDQvNC+0LrQvtCy0YvQtSDQtNCw0L3QvdGL0LVcclxuICAgICAgICAgIGNvbnNvbGUubG9nKCfQndC10LjQt9Cy0LXRgdGC0L3Ri9C5INGE0L7RgNC80LDRgiDQtNCw0L3QvdGL0YUg0L7RgiBQeXRob24gQVBJLCDQuNGB0L/QvtC70YzQt9GD0LXQvCDQvNC+0LrQvtCy0YvQtSDQtNCw0L3QvdGL0LUnKTtcclxuICAgICAgICAgIHJlc3VsdHMgPSBnZXRNb2NrUmVzdWx0cyhnZW5kZXIpLnJlc3VsdHM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IFxyXG4gICAgICAgICAgcmVzdWx0cyxcclxuICAgICAgICAgIGltYWdlVXJsOiBmaWxlVXJsLFxyXG4gICAgICAgICAgYXBpX3NvdXJjZTogJ3B5dGhvbicsXHJcbiAgICAgICAgICBhbmFseXNpczogYW5hbHlzaXNEYXRhLmFuYWx5c2lzIHx8IFwiXCJcclxuICAgICAgICB9KTtcclxuICAgICAgICBcclxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCfQntGI0LjQsdC60LAg0L/RgNC4INC+0LHRgNCw0YnQtdC90LjQuCDQuiBQeXRob24gQVBJOicsIGVycm9yKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyDQkiDRgdC70YPRh9Cw0LUg0L7RiNC40LHQutC4INCy0L7Qt9Cy0YDQsNGJ0LDQtdC8INC80L7QutC+0LLRi9C1INC00LDQvdC90YvQtVxyXG4gICAgICAgIGNvbnN0IG1vY2tEYXRhID0gZ2V0TW9ja1Jlc3VsdHMoZ2VuZGVyKTtcclxuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBcclxuICAgICAgICAgIHJlc3VsdHM6IG1vY2tEYXRhLnJlc3VsdHMsXHJcbiAgICAgICAgICBpbWFnZVVybDogZmlsZVVybCxcclxuICAgICAgICAgIGVycm9yOiBg0J7RiNC40LHQutCwINC/0YDQuCDQvtCx0YDQsNGJ0LXQvdC40Lgg0LogUHl0aG9uIEFQSTogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICfQndC10LjQt9Cy0LXRgdGC0L3QsNGPINC+0YjQuNCx0LrQsCd9YCxcclxuICAgICAgICAgIGFwaV9zb3VyY2U6ICdtb2NrJyxcclxuICAgICAgICAgIGFuYWx5c2lzOiBcItCd0LUg0YPQtNCw0LvQvtGB0Ywg0L/RgNC+0LDQvdCw0LvQuNC30LjRgNC+0LLQsNGC0Ywg0LjQt9C+0LHRgNCw0LbQtdC90LjQtSDQuNC3LdC30LAg0L7RiNC40LHQutC4IEFQSS5cIlxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyDQldGB0LvQuCBQeXRob24gQVBJINC90LXQtNC+0YHRgtGD0L/QtdC9LCDQuNGB0L/QvtC70YzQt9GD0LXQvCDQvNC+0LrQvtCy0YvQtSDQtNCw0L3QvdGL0LVcclxuICAgICAgY29uc29sZS5sb2coJ1B5dGhvbiBBUEkg0L3QtdC00L7RgdGC0YPQv9C10L0sINC40YHQv9C+0LvRjNC30YPQtdC8INC80L7QutC+0LLRi9C1INC00LDQvdC90YvQtScpO1xyXG4gICAgICBjb25zdCBtb2NrRGF0YSA9IGdldE1vY2tSZXN1bHRzKGdlbmRlcik7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IFxyXG4gICAgICAgIHJlc3VsdHM6IG1vY2tEYXRhLnJlc3VsdHMsXHJcbiAgICAgICAgaW1hZ2VVcmw6IGZpbGVVcmwsXHJcbiAgICAgICAgYXBpX3NvdXJjZTogJ21vY2snLFxyXG4gICAgICAgIGFuYWx5c2lzOiBcItCQ0L3QsNC70LjQtyDQvdC10LTQvtGB0YLRg9C/0LXQvSAtINGB0LXRgNCy0LXRgCDQsNC90LDQu9C40LfQsCDQuNC30L7QsdGA0LDQttC10L3QuNC5INC90LUg0L7RgtCy0LXRh9Cw0LXRgi5cIlxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcign0J7RiNC40LHQutCwINC/0YDQuCDQvtCx0YDQsNCx0L7RgtC60LUg0LjQt9C+0LHRgNCw0LbQtdC90LjRjzonLCBlcnJvcik7XHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgIHsgZXJyb3I6ICfQn9GA0L7QuNC30L7RiNC70LAg0L7RiNC40LHQutCwINC/0YDQuCDQvtCx0YDQsNCx0L7RgtC60LUg0LjQt9C+0LHRgNCw0LbQtdC90LjRjycgfSxcclxuICAgICAgeyBzdGF0dXM6IDUwMCB9XHJcbiAgICApO1xyXG4gIH1cclxufVxyXG5cclxuLy8g0KTRg9C90LrRhtC40Y8g0LTQu9GPINC/0L7Qu9GD0YfQtdC90LjRjyDQvNC+0LrQvtCy0YvRhSDQtNCw0L3QvdGL0YVcclxuZnVuY3Rpb24gZ2V0TW9ja1Jlc3VsdHMoZ2VuZGVyOiBzdHJpbmcgPSAn0YPQvdC40YHQtdC60YEnKSB7XHJcbiAgY29uc3QgdXNlckdlbmRlciA9IGdlbmRlci50b0xvd2VyQ2FzZSgpO1xyXG4gIFxyXG4gIHJldHVybiB7XHJcbiAgICByZXN1bHRzOiBbXHJcbiAgICAgIHtcclxuICAgICAgICBpZDogJzEnLFxyXG4gICAgICAgIG5hbWU6ICfQkdC10LvQsNGPINGF0LvQvtC/0LrQvtCy0LDRjyDRhNGD0YLQsdC+0LvQutCwJyxcclxuICAgICAgICBkZXNjcmlwdGlvbjogJ9CR0LDQt9C+0LLQsNGPINGE0YPRgtCx0L7Qu9C60LAg0LjQtyDQvtGA0LPQsNC90LjRh9C10YHQutC+0LPQviDRhdC70L7Qv9C60LAg0YEg0LrRgNGD0LPQu9GL0Lwg0LLRi9GA0LXQt9C+0LwnLFxyXG4gICAgICAgIHByaWNlOiA5OTksXHJcbiAgICAgICAgaW1hZ2VVcmw6ICdodHRwczovL2Jhc2tldC0wMS53YmJhc2tldC5ydS92b2wxMDAxL3BhcnQxMDAxMzUvMTAwMTM1NzY2L2ltYWdlcy9jNTE2eDY4OC8xLndlYnAnLFxyXG4gICAgICAgIGNhdGVnb3J5OiAn0JLQtdGA0YUnLFxyXG4gICAgICAgIGdlbmRlcjogdXNlckdlbmRlclxyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgaWQ6ICcyJyxcclxuICAgICAgICBuYW1lOiAn0JHQtdC70LDRjyDRhNGD0YLQsdC+0LvQutCwINC+0LLQtdGA0YHQsNC50LcnLFxyXG4gICAgICAgIGRlc2NyaXB0aW9uOiAn0KHQstC+0LHQvtC00L3QsNGPINGE0YPRgtCx0L7Qu9C60LAg0YHQstC+0LHQvtC00L3QvtCz0L4g0LrRgNC+0Y8g0LjQtyDQvNGP0LPQutC+0LPQviDRhdC70L7Qv9C60LAnLFxyXG4gICAgICAgIHByaWNlOiAxMjk5LFxyXG4gICAgICAgIGltYWdlVXJsOiAnaHR0cHM6Ly9iYXNrZXQtMDMud2JiYXNrZXQucnUvdm9sMjgzL3BhcnQyODM2NC8yODM2NDc3MC9pbWFnZXMvYzUxNng2ODgvMS53ZWJwJyxcclxuICAgICAgICBjYXRlZ29yeTogJ9CS0LXRgNGFJyxcclxuICAgICAgICBnZW5kZXI6IHVzZXJHZW5kZXJcclxuICAgICAgfSxcclxuICAgICAge1xyXG4gICAgICAgIGlkOiAnMycsXHJcbiAgICAgICAgbmFtZTogJ9Ck0YPRgtCx0L7Qu9C60LAg0YEg0L/RgNC40L3RgtC+0LwnLFxyXG4gICAgICAgIGRlc2NyaXB0aW9uOiAn0KHRgtC40LvRjNC90LDRjyDRhdC70L7Qv9C60L7QstCw0Y8g0YTRg9GC0LHQvtC70LrQsCDRgSDQs9GA0LDRhNC40YfQtdGB0LrQuNC8INC/0YDQuNC90YLQvtC8JyxcclxuICAgICAgICBwcmljZTogMTU5OSxcclxuICAgICAgICBpbWFnZVVybDogJ2h0dHBzOi8vYmFza2V0LTA1LndiYmFza2V0LnJ1L3ZvbDc1OC9wYXJ0NzU4NDYvNzU4NDYzODcvaW1hZ2VzL2M1MTZ4Njg4LzEud2VicCcsXHJcbiAgICAgICAgY2F0ZWdvcnk6ICfQktC10YDRhScsXHJcbiAgICAgICAgZ2VuZGVyOiB1c2VyR2VuZGVyID09PSAn0LzRg9C20YHQutC+0LknID8gJ9C80YPQttGB0LrQvtC5JyA6ICfQttC10L3RgdC60LjQuSdcclxuICAgICAgfSxcclxuICAgICAge1xyXG4gICAgICAgIGlkOiAnNCcsXHJcbiAgICAgICAgbmFtZTogJ9CR0LDQt9C+0LLQsNGPINCx0LXQu9Cw0Y8g0LHQu9GD0LfQutCwJyxcclxuICAgICAgICBkZXNjcmlwdGlvbjogJ9Ct0LvQtdCz0LDQvdGC0L3QsNGPINCx0LvRg9C30LrQsCDQuNC3INGB0LzQtdGB0L7QstC+0LPQviDRhdC70L7Qv9C60LAg0YHQviDRgdCy0L7QsdC+0LTQvdGL0Lwg0YHQuNC70YPRjdGC0L7QvCcsXHJcbiAgICAgICAgcHJpY2U6IDI0OTksXHJcbiAgICAgICAgaW1hZ2VVcmw6ICdodHRwczovL2Jhc2tldC0xMS53YmJhc2tldC5ydS92b2wxNDU3L3BhcnQxNDU3NjYvMTQ1NzY2Mjg3L2ltYWdlcy9jNTE2eDY4OC8xLndlYnAnLFxyXG4gICAgICAgIGNhdGVnb3J5OiAn0JLQtdGA0YUnLFxyXG4gICAgICAgIGdlbmRlcjogJ9C20LXQvdGB0LrQuNC5J1xyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgaWQ6ICc1JyxcclxuICAgICAgICBuYW1lOiAn0KfQtdGA0L3QsNGPINGF0LvQvtC/0LrQvtCy0LDRjyDRhNGD0YLQsdC+0LvQutCwJyxcclxuICAgICAgICBkZXNjcmlwdGlvbjogJ9Ca0LvQsNGB0YHQuNGH0LXRgdC60LDRjyDRh9C10YDQvdCw0Y8g0YTRg9GC0LHQvtC70LrQsCDQuNC3INC/0YDQtdC80LjQsNC70YzQvdC+0LPQviDRhdC70L7Qv9C60LAnLFxyXG4gICAgICAgIHByaWNlOiAxMDk5LFxyXG4gICAgICAgIGltYWdlVXJsOiAnaHR0cHM6Ly9iYXNrZXQtMTAud2JiYXNrZXQucnUvdm9sMTQxOC9wYXJ0MTQxODEyLzE0MTgxMjg4My9pbWFnZXMvYzUxNng2ODgvMS53ZWJwJyxcclxuICAgICAgICBjYXRlZ29yeTogJ9CS0LXRgNGFJyxcclxuICAgICAgICBnZW5kZXI6ICfQvNGD0LbRgdC60L7QuSdcclxuICAgICAgfSxcclxuICAgICAge1xyXG4gICAgICAgIGlkOiAnNicsXHJcbiAgICAgICAgbmFtZTogJ9CR0LXQu9Cw0Y8g0YDRg9Cx0LDRiNC60LAnLFxyXG4gICAgICAgIGRlc2NyaXB0aW9uOiAn0JrQu9Cw0YHRgdC40YfQtdGB0LrQsNGPINGA0YPQsdCw0YjQutCwINC40Lcg0YXQu9C+0L/QutCwINGBINC00LvQuNC90L3Ri9C8INGA0YPQutCw0LLQvtC8JyxcclxuICAgICAgICBwcmljZTogMjk5OSxcclxuICAgICAgICBpbWFnZVVybDogJ2h0dHBzOi8vYmFza2V0LTEyLndiYmFza2V0LnJ1L3ZvbDE2ODgvcGFydDE2ODg0Mi8xNjg4NDIxMjIvaW1hZ2VzL2M1MTZ4Njg4LzEud2VicCcsXHJcbiAgICAgICAgY2F0ZWdvcnk6ICfQktC10YDRhScsXHJcbiAgICAgICAgZ2VuZGVyOiB1c2VyR2VuZGVyID09PSAn0LbQtdC90YHQutC40LknID8gJ9C20LXQvdGB0LrQuNC5JyA6ICfQvNGD0LbRgdC60L7QuSdcclxuICAgICAgfVxyXG4gICAgXVxyXG4gIH07XHJcbn1cclxuXHJcbi8vINCk0YPQvdC60YbQuNGPINC00LvRjyDRgNCw0LfQsdC+0YDQsCDQvtGC0LLQtdGC0LAg0L7RgiBQeXRob24gQVBJINC4INC/0YDQtdC+0LHRgNCw0LfQvtCy0LDQvdC40Y8g0LIg0YTQvtGA0LzQsNGCIENsb3RoaW5nUmVjb2duaXRpb25EYXRhXHJcbmZ1bmN0aW9uIHBhcnNlQ2xvdGhpbmdJdGVtc0Zyb21BbmFseXNpcyhhbmFseXNpc0RhdGE6IGFueSk6IENsb3RoaW5nUmVjb2duaXRpb25EYXRhWydpdGVtcyddIHtcclxuICAvLyDQldGB0LvQuCBBUEkg0LLQtdGA0L3Rg9C7INGD0LbQtSDQv9GA0LDQstC40LvRjNC90L4g0L7RgtGE0L7RgNC80LDRgtC40YDQvtCy0LDQvdC90YvQtSDQtNCw0L3QvdGL0LVcclxuICBpZiAoYW5hbHlzaXNEYXRhLmVsZW1lbnRzICYmIEFycmF5LmlzQXJyYXkoYW5hbHlzaXNEYXRhLmVsZW1lbnRzKSkge1xyXG4gICAgcmV0dXJuIGFuYWx5c2lzRGF0YS5lbGVtZW50cy5tYXAoKGl0ZW06IGFueSkgPT4gKHtcclxuICAgICAgdHlwZTogaXRlbS50eXBlIHx8IGl0ZW0ubmFtZSB8fCAn0J/RgNC10LTQvNC10YIg0L7QtNC10LbQtNGLJyxcclxuICAgICAgY29sb3I6IGl0ZW0uY29sb3IgfHwgJ9C90LXQuNC30LLQtdGB0YLQvdGL0LknLFxyXG4gICAgICBkZXNjcmlwdGlvbjogaXRlbS5kZXNjcmlwdGlvbiB8fCAnJyxcclxuICAgICAgbWF0ZXJpYWw6IGl0ZW0ubWF0ZXJpYWwsXHJcbiAgICAgIHBhdHRlcm46IGl0ZW0ucGF0dGVybixcclxuICAgICAgZ2VuZGVyOiBpdGVtLmdlbmRlclxyXG4gICAgfSkpO1xyXG4gIH1cclxuXHJcbiAgLy8g0JXRgdC70LggQVBJINCy0LXRgNC90YPQuyDQtNCw0L3QvdGL0LUg0LIg0L/QvtC70LUgJ2FuYWx5c2lzJ1xyXG4gIGlmIChhbmFseXNpc0RhdGEuYW5hbHlzaXMpIHtcclxuICAgIGNvbnNvbGUubG9nKCfQn9C+0LvRg9GH0LXQvSDQsNC90LDQu9C40Lcg0YLQtdC60YHRgtCwOicsIGFuYWx5c2lzRGF0YS5hbmFseXNpcyk7XHJcbiAgfVxyXG4gIFxyXG4gIC8vINCV0YHQu9C4IEFQSSDQstC10YDQvdGD0Lsg0LTQsNC90L3Ri9C1INCyINC90LXRgdGC0LDQvdC00LDRgNGC0L3QvtC5INGB0YLRgNGD0LrRgtGD0YDQtSwg0L/RgNC+0LLQtdGA0Y/QtdC8INCy0YHQtSDQstC+0LfQvNC+0LbQvdGL0LUg0L/QvtC70Y9cclxuICBjb25zdCBwb3NzaWJsZURhdGFGaWVsZHMgPSBbJ2RhdGEnLCAncmVzdWx0JywgJ3Jlc3VsdHMnLCAnaXRlbXMnLCAnY2xvdGhpbmdfaXRlbXMnXTtcclxuICBmb3IgKGNvbnN0IGZpZWxkIG9mIHBvc3NpYmxlRGF0YUZpZWxkcykge1xyXG4gICAgaWYgKGFuYWx5c2lzRGF0YVtmaWVsZF0gJiYgKEFycmF5LmlzQXJyYXkoYW5hbHlzaXNEYXRhW2ZpZWxkXSkgfHwgdHlwZW9mIGFuYWx5c2lzRGF0YVtmaWVsZF0gPT09ICdvYmplY3QnKSkge1xyXG4gICAgICBjb25zb2xlLmxvZyhg0J3QsNC50LTQtdC90Ysg0LTQsNC90L3Ri9C1INCyINC/0L7Qu9C1ICR7ZmllbGR9OmAsIGFuYWx5c2lzRGF0YVtmaWVsZF0pO1xyXG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShhbmFseXNpc0RhdGFbZmllbGRdKSkge1xyXG4gICAgICAgIHJldHVybiBhbmFseXNpc0RhdGFbZmllbGRdLm1hcCgoaXRlbTogYW55KSA9PiAoe1xyXG4gICAgICAgICAgdHlwZTogaXRlbS50eXBlIHx8IGl0ZW0ubmFtZSB8fCAn0J/RgNC10LTQvNC10YIg0L7QtNC10LbQtNGLJyxcclxuICAgICAgICAgIGNvbG9yOiBpdGVtLmNvbG9yIHx8ICfQvdC10LjQt9Cy0LXRgdGC0L3Ri9C5JyxcclxuICAgICAgICAgIGRlc2NyaXB0aW9uOiBpdGVtLmRlc2NyaXB0aW9uIHx8ICcnLFxyXG4gICAgICAgICAgbWF0ZXJpYWw6IGl0ZW0ubWF0ZXJpYWwsXHJcbiAgICAgICAgICBwYXR0ZXJuOiBpdGVtLnBhdHRlcm4sXHJcbiAgICAgICAgICBnZW5kZXI6IGl0ZW0uZ2VuZGVyXHJcbiAgICAgICAgfSkpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyDQldGB0LvQuCBBUEkg0LLQtdGA0L3Rg9C7INCw0L3QsNC70LjQtyDQsiDRgtC10LrRgdGC0L7QstC+0Lwg0YTQvtGA0LzQsNGC0LUsINC/0YvRgtCw0LXQvNGB0Y8g0LjQt9Cy0LvQtdGH0Ywg0LjQvdGE0L7RgNC80LDRhtC40Y4g0L4g0L/RgNC10LTQvNC10YLQsNGFINC+0LTQtdC20LTRi1xyXG4gIGNvbnN0IGFuYWx5c2lzVGV4dCA9IGFuYWx5c2lzRGF0YS5hbmFseXNpcyB8fCBhbmFseXNpc0RhdGEuZGVzY3JpcHRpb24gfHwgJyc7XHJcbiAgXHJcbiAgaWYgKCFhbmFseXNpc1RleHQpIHtcclxuICAgIGNvbnNvbGUubG9nKCfQndC10YIg0YLQtdC60YHRgtC+0LLQvtCz0L4g0LDQvdCw0LvQuNC30LAsINCy0L7Qt9Cy0YDQsNGJ0LDQtdC8INC80L7QutC+0LLRi9C1INC00LDQvdC90YvQtScpO1xyXG4gICAgcmV0dXJuIGdldE1vY2tBbmFseXNpc1Jlc3BvbnNlKCkuaXRlbXM7XHJcbiAgfVxyXG5cclxuICAvLyDQn9GL0YLQsNC10LzRgdGPINC40LfQstC70LXRh9GMINGN0LvQtdC80LXQvdGC0Ysg0L7QtNC10LbQtNGLINC40Lcg0YLQtdC60YHRgtCwXHJcbiAgY29uc3QgY2xvdGhpbmdJdGVtcyA9IFtdO1xyXG4gIFxyXG4gIC8vINCY0YnQtdC8INGD0L/QvtC80LjQvdCw0L3QuNGPINC/0YDQtdC00LzQtdGC0L7QsiDQvtC00LXQttC00Ysg0LIg0YLQtdC60YHRgtC1XHJcbiAgY29uc3QgY29tbW9uQ2xvdGhpbmdJdGVtcyA9IFtcclxuICAgICfRhNGD0YLQsdC+0LvQutCwJywgJ9GA0YPQsdCw0YjQutCwJywgJ9Cx0LvRg9C30LrQsCcsICfQv9C70LDRgtGM0LUnLCAn0Y7QsdC60LAnLCAn0LHRgNGO0LrQuCcsICfQtNC20LjQvdGB0YsnLFxyXG4gICAgJ9GI0L7RgNGC0YsnLCAn0LrRg9GA0YLQutCwJywgJ9C/0LDQu9GM0YLQvicsICfRgdCy0LjRgtC10YAnLCAn0LrQsNGA0LTQuNCz0LDQvScsICfRhdGD0LTQuCcsICfQtNC20LXQvNC/0LXRgCcsXHJcbiAgICAn0LrRgNC+0YHRgdC+0LLQutC4JywgJ9GC0YPRhNC70LgnLCAn0LHQvtGC0LjQvdC60LgnLCAn0YHQsNC/0L7Qs9C4JywgJ9C60LXQtNGLJywgJ9GI0LDQv9C60LAnLCAn0YjQu9GP0L/QsCcsXHJcbiAgICAn0LHQtdGA0LXRgicsICfQutC10L/QutCwJywgJ9GI0LDRgNGEJywgJ9C/0LXRgNGH0LDRgtC60LgnLCAn0L3QvtGB0LrQuCcsICfQutC+0LvQs9C+0YLQutC4JywgJ9Cx0LXQu9GM0LUnLFxyXG4gICAgJ9C60L7RgdGC0Y7QvCcsICfQv9C40LTQttCw0LonLCAn0LbQsNC60LXRgicsICfQsdC70LXQudC30LXRgCdcclxuICBdO1xyXG4gIFxyXG4gIC8vINCY0YnQtdC8INGG0LLQtdGC0LBcclxuICBjb25zdCBjb21tb25Db2xvcnMgPSBbXHJcbiAgICAn0LHQtdC70YvQuScsICfRh9C10YDQvdGL0LknLCAn0LrRgNCw0YHQvdGL0LknLCAn0YHQuNC90LjQuScsICfQt9C10LvQtdC90YvQuScsICfQttC10LvRgtGL0LknLCAn0L7RgNCw0L3QttC10LLRi9C5JyxcclxuICAgICfRhNC40L7Qu9C10YLQvtCy0YvQuScsICfRgNC+0LfQvtCy0YvQuScsICfQutC+0YDQuNGH0L3QtdCy0YvQuScsICfRgdC10YDRi9C5JywgJ9Cx0LXQttC10LLRi9C5JywgJ9Cz0L7Qu9GD0LHQvtC5J1xyXG4gIF07XHJcblxyXG4gIC8vINCY0YnQtdC8INC80LDRgtC10YDQuNCw0LvRi1xyXG4gIGNvbnN0IGNvbW1vbk1hdGVyaWFscyA9IFtcclxuICAgICfRhdC70L7Qv9C+0LonLCAn0LvQtdC9JywgJ9GI0LXRgNGB0YLRjCcsICfQutC+0LbQsCcsICfQt9Cw0LzRiNCwJywgJ9GI0LXQu9C6JywgJ9C00LXQvdC40LwnLCAn0L/QvtC70LjRjdGB0YLQtdGAJyxcclxuICAgICfQvdC10LnQu9C+0L0nLCAn0YLRgNC40LrQvtGC0LDQticsICfQstC40YHQutC+0LfQsCcsICfQsNC60YDQuNC7JywgJ9Cy0LXQu9GM0LLQtdGCJywgJ9GC0LLQuNC0JywgJ9C60LDRiNC10LzQuNGAJ1xyXG4gIF07XHJcblxyXG4gIGNvbnNvbGUubG9nKCfQkNC90LDQu9C40LfQuNGA0YPQtdC8INGC0LXQutGB0YI6JywgYW5hbHlzaXNUZXh0KTtcclxuXHJcbiAgLy8g0JTQu9GPINC60LDQttC00L7Qs9C+INC/0YDQtdC00LzQtdGC0LAg0L7QtNC10LbQtNGLINC/0YDQvtCy0LXRgNGP0LXQvCwg0YPQv9C+0LzQuNC90LDQtdGC0YHRjyDQu9C4INC+0L0g0LIg0YLQtdC60YHRgtC1XHJcbiAgZm9yIChjb25zdCBpdGVtIG9mIGNvbW1vbkNsb3RoaW5nSXRlbXMpIHtcclxuICAgIGNvbnN0IHJlZ2V4ID0gbmV3IFJlZ0V4cChgXFxcXGIke2l0ZW19XFxcXGJgLCAnaScpO1xyXG4gICAgaWYgKHJlZ2V4LnRlc3QoYW5hbHlzaXNUZXh0LnRvTG93ZXJDYXNlKCkpKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGDQndCw0LnQtNC10L0g0L/RgNC10LTQvNC10YI6ICR7aXRlbX1gKTtcclxuICAgICAgXHJcbiAgICAgIC8vINCV0YHQu9C4INC/0YDQtdC00LzQtdGCINC90LDQudC00LXQvSwg0L/Ri9GC0LDQtdC80YHRjyDQvdCw0LnRgtC4INC10LPQviDRhtCy0LXRglxyXG4gICAgICBsZXQgY29sb3IgPSAn0L3QtdC40LfQstC10YHRgtC90YvQuSc7XHJcbiAgICAgIGZvciAoY29uc3QgYyBvZiBjb21tb25Db2xvcnMpIHtcclxuICAgICAgICBjb25zdCBjb2xvclJlZ2V4ID0gbmV3IFJlZ0V4cChgXFxcXGIke2N9XFxcXHcqXFxcXHMrJHtpdGVtfVxcXFxifFxcXFxiJHtpdGVtfVxcXFxzKyR7Y31cXFxcdypcXFxcYmAsICdpJyk7XHJcbiAgICAgICAgaWYgKGNvbG9yUmVnZXgudGVzdChhbmFseXNpc1RleHQudG9Mb3dlckNhc2UoKSkpIHtcclxuICAgICAgICAgIGNvbG9yID0gYztcclxuICAgICAgICAgIGNvbnNvbGUubG9nKGAgINCd0LDQudC00LXQvSDRhtCy0LXRgjogJHtjb2xvcn1gKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgLy8g0J/Ri9GC0LDQtdC80YHRjyDQvdCw0LnRgtC4INC80LDRgtC10YDQuNCw0LtcclxuICAgICAgbGV0IG1hdGVyaWFsO1xyXG4gICAgICBmb3IgKGNvbnN0IG0gb2YgY29tbW9uTWF0ZXJpYWxzKSB7XHJcbiAgICAgICAgY29uc3QgbWF0ZXJpYWxSZWdleCA9IG5ldyBSZWdFeHAoYFxcXFxiJHttfVxcXFx3KlxcXFxzKyR7aXRlbX1cXFxcYnxcXFxcYiR7aXRlbX1cXFxccyvQuNC3XFxcXHMrJHttfVxcXFx3KlxcXFxifFxcXFxiJHttfVxcXFx3KlxcXFxzKyR7aXRlbX1cXFxcYmAsICdpJyk7XHJcbiAgICAgICAgaWYgKG1hdGVyaWFsUmVnZXgudGVzdChhbmFseXNpc1RleHQudG9Mb3dlckNhc2UoKSkpIHtcclxuICAgICAgICAgIG1hdGVyaWFsID0gbTtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKGAgINCd0LDQudC00LXQvSDQvNCw0YLQtdGA0LjQsNC7OiAke21hdGVyaWFsfWApO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICBjbG90aGluZ0l0ZW1zLnB1c2goe1xyXG4gICAgICAgIHR5cGU6IGl0ZW0uY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBpdGVtLnNsaWNlKDEpLFxyXG4gICAgICAgIGNvbG9yLFxyXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnJyxcclxuICAgICAgICAuLi4obWF0ZXJpYWwgJiYgeyBtYXRlcmlhbCB9KSxcclxuICAgICAgICBnZW5kZXI6IGRldGVybWluZUdlbmRlcihhbmFseXNpc1RleHQsIGl0ZW0pXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuICBcclxuICBpZiAoY2xvdGhpbmdJdGVtcy5sZW5ndGggPiAwKSB7XHJcbiAgICBjb25zb2xlLmxvZygn0J3QsNC50LTQtdC90Ysg0L/RgNC10LTQvNC10YLRiyDQvtC00LXQttC00Ys6JywgY2xvdGhpbmdJdGVtcyk7XHJcbiAgICByZXR1cm4gY2xvdGhpbmdJdGVtcztcclxuICB9IGVsc2Uge1xyXG4gICAgY29uc29sZS5sb2coJ9Cd0LUg0YPQtNCw0LvQvtGB0Ywg0YDQsNGB0L/QvtC30L3QsNGC0Ywg0L/RgNC10LTQvNC10YLRiyDQvtC00LXQttC00Ysg0LIg0YLQtdC60YHRgtC1LCDQstC+0LfQstGA0LDRidCw0LXQvCDQvNC+0LrQvtCy0YvQtSDQtNCw0L3QvdGL0LUnKTtcclxuICAgIHJldHVybiBnZXRNb2NrQW5hbHlzaXNSZXNwb25zZSgpLml0ZW1zO1xyXG4gIH1cclxufVxyXG5cclxuLy8g0JfQsNCz0LvRg9GI0LrQsCDQtNC70Y8g0YLQtdGB0YLQuNGA0L7QstCw0L3QuNGPLCDQuNGB0L/QvtC70YzQt9GD0LXRgtGB0Y8g0LrQvtCz0LTQsCDQvdC10YIg0LTQvtGB0YLRg9C/0LAg0LogUHl0aG9uIEFQSVxyXG5mdW5jdGlvbiBnZXRNb2NrQW5hbHlzaXNSZXNwb25zZShpbWFnZVVybD86IHN0cmluZyk6IENsb3RoaW5nUmVjb2duaXRpb25EYXRhIHtcclxuICByZXR1cm4ge1xyXG4gICAgaXRlbXM6IFtcclxuICAgICAge1xyXG4gICAgICAgIHR5cGU6ICfQpNGD0YLQsdC+0LvQutCwJyxcclxuICAgICAgICBjb2xvcjogJ9Cx0LXQu9Cw0Y8nLFxyXG4gICAgICAgIGRlc2NyaXB0aW9uOiAn0YXQu9C+0L/QutC+0LLQsNGPINGBINC60YDRg9Cz0LvRi9C8INCy0YvRgNC10LfQvtC8JyxcclxuICAgICAgICBtYXRlcmlhbDogJ9GF0LvQvtC/0L7QuicsXHJcbiAgICAgICAgZ2VuZGVyOiAn0LbQtdC90YHQutC40LknXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICB0eXBlOiAn0JTQttC40L3RgdGLJyxcclxuICAgICAgICBjb2xvcjogJ9GB0LjQvdC40LUnLFxyXG4gICAgICAgIGRlc2NyaXB0aW9uOiAn0LrQu9Cw0YHRgdC40YfQtdGB0LrQuNC1INC/0YDRj9C80L7Qs9C+INC60YDQvtGPJyxcclxuICAgICAgICBtYXRlcmlhbDogJ9C00LXQvdC40LwnLFxyXG4gICAgICAgIGdlbmRlcjogJ9C20LXQvdGB0LrQuNC5J1xyXG4gICAgICB9XHJcbiAgICBdLFxyXG4gICAgZnVsbERlc2NyaXB0aW9uOiAn0J3QsCDQuNC30L7QsdGA0LDQttC10L3QuNC4INC/0YDQtdC00YHRgtCw0LLQu9C10L0g0L/QvtCy0YHQtdC00L3QtdCy0L3Ri9C5INC60L7QvNC/0LvQtdC60YIsINGB0L7RgdGC0L7Rj9GJ0LjQuSDQuNC3INCx0LXQu9C+0Lkg0YXQu9C+0L/QutC+0LLQvtC5INGE0YPRgtCx0L7Qu9C60Lgg0YEg0LrRgNGD0LPQu9GL0Lwg0LLRi9GA0LXQt9C+0Lwg0Lgg0LrQu9Cw0YHRgdC40YfQtdGB0LrQuNGFINC/0YDRj9C80YvRhSDRgdC40L3QuNGFINC00LbQuNC90YHQvtCyLidcclxuICB9O1xyXG59XHJcblxyXG4vLyDQpNGD0L3QutGG0LjRjyDQtNC70Y8g0L7Qv9GA0LXQtNC10LvQtdC90LjRjyDQv9C+0LvQsCDQuNC3INGC0LXQutGB0YLQsCDQsNC90LDQu9C40LfQsFxyXG5mdW5jdGlvbiBkZXRlcm1pbmVHZW5kZXIodGV4dDogc3RyaW5nLCBpdGVtTmFtZTogc3RyaW5nKTogc3RyaW5nIHwgdW5kZWZpbmVkIHtcclxuICAvLyDQmNGJ0LXQvCDRj9Cy0L3QvtC1INGD0LrQsNC30LDQvdC40LUg0L/QvtC70LAg0LTQu9GPINCy0YHQtdCz0L4g0L7QsdGA0LDQt9CwXHJcbiAgY29uc3QgZ2VuZXJhbEdlbmRlck1hdGNoID0gdGV4dC5tYXRjaCgv0J/QntCbOlxccyoo0LzRg9C20YHQutC+0Ll80LbQtdC90YHQutC40Ll80YPQvdC40YHQtdC60YEpL2kpO1xyXG4gIGxldCBnZW5lcmFsR2VuZGVyID0gZ2VuZXJhbEdlbmRlck1hdGNoID8gZ2VuZXJhbEdlbmRlck1hdGNoWzFdLnRvTG93ZXJDYXNlKCkgOiB1bmRlZmluZWQ7XHJcbiAgXHJcbiAgLy8g0JjRidC10Lwg0YPQutCw0LfQsNC90LjQtSDQv9C+0LvQsCDQtNC70Y8g0LrQvtC90LrRgNC10YLQvdC+0LPQviDQv9GA0LXQtNC80LXRgtCwXHJcbiAgY29uc3QgaXRlbUdlbmRlclJlZ2V4ID0gbmV3IFJlZ0V4cChgKCR7aXRlbU5hbWV9KS4qP9C/0L7QuzpcXFxccyoo0LzRg9C20YHQutC+0Ll80LbQtdC90YHQutC40Ll80YPQvdC40YHQtdC60YEpYCwgJ2knKTtcclxuICBjb25zdCBpdGVtR2VuZGVyTWF0Y2ggPSB0ZXh0Lm1hdGNoKGl0ZW1HZW5kZXJSZWdleCk7XHJcbiAgXHJcbiAgLy8g0JLQvtC30LLRgNCw0YnQsNC10Lwg0L/QvtC7INC00LvRjyDQutC+0L3QutGA0LXRgtC90L7Qs9C+INC/0YDQtdC00LzQtdGC0LAsINC10YHQu9C4INC90LDQudC00LXQvSwg0LjQvdCw0YfQtSDQvtCx0YnQuNC5INC/0L7Qu1xyXG4gIHJldHVybiBpdGVtR2VuZGVyTWF0Y2ggPyBpdGVtR2VuZGVyTWF0Y2hbMl0udG9Mb3dlckNhc2UoKSA6IGdlbmVyYWxHZW5kZXI7XHJcbn0gIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsIndyaXRlRmlsZSIsIm1rZGlyIiwiYWNjZXNzIiwicGF0aCIsIlBZVEhPTl9BUElfVVJMIiwicHJvY2VzcyIsImVudiIsImNoZWNrQXBpQXZhaWxhYmlsaXR5IiwicmVzcG9uc2UiLCJmZXRjaCIsIm1ldGhvZCIsImhlYWRlcnMiLCJzaWduYWwiLCJBYm9ydFNpZ25hbCIsInRpbWVvdXQiLCJvayIsImVycm9yIiwiY29uc29sZSIsIlBPU1QiLCJyZXF1ZXN0IiwiaXNBcGlBdmFpbGFibGUiLCJsb2ciLCJmb3JtRGF0YSIsImltYWdlIiwiZ2V0IiwiZ2VuZGVyIiwianNvbiIsInN0YXR1cyIsImJ5dGVzIiwiYXJyYXlCdWZmZXIiLCJidWZmZXIiLCJCdWZmZXIiLCJmcm9tIiwidGVtcERpciIsImpvaW4iLCJjd2QiLCJyZWN1cnNpdmUiLCJmaWxlTmFtZSIsIkRhdGUiLCJub3ciLCJuYW1lIiwiZmlsZVBhdGgiLCJmaWxlVXJsIiwicHl0aG9uQXBpRm9ybURhdGEiLCJGb3JtRGF0YSIsImFwcGVuZCIsIkJsb2IiLCJ0eXBlIiwicHl0aG9uQXBpUmVzcG9uc2UiLCJib2R5IiwiZXJyb3JUZXh0IiwidGV4dCIsIkVycm9yIiwiYW5hbHlzaXNEYXRhIiwicmVzdWx0cyIsIkFycmF5IiwiaXNBcnJheSIsIml0ZW1zIiwibWFwIiwiaXRlbSIsImluZGV4IiwiaWQiLCJkZXNjcmlwdGlvbiIsImNvbG9yIiwibWF0ZXJpYWwiLCJ0cmltIiwicHJpY2UiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJpbWFnZVVybCIsImNhdGVnb3J5IiwiZWxlbWVudHMiLCJhbGxQcm9kdWN0cyIsImVsZW1lbnQiLCJ3Yl9wcm9kdWN0cyIsInByb2R1Y3RzIiwicHJvZHVjdCIsImlkeCIsIm9sZFByaWNlIiwidW5kZWZpbmVkIiwic2FsZVByaWNlIiwiTnVtYmVyIiwicHJpY2VVIiwic2FsZV9wcmljZSIsInNhbGVQcmljZVUiLCJpbWciLCJwaWNzIiwidXJsIiwibGluayIsImJyYW5kIiwicHVzaCIsImxlbmd0aCIsImdldE1vY2tSZXN1bHRzIiwiYXBpX3NvdXJjZSIsImFuYWx5c2lzIiwibW9ja0RhdGEiLCJtZXNzYWdlIiwidXNlckdlbmRlciIsInRvTG93ZXJDYXNlIiwicGFyc2VDbG90aGluZ0l0ZW1zRnJvbUFuYWx5c2lzIiwicGF0dGVybiIsInBvc3NpYmxlRGF0YUZpZWxkcyIsImZpZWxkIiwiYW5hbHlzaXNUZXh0IiwiZ2V0TW9ja0FuYWx5c2lzUmVzcG9uc2UiLCJjbG90aGluZ0l0ZW1zIiwiY29tbW9uQ2xvdGhpbmdJdGVtcyIsImNvbW1vbkNvbG9ycyIsImNvbW1vbk1hdGVyaWFscyIsInJlZ2V4IiwiUmVnRXhwIiwidGVzdCIsImMiLCJjb2xvclJlZ2V4IiwibSIsIm1hdGVyaWFsUmVnZXgiLCJjaGFyQXQiLCJ0b1VwcGVyQ2FzZSIsInNsaWNlIiwiZGV0ZXJtaW5lR2VuZGVyIiwiZnVsbERlc2NyaXB0aW9uIiwiaXRlbU5hbWUiLCJnZW5lcmFsR2VuZGVyTWF0Y2giLCJtYXRjaCIsImdlbmVyYWxHZW5kZXIiLCJpdGVtR2VuZGVyUmVnZXgiLCJpdGVtR2VuZGVyTWF0Y2giXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/analyze-image/route.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fanalyze-image%2Froute&page=%2Fapi%2Fanalyze-image%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fanalyze-image%2Froute.ts&appDir=C%3A%5CUsers%5Cmaxsi%5Cqwewqeqr%5Cweb-interface%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cmaxsi%5Cqwewqeqr%5Cweb-interface&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();